"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[985],{2985:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(3433),a=n(4165),c=n(5861),o=n(9439),s=n(2791),u=n(7689),i=n(5918),l=n(1243),p=n(2530),f=n(1036),d=n(184),v=(0,s.lazy)((function(){return n.e(307).then(n.bind(n,4307))})),b=(0,s.lazy)((function(){return n.e(313).then(n.bind(n,6313))})),g=(0,s.lazy)((function(){return n.e(90).then(n.bind(n,3090))})),h=(0,s.lazy)((function(){return n.e(953).then(n.bind(n,953))})),x=(0,s.lazy)((function(){return n.e(29).then(n.bind(n,1029))}));function y(){var e=(0,i.Rh)("selection",[]),t=(0,o.Z)(e,2),n=t[0],y=t[1],m=(0,i.Rh)("stop",{id:"",name:"",type:""}),w=(0,o.Z)(m,2),Z=w[0],k=w[1],S=(0,i.Rh)("data",[]),R=(0,o.Z)(S,2),j=R[0],C=R[1],L=(0,i.Rh)("date",""),O=(0,o.Z)(L,2),A=O[0],z=O[1],B=(0,i.Rh)("viewData",[]),D=(0,o.Z)(B,2),P=D[0],W=D[1],E=(0,i.Rh)("error",null),F=(0,o.Z)(E,2),N=F[0],T=F[1],q=(0,i.Rh)("express",!0),G=(0,o.Z)(q,2),H=G[0],U=G[1],I=(0,i.Rh)("regional",!0),J=(0,o.Z)(I,2),K=J[0],M=J[1],Q=(0,i.Rh)("suburban",!0),V=(0,o.Z)(Q,2),X=V[0],Y=V[1],$=(0,i.Rh)("subway",!0),_=(0,o.Z)($,2),ee=_[0],te=_[1],ne=(0,i.Rh)("tram",!0),re=(0,o.Z)(ne,2),ae=re[0],ce=re[1],oe=(0,i.Rh)("bus",!0),se=(0,o.Z)(oe,2),ue=se[0],ie=se[1],le=(0,i.Rh)("ferry",!0),pe=(0,o.Z)(le,2),fe=pe[0],de=pe[1],ve=(0,u.UO)(),be=(0,u.s0)();(0,s.useEffect)((function(){function e(){return(e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n,r,c,o,s,u,i,l,p,f,d,v,b,g,h,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve.hasOwnProperty("id")||"string"!==typeof ve.id||9!==ve.id.length){e.next=26;break}return e.prev=1,t="https://vbb-rest.vercel.app/stops/".concat(ve.id,"?language=de"),e.next=5,fetch(t);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.next=11,r;case 11:c=e.sent,o=c.name,be("/arrivals/".concat(ve.id)),k(r),ke(ve.id,o,{}),document.title=navigator.language.startsWith("de")?"Ank\xfcnfte an ".concat(o):"Arrivals at ".concat(o),y([r]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.debug(e.t0);case 24:e.next=77;break;case 26:if(!ve.hasOwnProperty("id")||"string"!==typeof ve.id||12!==ve.id.length){e.next=53;break}return e.prev=27,s="".concat(ve.id.slice(0,1)).concat(ve.id.slice(-8)),u="https://vbb-rest.vercel.app/stops/".concat(s,"?language=de"),e.next=32,fetch(u);case 32:return i=e.sent,e.next=35,i.json();case 35:return l=e.sent,e.next=38,l;case 38:p=e.sent,f=p.name,be("/arrivals/".concat(s)),k(l),ke(s,f,{}),document.title=navigator.language.startsWith("de")?"Ank\xfcnfte an ".concat(f):"Arrivals at ".concat(f),y([l]),e.next=51;break;case 48:e.prev=48,e.t1=e.catch(27),console.debug(e.t1);case 51:e.next=77;break;case 53:return e.prev=53,v="https://vbb-rest.vercel.app/stops/".concat(d="900100011","?language=de"),e.next=58,fetch(v);case 58:return b=e.sent,e.next=61,b.json();case 61:return g=e.sent,e.next=64,g;case 64:h=e.sent,x=h.name,be("/arrivals/".concat(d)),k(g),ke(d,x,{}),document.title=navigator.language.startsWith("de")?"Ank\xfcnfte an ".concat(x):"Arrivals at ".concat(x),y([g]),e.next=77;break;case 74:e.prev=74,e.t2=e.catch(53),console.debug(e.t2);case 77:case"end":return e.stop()}}),e,null,[[1,21],[27,48],[53,74]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var ge=(0,s.useRef)(null),he=(0,s.useRef)(null),xe=(0,s.useRef)(null),ye=function(e){var t=j.filter((function(t){var n=!1;if(t.hasOwnProperty("provenance")&&t.provenance)for(var r=0;r<e.length;r++)if(t.line.name.toLowerCase().includes(e[r].toLowerCase())||t.provenance.toLowerCase().includes(e[r].toLowerCase())){n=!0;break}return n}));W(t)},me=function(e){var t=j.filter((function(t){var n=!0;if(t.hasOwnProperty("provenance")&&t.provenance)for(var r=0;r<e.length;r++)if(!t.line.name.toLowerCase().includes(e[r].toLowerCase())&&!t.provenance.toLowerCase().includes(e[r].toLowerCase())){n=!1;break}return n}));W(t)},we=function(){W(j)},Ze=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var n,c,o,s,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,!(n.length>4)){e.next=14;break}return c="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),e.next=6,fetch(c);case 6:return o=e.sent,e.next=9,o.json();case 9:s=e.sent,u=[Z].concat((0,r.Z)(s)),y(u),e.next=15;break;case 14:y([Z]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.debug(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,n,r){var c,o,s,u,i,f,d,v,b,g,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n.startsWith("Berlin")?"BLN":"BBG",o=(0,p.g)(c),s="de",u=navigator.language,s=u.startsWith("de")?"de":"en",i="https://vbb-rest.vercel.app/stops/".concat(t,"/arrivals?language=").concat(s,"&duration=").concat(o,"&express=").concat("boolean"===typeof r.express?r.express.toString():H.toString(),"&regional=").concat("boolean"===typeof r.regional?r.regional.toString():K.toString(),"&suburban=").concat("boolean"===typeof r.suburban?r.suburban.toString():X.toString(),"&subway=").concat("boolean"===typeof r.subway?r.subway.toString():ee.toString(),"&tram=").concat("boolean"===typeof r.tram?r.tram.toString():ae.toString(),"&bus=").concat("boolean"===typeof r.bus?r.bus.toString():ue.toString(),"&ferry=").concat("boolean"===typeof r.ferry?r.ferry.toString():fe.toString()),e.next=9,l.Z.get(i);case 9:return f=e.sent,e.next=12,f;case 12:d=e.sent,v=d.data,500===(b=d.status)||200!==b?(T("HTTP status code: ".concat(b)),C([])):(g=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),h=v.arrivals,document.title="de"===s?"Ank\xfcnfte an ".concat(n):"Arrivals at ".concat(n),z(g),C(h),W(h),T(null)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.debug(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{className:"timetable",children:[(0,d.jsx)(v,{filterStops:Ze,inputField:ge}),(0,d.jsx)(b,{handleChange:function(e){k(e);var t=e.id,n=e.name;ke(t,n,{}),ge.current.value="",he.current.value="",xe.current.value="OR"},selection:n,stop:Z,mode:"arr"}),(0,d.jsx)(g,{handleSubmit:function(){ke(Z.id,Z.name,{}),ge.current.value="",he.current.value="",xe.current.value="OR"}}),(0,d.jsx)(h,{filterField:he,filterSelector:xe,filterData:function(){var e=he.current.value.split(" "),t=xe.current.value;e.length>0?"OR"===t?ye(e):me(e):we()},mode:"arr"}),(0,d.jsx)(f.Z,{products:[H,K,X,ee,ae,ue,fe],productSetters:[U,M,Y,te,ce,ie,de],getData:function(e){return ke(Z.id,Z.name,e)}}),(0,d.jsx)(x,{stop:Z,data:P,error:N,date:A,mode:"arr"})]})}}}]);
//# sourceMappingURL=985.6a8da009.chunk.js.map