"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[964],{4157:(t,e,n)=>{n.d(e,{Z:()=>r});var a=n(2791),i=n(9922);function r(t){let{left:e,right:n}=t;return(0,i.BX)(a.Fragment,{children:[(0,i.tZ)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:e}),(0,i.tZ)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:n})]})}},964:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var a=n(2791),i=n(4157),r=n(9930),o=n(9922);function s(){return(0,o.BX)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,o.tZ)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,r.Z)("legend")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("scheduled"),right:(0,r.Z)("scheduledDesc")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("real"),right:(0,r.Z)("realDesc")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("delay"),right:(0,r.Z)("delayDesc")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("line"),right:(0,r.Z)("lineDesc")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("direction"),right:(0,r.Z)("directionDesc")}),(0,o.tZ)(i.Z,{left:(0,o.tZ)("span",{className:"fas fa-wheelchair"}),right:(0,r.Z)("barrierfree")}),(0,o.tZ)(i.Z,{left:(0,o.tZ)("span",{className:"fas fa-bicycle"}),right:(0,r.Z)("bike")}),(0,o.tZ)(i.Z,{left:(0,o.tZ)("span",{className:"fas fa-exclamation-triangle"}),right:(0,r.Z)("attention")}),(0,o.tZ)(i.Z,{left:(0,o.tZ)("span",{className:"fas fa-times"}),right:(0,r.Z)("cancelled")})]})}var c=n(7689),l=n(5918),d=n(2530),u=n(4307),g=n(6313),p=n(3090),h=n(953),m=n(1036),f=n(1029),b=n(4994);function Z(){const[t,e]=(0,l.Rh)("selection",[]),[n,i]=(0,l.Rh)("filterSelection",[]),[r,s]=(0,l.Rh)("stop",{id:"",name:"",type:""}),[Z,y]=(0,l.Rh)("filterStop",{id:"0",name:"\u2e3a",type:""}),[v,w]=(0,l.Rh)("data",[]),[S,D]=(0,l.Rh)("date",""),[x,R]=(0,l.Rh)("error",null),[B,E]=(0,l.Rh)("express",!0),[j,N]=(0,l.Rh)("regional",!0),[C,L]=(0,l.Rh)("suburban",!0),[T,k]=(0,l.Rh)("subway",!0),[O,W]=(0,l.Rh)("tram",!0),[A,z]=(0,l.Rh)("bus",!0),[I,X]=(0,l.Rh)("ferry",!0),[F,H]=(0,l.Rh)("time",(new Date).toLocaleString("sv",{timeZone:"Europe/Berlin",minute:"2-digit",hour:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).replace(" ","T")),P=(0,c.UO)(),q=(0,c.s0)();(0,a.useEffect)((()=>{!async function(){if(P.hasOwnProperty("id")&&"string"===typeof P.id&&9===P.id.length)try{const t="https://vbb-rest.vercel.app/stops/".concat(P.id,"?language=de"),n=await fetch(t),a=await n.json(),{name:i}=await a;q("/departures/".concat(P.id)),s(a),J(P.id,i,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(i):"Departures from ".concat(i);e([a])}catch(x){console.debug(x)}else if(P.hasOwnProperty("id")&&"string"===typeof P.id&&12===P.id.length)try{const t="".concat(P.id.slice(0,1)).concat(P.id.slice(-8)),n="https://vbb-rest.vercel.app/stops/".concat(t,"?language=de"),a=await fetch(n),i=await a.json(),{name:r}=await i;q("/departures/".concat(t)),s(i),J(t,r,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(r):"Departures from ".concat(r);e([i])}catch(x){console.debug(x)}else try{const t="900100011",n="https://vbb-rest.vercel.app/stops/".concat(t,"?language=de"),a=await fetch(n),i=await a.json(),{name:r}=await i;q("/departures/".concat(t)),s(i),J(t,r,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(r):"Departures from ".concat(r);e([i])}catch(x){console.debug(x)}}()}),[]);const G=(0,a.useRef)(null),U=(0,a.useRef)(null),J=async(t,e,n)=>{try{const a=(t=>t.startsWith("Berlin")||t.includes("(Berlin)")||t.includes("Berlin Hauptbahnhof")?"BLN":"BBG")(e),i=(0,d.g)(a);let o="de";o=navigator.language.startsWith("de")?"de":"en";const s=n.direction?"0"!==n.direction?parseInt(n.direction,10):null:"0"!==Z.id?parseInt(Z.id,10):null,c="number"===typeof s?"&direction=".concat(s):"";if((t===r.id||""===S)&&!n.time){const t=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),e=(new Date).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T");D(t),H(e)}const l="https://vbb-rest.vercel.app/stops/".concat(t,"/departures?language=").concat(o,"&duration=").concat(i,"&express=").concat("boolean"===typeof n.express?n.express.toString():B.toString(),"&regional=").concat("boolean"===typeof n.regional?n.regional.toString():j.toString(),"&suburban=").concat("boolean"===typeof n.suburban?n.suburban.toString():C.toString(),"&subway=").concat("boolean"===typeof n.subway?n.subway.toString():T.toString(),"&tram=").concat("boolean"===typeof n.tram?n.tram.toString():O.toString(),"&bus=").concat("boolean"===typeof n.bus?n.bus.toString():A.toString(),"&ferry=").concat("boolean"===typeof n.ferry?n.ferry.toString():I.toString()).concat(c,"&when=").concat("string"===typeof n.time?new Date(n.time).toISOString():new Date(F).toISOString()),u=await fetch(l),{status:g}=await u,p=await u.json();if(500===g||200!==g)R("HTTP status code: ".concat(g)),w([]);else{const{departures:t}=p;document.title="de"===o?"Abfahrten ab ".concat(e):"Departures from ".concat(e),w(t),R(null)}}catch(x){console.debug(x)}};return(0,o.BX)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[G&&(0,o.tZ)(u.Z,{filterStops:async t=>{const n=t.target.value;try{if(n.length>=3){const t="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),a=await fetch(t),i=await a.json(),o=[r,...i];e(o)}else e([r])}catch(x){console.debug(x)}},inputField:G}),(0,o.tZ)(g.Z,{handleChange:t=>{s(t);const{id:e,name:n}=t;J(e,n,{direction:"0"});G.current.value=""},selection:t,stop:r,mode:"dep"}),(0,o.tZ)(p.Z,{handleSubmit:()=>{const t=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),e=(new Date).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T");D(t),H(e),J(r.id,r.name,{time:e});G.current.value=""}}),(0,o.BX)("div",{children:[(0,o.tZ)("span",{sx:{display:"inline-block",mr:"0.2rem",fontStyle:"italic",fontWeight:700},children:"via"}),(0,o.tZ)(u.Z,{filterStops:async t=>{const e=t.target.value;try{const t={id:"0",name:"\u2e3a",type:""};if(e.length>=3){const n="https://vbb-rest.vercel.app/locations?query=".concat(e,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),a=await fetch(n),r=await a.json(),o="0"!==Z.id?[t,Z,...r]:[t,...r];i(o)}else if("0"!==Z.id){i([t,Z])}else i([t])}catch(x){console.debug(x)}},inputField:U}),(0,o.tZ)(h.Z,{handleChange:t=>{"0"!==t.id?(y(t),J(r.id,r.name,{direction:t.id})):(y({id:"0",name:"\u2e3a",type:""}),J(r.id,r.name,{direction:"0"}));U.current.value=""},selection:n,stop:Z})]}),(0,o.tZ)(m.Z,{products:[B,j,C,T,O,A,I],productSetters:[E,N,L,k,W,z,X],getData:t=>J(r.id,r.name,t)}),(0,o.tZ)(b.Z,{time:F,setTime:t=>{const e=new Date(t).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T"),n=new Date(t).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"});H(e),D(n),J(r.id,r.name,{time:e})}}),(0,o.tZ)(f.Z,{stop:r,data:v,error:x,date:S,mode:"dep"})]})}var y=n(184);const v=function(){return(0,y.jsxs)("div",{children:[(0,y.jsx)(s,{}),(0,y.jsx)(Z,{})]})}}}]);
//# sourceMappingURL=964.212e6fb5.chunk.js.map