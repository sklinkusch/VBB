"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[985],{2985:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(3433),r=n(4165),c=n(5861),s=n(9439),o=n(2791),i=n(7689),u=n(5918),l=n(1243),p=n(2530),d=n(4307),f=n(6313),g=n(3090),b=n(953),h=n(1036),v=n(1029),Z=n(9922);function x(){var e=(0,u.Rh)("selection",[]),t=(0,s.Z)(e,2),n=t[0],x=t[1],y=(0,u.Rh)("filterSelection",[]),m=(0,s.Z)(y,2),k=m[0],S=m[1],w=(0,u.Rh)("stop",{id:"",name:"",type:""}),R=(0,s.Z)(w,2),A=R[0],B=R[1],W=(0,u.Rh)("filterStop",{id:"0",name:"\u2e3a",type:""}),j=(0,s.Z)(W,2),O=j[0],z=j[1],C=(0,u.Rh)("data",[]),D=(0,s.Z)(C,2),E=D[0],P=D[1],q=(0,u.Rh)("date",""),F=(0,s.Z)(q,2),I=F[0],L=F[1],N=(0,u.Rh)("error",null),T=(0,s.Z)(N,2),X=T[0],G=T[1],H=(0,u.Rh)("express",!0),U=(0,s.Z)(H,2),J=U[0],K=U[1],M=(0,u.Rh)("regional",!0),Q=(0,s.Z)(M,2),V=Q[0],Y=Q[1],$=(0,u.Rh)("suburban",!0),_=(0,s.Z)($,2),ee=_[0],te=_[1],ne=(0,u.Rh)("subway",!0),ae=(0,s.Z)(ne,2),re=ae[0],ce=ae[1],se=(0,u.Rh)("tram",!0),oe=(0,s.Z)(se,2),ie=oe[0],ue=oe[1],le=(0,u.Rh)("bus",!0),pe=(0,s.Z)(le,2),de=pe[0],fe=pe[1],ge=(0,u.Rh)("ferry",!0),be=(0,s.Z)(ge,2),he=be[0],ve=be[1],Ze=(0,i.UO)(),xe=(0,i.s0)();(0,o.useEffect)((function(){function e(){return(e=(0,c.Z)((0,r.Z)().mark((function e(){var t,n,a,c,s,o,i,u,l,p,d,f,g,b,h,v,Z;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ze.hasOwnProperty("id")||"string"!==typeof Ze.id||9!==Ze.id.length){e.next=26;break}return e.prev=1,t="https://vbb-rest.vercel.app/stops/".concat(Ze.id,"?language=de"),e.next=5,fetch(t);case 5:return n=e.sent,e.next=8,n.json();case 8:return a=e.sent,e.next=11,a;case 11:c=e.sent,s=c.name,xe("/arrivals/".concat(Ze.id)),B(a),we(Ze.id,s,{}),document.title=navigator.language.startsWith("de")?"Ank\xfcnfte an ".concat(s):"Arrivals at ".concat(s),x([a]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.debug(e.t0);case 24:e.next=77;break;case 26:if(!Ze.hasOwnProperty("id")||"string"!==typeof Ze.id||12!==Ze.id.length){e.next=53;break}return e.prev=27,o="".concat(Ze.id.slice(0,1)).concat(Ze.id.slice(-8)),i="https://vbb-rest.vercel.app/stops/".concat(o,"?language=de"),e.next=32,fetch(i);case 32:return u=e.sent,e.next=35,u.json();case 35:return l=e.sent,e.next=38,l;case 38:p=e.sent,d=p.name,xe("/arrivals/".concat(o)),B(l),we(o,d,{}),document.title=navigator.language.startsWith("de")?"Ank\xfcnfte an ".concat(d):"Arrivals at ".concat(d),x([l]),e.next=51;break;case 48:e.prev=48,e.t1=e.catch(27),console.debug(e.t1);case 51:e.next=77;break;case 53:return e.prev=53,g="https://vbb-rest.vercel.app/stops/".concat(f="900100011","?language=de"),e.next=58,fetch(g);case 58:return b=e.sent,e.next=61,b.json();case 61:return h=e.sent,e.next=64,h;case 64:v=e.sent,Z=v.name,xe("/arrivals/".concat(f)),B(h),we(f,Z,{}),document.title=navigator.language.startsWith("de")?"Ank\xfcnfte an ".concat(Z):"Arrivals at ".concat(Z),x([h]),e.next=77;break;case 74:e.prev=74,e.t2=e.catch(53),console.debug(e.t2);case 77:case"end":return e.stop()}}),e,null,[[1,21],[27,48],[53,74]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var ye=(0,o.useRef)(null),me=(0,o.useRef)(null),ke=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){var n,c,s,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,!(n.length>4)){e.next=14;break}return c="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),e.next=6,fetch(c);case 6:return s=e.sent,e.next=9,s.json();case 9:o=e.sent,i=[A].concat((0,a.Z)(o)),x(i),e.next=15;break;case 14:x([A]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.debug(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){var n,c,s,o,i,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,c={id:"0",name:"\u2e3a",type:""},!(n.length>=3)){e.next=15;break}return s="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),e.next=7,fetch(s);case 7:return o=e.sent,e.next=10,o.json();case 10:i=e.sent,u="0"!==O.id?[c,O].concat((0,a.Z)(i)):[c].concat((0,a.Z)(i)),S(u),e.next=16;break;case 15:"0"!==O.id?S([c,O]):S([c]);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.debug(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t,n,a){var c,s,o,i,u,d,f,g,b,h,v,Z,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n.startsWith("Berlin")?"BLN":"BBG",s=(0,p.g)(c),o="de",i=navigator.language,o=i.startsWith("de")?"de":"en",u=a.direction?"0"!==a.direction?parseInt(a.direction,10):null:"0"!==O.id?parseInt(O.id,10):null,d="number"===typeof u?"&direction=".concat(u):"",f="https://vbb-rest.vercel.app/stops/".concat(t,"/arrivals?language=").concat(o,"&duration=").concat(s,"&express=").concat("boolean"===typeof a.express?a.express.toString():J.toString(),"&regional=").concat("boolean"===typeof a.regional?a.regional.toString():V.toString(),"&suburban=").concat("boolean"===typeof a.suburban?a.suburban.toString():ee.toString(),"&subway=").concat("boolean"===typeof a.subway?a.subway.toString():re.toString(),"&tram=").concat("boolean"===typeof a.tram?a.tram.toString():ie.toString(),"&bus=").concat("boolean"===typeof a.bus?a.bus.toString():de.toString(),"&ferry=").concat("boolean"===typeof a.ferry?a.ferry.toString():he.toString()).concat(d),e.next=11,l.Z.get(f);case 11:return g=e.sent,e.next=14,g;case 14:b=e.sent,h=b.data,500===(v=b.status)||200!==v?(G("HTTP status code: ".concat(v)),P([])):(Z=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),x=h.arrivals,document.title="de"===o?"Ank\xfcnfte an ".concat(n):"Arrivals at ".concat(n),L(Z),P(x),G(null)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.debug(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,n,a){return e.apply(this,arguments)}}();return(0,Z.BX)("div",{className:"timetable",children:[(0,Z.tZ)(d.Z,{filterStops:ke,inputField:ye}),(0,Z.tZ)(f.Z,{handleChange:function(e){B(e);var t=e.id,n=e.name;we(t,n,{}),ye.current.value=""},selection:n,stop:A,mode:"arr"}),(0,Z.tZ)(g.Z,{handleSubmit:function(){we(A.id,A.name,{}),ye.current.value=""}}),(0,Z.BX)("div",{children:[(0,Z.tZ)("span",{sx:{display:"inline-block",mr:"0.2rem",fontStyle:"italic",fontWeight:700},children:"via"}),(0,Z.tZ)(d.Z,{filterStops:Se,inputField:me}),(0,Z.tZ)(b.Z,{handleChange:function(e){z(e),"0"!==e.id?we(A.id,A.name,{direction:e.id}):we(A.id,A.name,{}),me.current.value=""},selection:k,stop:O})]}),(0,Z.tZ)(h.Z,{products:[J,V,ee,re,ie,de,he],productSetters:[K,Y,te,ce,ue,fe,ve],getData:function(e){return we(A.id,A.name,e)}}),(0,Z.tZ)(v.Z,{stop:A,data:E,error:X,date:I,mode:"arr"})]})}}}]);
//# sourceMappingURL=985.ca2f7925.chunk.js.map