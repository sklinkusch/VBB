"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[964],{4157:(t,e,a)=>{a.d(e,{Z:()=>r});var n=a(2791),i=a(9922);function r(t){let{left:e,right:a}=t;return(0,i.BX)(n.Fragment,{children:[(0,i.tZ)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:e}),(0,i.tZ)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:a})]})}},964:(t,e,a)=>{a.r(e),a.d(e,{default:()=>v});var n=a(2791),i=a(4157),r=a(9930),o=a(9922);function s(){return(0,o.BX)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,o.tZ)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,r.Z)("legend")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("scheduled"),right:(0,r.Z)("scheduledDesc")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("real"),right:(0,r.Z)("realDesc")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("delay"),right:(0,r.Z)("delayDesc")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("line"),right:(0,r.Z)("lineDesc")}),(0,o.tZ)(i.Z,{left:(0,r.Z)("direction"),right:(0,r.Z)("directionDesc")}),(0,o.tZ)(i.Z,{left:(0,o.tZ)("span",{className:"fas fa-wheelchair"}),right:(0,r.Z)("barrierfree")}),(0,o.tZ)(i.Z,{left:(0,o.tZ)("span",{className:"fas fa-bicycle"}),right:(0,r.Z)("bike")}),(0,o.tZ)(i.Z,{left:(0,o.tZ)("span",{className:"fas fa-exclamation-triangle"}),right:(0,r.Z)("attention")}),(0,o.tZ)(i.Z,{left:(0,o.tZ)("span",{className:"fas fa-times"}),right:(0,r.Z)("cancelled")})]})}var c=a(7689),l=a(5918),d=a(2530),u=a(4307),g=a(6313),p=a(3090),h=a(953),f=a(1036),m=a(1029),b=a(4994);function Z(){const[t,e]=(0,l.Rh)("selection",[]),[a,i]=(0,l.Rh)("filterSelection",[]),[r,s]=(0,l.Rh)("stop",{id:"",name:"",type:""}),[Z,y]=(0,l.Rh)("filterStop",{id:"0",name:"\u2e3a",type:""}),[v,w]=(0,l.Rh)("data",[]),[S,D]=(0,l.Rh)("date",""),[x,R]=(0,l.Rh)("error",null),[B,j]=(0,l.Rh)("express",!0),[E,N]=(0,l.Rh)("regional",!0),[C,T]=(0,l.Rh)("suburban",!0),[k,L]=(0,l.Rh)("subway",!0),[O,W]=(0,l.Rh)("tram",!0),[A,z]=(0,l.Rh)("bus",!0),[I,X]=(0,l.Rh)("ferry",!0),[F,H]=(0,l.Rh)("time",(new Date).toLocaleString("sv",{timeZone:"Europe/Berlin",minute:"2-digit",hour:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).replace(" ","T")),P=(0,c.UO)(),q=(0,c.s0)();(0,n.useEffect)((()=>{!async function(){if(P.hasOwnProperty("id")&&"string"===typeof P.id&&9===P.id.length)try{const t="https://vbb-rest.vercel.app/stops/".concat(P.id,"?language=de"),a=await fetch(t),n=await a.json(),{name:i}=await n;q("/departures/".concat(P.id)),s(n),J(P.id,i,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(i):"Departures from ".concat(i);e([n])}catch(x){console.debug(x)}else if(P.hasOwnProperty("id")&&"string"===typeof P.id&&12===P.id.length)try{const t="".concat(P.id.slice(0,1)).concat(P.id.slice(-8)),a="https://vbb-rest.vercel.app/stops/".concat(t,"?language=de"),n=await fetch(a),i=await n.json(),{name:r}=await i;q("/departures/".concat(t)),s(i),J(t,r,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(r):"Departures from ".concat(r);e([i])}catch(x){console.debug(x)}else try{const t="900100011",a="https://vbb-rest.vercel.app/stops/".concat(t,"?language=de"),n=await fetch(a),i=await n.json(),{name:r}=await i;q("/departures/".concat(t)),s(i),J(t,r,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(r):"Departures from ".concat(r);e([i])}catch(x){console.debug(x)}}()}),[]);const G=(0,n.useRef)(null),U=(0,n.useRef)(null),J=async(t,e,a)=>{try{const n=(t=>t.startsWith("Berlin")||t.includes("(Berlin)")||t.includes("Berlin Hauptbahnhof")?"BLN":"BBG")(e),i=(0,d.g)(n);let o="de";o=navigator.language.startsWith("de")?"de":"en";const s=a.direction?"0"!==a.direction?parseInt(a.direction,10):null:"0"!==Z.id?parseInt(Z.id,10):null,c="number"===typeof s?"&direction=".concat(s):"";if((t===r.id||""===S)&&!a.time){const t=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),e=(new Date).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T");D(t),H(e)}const l="https://vbb-rest.vercel.app/stops/".concat(t,"/departures?language=").concat(o,"&duration=").concat(i,"&express=").concat("boolean"===typeof a.express?a.express.toString():B.toString(),"&regional=").concat("boolean"===typeof a.regional?a.regional.toString():E.toString(),"&suburban=").concat("boolean"===typeof a.suburban?a.suburban.toString():C.toString(),"&subway=").concat("boolean"===typeof a.subway?a.subway.toString():k.toString(),"&tram=").concat("boolean"===typeof a.tram?a.tram.toString():O.toString(),"&bus=").concat("boolean"===typeof a.bus?a.bus.toString():A.toString(),"&ferry=").concat("boolean"===typeof a.ferry?a.ferry.toString():I.toString()).concat(c,"&when=").concat("string"===typeof a.time?new Date(a.time).toISOString():new Date(F).toISOString()),u=await fetch(l),{status:g}=await u,p=await u.json();if(500===g||200!==g)R("HTTP status code: ".concat(g)),w([]);else{const{departures:t}=p;document.title="de"===o?"Abfahrten ab ".concat(e):"Departures from ".concat(e),w(t),R(null)}}catch(x){console.debug(x)}};return(0,o.BX)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[G&&(0,o.tZ)(u.Z,{filterStops:async t=>{const a=t.target.value;try{if(a.length>=3){const t="https://vbb-rest.vercel.app/locations?query=".concat(a,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),n=await fetch(t),i=await n.json(),o=[r,...i];e(o)}else e([r])}catch(x){console.debug(x)}},inputField:G}),(0,o.tZ)(g.Z,{handleChange:t=>{s(t);const{id:e,name:a}=t;J(e,a,{direction:"0"});G.current.value=""},selection:t,stop:r,mode:"dep"}),(0,o.tZ)(p.Z,{handleSubmit:()=>{J(r.id,r.name,{time:(new Date).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T")});G.current.value=""}}),(0,o.BX)("div",{children:[(0,o.tZ)("span",{sx:{display:"inline-block",mr:"0.2rem",fontStyle:"italic",fontWeight:700},children:"via"}),(0,o.tZ)(u.Z,{filterStops:async t=>{const e=t.target.value;try{const t={id:"0",name:"\u2e3a",type:""};if(e.length>=3){const a="https://vbb-rest.vercel.app/locations?query=".concat(e,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),n=await fetch(a),r=await n.json(),o="0"!==Z.id?[t,Z,...r]:[t,...r];i(o)}else if("0"!==Z.id){i([t,Z])}else i([t])}catch(x){console.debug(x)}},inputField:U}),(0,o.tZ)(h.Z,{handleChange:t=>{"0"!==t.id?(y(t),J(r.id,r.name,{direction:t.id})):(y({id:"0",name:"\u2e3a",type:""}),J(r.id,r.name,{direction:"0"}));U.current.value=""},selection:a,stop:Z})]}),(0,o.tZ)(f.Z,{products:[B,E,C,k,O,A,I],productSetters:[j,N,T,L,W,z,X],getData:t=>J(r.id,r.name,t)}),(0,o.tZ)(b.Z,{time:F,setTime:t=>{const e=new Date(t).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T"),a=new Date(t).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"});H(e),D(a),J(r.id,r.name,{time:e})}}),(0,o.tZ)(m.Z,{stop:r,data:v,error:x,date:S,mode:"dep"})]})}var y=a(184);const v=function(){return(0,y.jsxs)("div",{children:[(0,y.jsx)(s,{}),(0,y.jsx)(Z,{})]})}}}]);
//# sourceMappingURL=964.46ab263b.chunk.js.map