"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[207],{9207:function(n,e,t){t.r(e),t.d(e,{getDelay:function(){return v},getPlanTime:function(){return y},getTime:function(){return Z}});var r=t(9439),a=t(2791),i=t(4373),o=t(9922),c=(0,a.lazy)((function(){return t.e(599).then(t.bind(t,8705))})),u=(0,a.lazy)((function(){return t.e(305).then(t.bind(t,6305))})),l=(0,a.lazy)((function(){return t.e(272).then(t.bind(t,5272))})),d=(0,a.lazy)((function(){return t.e(48).then(t.bind(t,1048))})),s=(0,a.lazy)((function(){return Promise.resolve().then(t.bind(t,6049))})),p=(0,a.lazy)((function(){return t.e(302).then(t.bind(t,6302))})),f=(0,a.lazy)((function(){return t.e(734).then(t.bind(t,734))})),h=(0,a.lazy)((function(){return t.e(619).then(t.bind(t,619))})),m=(0,a.lazy)((function(){return t.e(776).then(t.bind(t,7776))})),b=(0,a.lazy)((function(){return t.e(558).then(t.bind(t,4558))})),g=(0,a.lazy)((function(){return t.e(525).then(t.bind(t,1525))})),v=function(n,e){if(null!=n){var t=Math.abs(n/60);return Math.round(t)}return e?"X":"?"},y=function(n,e){var t=Number(n.substring(0,2)),r=Number(n.substring(3,5));(r-=e)<0&&(r+=60,t-=1),r>59&&(r-=60,t+=1),t<0&&(t+=24),t>23&&(t-=24);var a=t<10?"0".concat(t):"".concat(t),i=r<10?"0".concat(r):"".concat(r);return"".concat(a,":").concat(i)},Z=function(n){return null!=n?n.substring(11,16):""};e.default=function(n){var e,t,k=(0,a.useState)(null),x=(0,r.Z)(k,2),z=x[0],C=x[1],M=(0,a.useState)(void 0),w=(0,r.Z)(M,2),N=w[0],P=w[1],B=function(n){var e=4*Math.atan(1),t=n.currentTripPosition,r=n.stop;if(t){var a=t.latitude,i=t.longitude;fetch("https://vbb-rest.vercel.app/locations/nearby?latitude=".concat(a,"&longitude=").concat(i,"&results=10&language=de")).then((function(n){return n.json()})).then((function(e){return e.filter((function(e){return!0===e.products[n.line.product]}))})).then((function(n){n.length>0&&n[0].name&&C(n[0].name)}));var o=r.location,c=e*a/180,u=e*o.latitude/180,l=e*(i-o.longitude)/180,d=Math.sin(c)*Math.sin(u)+Math.cos(c)*Math.cos(u)*Math.cos(l);return 60*(180*Math.acos(d)/e)*1.1515}return null}(n.dep);((0,a.useEffect)((function(){fetch("https://vbb-rest.vercel.app/trips/".concat(n.dep.tripId,"?language=de")).then((function(n){return n.json()})).then((function(n){return P(n.trip)}))}),[]),"number"===typeof(e=n.dep.cancelled?v(n.dep.delay,n.dep.cancelled):v(n.dep.delay,!1)))?t="".concat(e<0?"\u2013":e>0?"+":"\xb1").concat(e):t=e;var T,X=Z(n.dep.when);null!=n.dep.when&&null!=n.dep.delay?T=y(X,Number(e)):null!=n.dep.when&&"?"===e?(T=X,X=""):T=Z(n.dep.formerScheduledWhen)||Z(n.dep.scheduledWhen)||Z(n.dep.plannedWhen);var A=n.dep,I=A.line,W=A.direction,S=A.remarks,j=A.platform,F=A.plannedPlatform,D=A.prognosedPlatform;return(0,o.BX)(a.Fragment,{children:[(0,o.BX)("div",{className:"row",sx:{display:"grid",gridTemplateColumns:["repeat(24,1fr)","repeat(24,1fr)","repeat(26,1fr)"]},children:[(0,o.tZ)(l,{time:T,class:"plantime"}),(0,o.tZ)(l,{time:X,class:"realtime"}),(0,o.tZ)("div",{className:"delay",sx:{textAlign:["center","center","right"],gridColumn:["17 / span 8","5 / span 2"]},children:t}),(0,o.tZ)(d,{line:I}),(0,o.tZ)(s,{line:I}),(0,o.tZ)("div",{className:"direction",sx:{textAlign:"left",gridColumn:["8 / span 13","11 / span 8"]},children:W}),(0,o.tZ)("div",{className:"platform",sx:{textAlign:"center",gridColumn:["22 / span 3","19 / span 2"]},children:j||F||D}),(0,o.tZ)(p,{remarks:S}),(0,o.tZ)(f,{remarks:S}),(0,o.tZ)(h,{remarks:S}),(0,o.tZ)(m,{remarks:S}),(0,o.tZ)(c,{operator:I.operator})]},n.dep.tripId),(0,o.BX)("div",{className:"row row-add",sx:{display:"grid",gridTemplateColumns:"repeat(24, 1fr)",borderBottom:["1px solid #ccc","1px solid #ccc","none"]},children:[z&&B&&(0,o.tZ)(i.r,{position:z,distance:B}),N&&(0,o.tZ)(u,{trip:N,stopId:n.dep.stop.id,mode:"dep"}),(0,o.tZ)(b,{remarks:S}),(0,o.tZ)(g,{remarks:S})]},"add:".concat(n.dep.tripId))]})}},4373:function(n,e,t){t.d(e,{r:function(){return a}});var r=t(9922);function a(n){var e=n.position,t=n.distance;return e&&t?(0,r.BX)("div",{sx:{gridColumn:"1 / 25"},children:[navigator.language.startsWith("de")?"Aktuelle Position: ":"Current Position: ",(0,r.tZ)("span",{children:e})," ","(",t.toFixed(3)," km)"]}):(0,r.tZ)("div",{})}}}]);
//# sourceMappingURL=207.2c9b2bec.chunk.js.map