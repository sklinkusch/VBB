"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[964],{4157:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(2791),a=n(9922);function s(e){var t=e.left,n=e.right;return(0,a.BX)(r.Fragment,{children:[(0,a.tZ)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:t}),(0,a.tZ)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:n})]})}},964:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(2791),a=n(4157),s=n(9930),c=n(9922);function i(){return(0,c.BX)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,c.tZ)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,s.Z)("legend")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("scheduled"),right:(0,s.Z)("scheduledDesc")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("real"),right:(0,s.Z)("realDesc")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("delay"),right:(0,s.Z)("delayDesc")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("line"),right:(0,s.Z)("lineDesc")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("direction"),right:(0,s.Z)("directionDesc")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-wheelchair"}),right:(0,s.Z)("barrierfree")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-bicycle"}),right:(0,s.Z)("bike")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-exclamation-triangle"}),right:(0,s.Z)("attention")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-times"}),right:(0,s.Z)("cancelled")})]})}var o=n(3433),u=n(4165),l=n(5861),d=n(9439),p=n(7689),f=n(5918),h=n(1243),g=n(2530),Z=n(4307),b=n(6313),v=n(3090),m=n(953),x=n(1036),y=n(1029);function k(){var e=(0,f.Rh)("selection",[]),t=(0,d.Z)(e,2),n=t[0],a=t[1],s=(0,f.Rh)("filterSelection",[]),i=(0,d.Z)(s,2),k=i[0],S=i[1],w=(0,f.Rh)("stop",{id:"",name:"",type:""}),R=(0,d.Z)(w,2),D=R[0],B=R[1],N=(0,f.Rh)("filterStop",{id:"0",name:"\u2e3a",type:""}),j=(0,d.Z)(N,2),C=j[0],W=j[1],A=(0,f.Rh)("data",[]),O=(0,d.Z)(A,2),z=O[0],X=O[1],E=(0,f.Rh)("date",""),F=(0,d.Z)(E,2),H=F[0],P=F[1],T=(0,f.Rh)("error",null),q=(0,d.Z)(T,2),I=q[0],L=q[1],G=(0,f.Rh)("express",!0),U=(0,d.Z)(G,2),J=U[0],K=U[1],M=(0,f.Rh)("regional",!0),Q=(0,d.Z)(M,2),V=Q[0],Y=Q[1],$=(0,f.Rh)("suburban",!0),_=(0,d.Z)($,2),ee=_[0],te=_[1],ne=(0,f.Rh)("subway",!0),re=(0,d.Z)(ne,2),ae=re[0],se=re[1],ce=(0,f.Rh)("tram",!0),ie=(0,d.Z)(ce,2),oe=ie[0],ue=ie[1],le=(0,f.Rh)("bus",!0),de=(0,d.Z)(le,2),pe=de[0],fe=de[1],he=(0,f.Rh)("ferry",!0),ge=(0,d.Z)(he,2),Ze=ge[0],be=ge[1],ve=(0,p.UO)(),me=(0,p.s0)();(0,r.useEffect)((function(){function e(){return(e=(0,l.Z)((0,u.Z)().mark((function e(){var t,n,r,s,c,i,o,l,d,p,f,h,g,Z,b,v,m;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve.hasOwnProperty("id")||"string"!==typeof ve.id||9!==ve.id.length){e.next=26;break}return e.prev=1,t="https://vbb-rest.vercel.app/stops/".concat(ve.id,"?language=de"),e.next=5,fetch(t);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.next=11,r;case 11:s=e.sent,c=s.name,me("/departures/".concat(ve.id)),B(r),Re(ve.id,c,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(c):"Departures from ".concat(c),a([r]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.debug(e.t0);case 24:e.next=77;break;case 26:if(!ve.hasOwnProperty("id")||"string"!==typeof ve.id||12!==ve.id.length){e.next=53;break}return e.prev=27,i="".concat(ve.id.slice(0,1)).concat(ve.id.slice(-8)),o="https://vbb-rest.vercel.app/stops/".concat(i,"?language=de"),e.next=32,fetch(o);case 32:return l=e.sent,e.next=35,l.json();case 35:return d=e.sent,e.next=38,d;case 38:p=e.sent,f=p.name,me("/departures/".concat(i)),B(d),Re(i,f,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(f):"Departures from ".concat(f),a([d]),e.next=51;break;case 48:e.prev=48,e.t1=e.catch(27),console.debug(e.t1);case 51:e.next=77;break;case 53:return e.prev=53,g="https://vbb-rest.vercel.app/stops/".concat(h="900100011","?language=de"),e.next=58,fetch(g);case 58:return Z=e.sent,e.next=61,Z.json();case 61:return b=e.sent,e.next=64,b;case 64:v=e.sent,m=v.name,me("/departures/".concat(h)),B(b),Re(h,m,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(m):"Departures from ".concat(m),a([b]),e.next=77;break;case 74:e.prev=74,e.t2=e.catch(53),console.debug(e.t2);case 77:case"end":return e.stop()}}),e,null,[[1,21],[27,48],[53,74]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var xe=(0,r.useRef)(null),ye=(0,r.useRef)(null),ke=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t){var n,r,s,c,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,!(n.length>=3)){e.next=14;break}return r="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),e.next=6,fetch(r);case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,i=[D].concat((0,o.Z)(c)),a(i),e.next=15;break;case 14:a([D]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.debug(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t){var n,r,a,s,c,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,r={id:"0",name:"\u2e3a",type:""},!(n.length>=3)){e.next=15;break}return a="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),e.next=7,fetch(a);case 7:return s=e.sent,e.next=10,s.json();case 10:c=e.sent,i="0"!==C.id?[r,C].concat((0,o.Z)(c)):[r].concat((0,o.Z)(c)),S(i),e.next=16;break;case 15:"0"!==C.id?S([r,C]):S([r]);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.debug(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),we=function(e){return e.startsWith("Berlin")||e.includes("(Berlin)")||e.includes("Berlin Hauptbahnhof")?"BLN":"BBG"},Re=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t,n,r){var a,s,c,i,o,l,d,p,f,Z,b,v,m;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=we(n),s=(0,g.g)(a),c="de",i=navigator.language,c=i.startsWith("de")?"de":"en",o=r.direction?"0"!==r.direction?parseInt(r.direction,10):null:"0"!==C.id?parseInt(C.id,10):null,l="number"===typeof o?"&direction=".concat(o):"",d="https://vbb-rest.vercel.app/stops/".concat(t,"/departures?language=").concat(c,"&duration=").concat(s,"&express=").concat("boolean"===typeof r.express?r.express.toString():J.toString(),"&regional=").concat("boolean"===typeof r.regional?r.regional.toString():V.toString(),"&suburban=").concat("boolean"===typeof r.suburban?r.suburban.toString():ee.toString(),"&subway=").concat("boolean"===typeof r.subway?r.subway.toString():ae.toString(),"&tram=").concat("boolean"===typeof r.tram?r.tram.toString():oe.toString(),"&bus=").concat("boolean"===typeof r.bus?r.bus.toString():pe.toString(),"&ferry=").concat("boolean"===typeof r.ferry?r.ferry.toString():Ze.toString()).concat(l),e.next=11,h.Z.get(d);case 11:return p=e.sent,e.next=14,p;case 14:f=e.sent,Z=f.data,500===(b=f.status)||200!==b?(L("HTTP status code: ".concat(b)),X([])):(v=Z.departures,m=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),document.title="de"===c?"Abfahrten ab ".concat(n):"Departures from ".concat(n),P(m),X(v),L(null)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.debug(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,c.BX)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[xe&&(0,c.tZ)(Z.Z,{filterStops:ke,inputField:xe}),(0,c.tZ)(b.Z,{handleChange:function(e){B(e);var t=e.id,n=e.name;Re(t,n,{}),xe.current.value=""},selection:n,stop:D,mode:"dep"}),(0,c.tZ)(v.Z,{handleSubmit:function(){Re(D.id,D.name,{}),xe.current.value=""}}),(0,c.BX)("div",{children:[(0,c.tZ)("span",{sx:{display:"inline-block",mr:"0.2rem",fontStyle:"italic",fontWeight:700},children:"via"}),(0,c.tZ)(Z.Z,{filterStops:Se,inputField:ye}),(0,c.tZ)(m.Z,{handleChange:function(e){W(e),"0"!==e.id?Re(D.id,D.name,{direction:e.id}):Re(D.id,D.name,{}),ye.current.value=""},selection:k,stop:C})]}),(0,c.tZ)(x.Z,{products:[J,V,ee,ae,oe,pe,Ze],productSetters:[K,Y,te,se,ue,fe,be],getData:function(e){return Re(D.id,D.name,e)}}),(0,c.tZ)(y.Z,{stop:D,data:z,error:I,date:H,mode:"dep"})]})}var S=n(184);var w=function(){return(0,S.jsxs)("div",{children:[(0,S.jsx)(i,{}),(0,S.jsx)(k,{})]})}}}]);
//# sourceMappingURL=964.2a5e9798.chunk.js.map