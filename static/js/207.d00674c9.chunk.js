"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[207],{9207:function(e,n,t){t.r(n),t.d(n,{getDelay:function(){return g},getPlanTime:function(){return v},getTime:function(){return y}});var r=t(9439),a=t(2791),i=t(4373),l=t(8705),c=t(9922),o=(0,a.lazy)((function(){return t.e(272).then(t.bind(t,5272))})),u=(0,a.lazy)((function(){return t.e(48).then(t.bind(t,1048))})),d=(0,a.lazy)((function(){return Promise.resolve().then(t.bind(t,6049))})),s=(0,a.lazy)((function(){return t.e(302).then(t.bind(t,6302))})),p=(0,a.lazy)((function(){return t.e(734).then(t.bind(t,734))})),h=(0,a.lazy)((function(){return t.e(619).then(t.bind(t,619))})),f=(0,a.lazy)((function(){return t.e(776).then(t.bind(t,7776))})),m=(0,a.lazy)((function(){return t.e(558).then(t.bind(t,4558))})),b=(0,a.lazy)((function(){return t.e(525).then(t.bind(t,1525))})),g=function(e,n){if(null!=e){var t=Math.abs(e/60);return Math.round(t)}return n?"X":"?"},v=function(e,n){var t=Number(e.substring(0,2)),r=Number(e.substring(3,5));(r-=n)<0&&(r+=60,t-=1),r>59&&(r-=60,t+=1),t<0&&(t+=24),t>23&&(t-=24);var a=t<10?"0".concat(t):"".concat(t),i=r<10?"0".concat(r):"".concat(r);return"".concat(a,":").concat(i)},y=function(e){return null!=e?e.substring(11,16):""};n.default=function(e){var n,t,Z=(0,a.useState)(null),k=(0,r.Z)(Z,2),x=k[0],z=k[1],M=function(e){var n=4*Math.atan(1),t=e.currentTripPosition,r=e.stop;if(t){var a=t.latitude,i=t.longitude;fetch("https://vbb-rest.vercel.app/locations/nearby?latitude=".concat(a,"&longitude=").concat(i,"&results=10&language=de")).then((function(e){return e.json()})).then((function(n){return n.filter((function(n){return!0===n.products[e.line.product]}))})).then((function(e){e.length>0&&e[0].name&&z(e[0].name)}));var l=r.location,c=n*a/180,o=n*l.latitude/180,u=n*(i-l.longitude)/180,d=Math.sin(c)*Math.sin(o)+Math.cos(c)*Math.cos(o)*Math.cos(u);return 60*(180*Math.acos(d)/n)*1.1515}return null}(e.dep);"number"===typeof(n=e.dep.cancelled?g(e.dep.delay,e.dep.cancelled):g(e.dep.delay,!1))?t="".concat(n<0?"\u2013":n>0?"+":"\xb1").concat(n):t=n;var w,N=y(e.dep.when);null!=e.dep.when&&null!=e.dep.delay?w=v(N,Number(n)):null!=e.dep.when&&"?"===n?(w=N,N=""):w=y(e.dep.formerScheduledWhen)||y(e.dep.scheduledWhen)||y(e.dep.plannedWhen);var C=e.dep,P=C.line,T=C.direction,B=C.remarks,X=C.platform,A=C.plannedPlatform,W=C.prognosedPlatform;return(0,c.BX)(a.Fragment,{children:[(0,c.BX)("div",{className:"row",sx:{display:"grid",gridTemplateColumns:["repeat(24,1fr)","repeat(24,1fr)","repeat(26,1fr)"]},children:[(0,c.tZ)(o,{time:w,class:"plantime"}),(0,c.tZ)(o,{time:N,class:"realtime"}),(0,c.tZ)("div",{className:"delay",sx:{textAlign:["center","center","right"],gridColumn:["17 / span 8","5 / span 2"]},children:t}),(0,c.tZ)(u,{line:P}),(0,c.tZ)(d,{line:P}),(0,c.tZ)("div",{className:"direction",sx:{textAlign:"left",gridColumn:["8 / span 13","11 / span 8"]},children:T}),(0,c.tZ)("div",{className:"platform",sx:{textAlign:"center",gridColumn:["22 / span 3","19 / span 2"]},children:X||A||W}),(0,c.tZ)(s,{remarks:B}),(0,c.tZ)(p,{remarks:B}),(0,c.tZ)(h,{remarks:B}),(0,c.tZ)(f,{remarks:B}),(0,c.tZ)(l.Z,{operator:P.operator})]},e.dep.tripId),(0,c.BX)("div",{className:"row row-add",sx:{display:"grid",gridTemplateColumns:"repeat(24, 1fr)",borderBottom:["1px solid #ccc","1px solid #ccc","none"]},children:[x&&M&&(0,c.tZ)(i.r,{position:x,distance:M}),(0,c.tZ)(m,{remarks:B}),(0,c.tZ)(b,{remarks:B})]},"add:".concat(e.dep.tripId))]})}}}]);
//# sourceMappingURL=207.d00674c9.chunk.js.map