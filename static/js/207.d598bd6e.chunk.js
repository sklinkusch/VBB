"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[207],{9207:function(e,n,t){t.r(n),t.d(n,{getDelay:function(){return v},getPlanTime:function(){return y},getTime:function(){return Z}});var r=t(9439),a=t(2791),i=t(4373),o=t(9922),c=(0,a.lazy)((function(){return t.e(599).then(t.bind(t,8705))})),d=(0,a.lazy)((function(){return t.e(305).then(t.bind(t,6305))})),u=(0,a.lazy)((function(){return t.e(272).then(t.bind(t,5272))})),l=(0,a.lazy)((function(){return t.e(48).then(t.bind(t,1048))})),s=(0,a.lazy)((function(){return Promise.resolve().then(t.bind(t,6049))})),p=(0,a.lazy)((function(){return t.e(302).then(t.bind(t,6302))})),f=(0,a.lazy)((function(){return t.e(734).then(t.bind(t,734))})),h=(0,a.lazy)((function(){return t.e(619).then(t.bind(t,619))})),m=(0,a.lazy)((function(){return t.e(776).then(t.bind(t,7776))})),b=(0,a.lazy)((function(){return t.e(558).then(t.bind(t,4558))})),g=(0,a.lazy)((function(){return t.e(525).then(t.bind(t,1525))})),v=function(e,n){if(null!=e){var t=Math.abs(e/60);return Math.round(t)}return n?"X":"?"},y=function(e,n,t){var r=Number(e.substring(0,2)),a=Number(e.substring(3,5));(a="+"===t?a-n:"\u2013"===t?a+n:a)<0&&(a+=60,r-=1),a>59&&(a-=60,r+=1),r<0&&(r+=24),r>23&&(r-=24);var i=r<10?"0".concat(r):"".concat(r),o=a<10?"0".concat(a):"".concat(a);return"".concat(i,":").concat(o)},Z=function(e){return null!=e?e.substring(11,16):""};n.default=function(e){var n=(0,a.useState)(null),t=(0,r.Z)(n,2),k=t[0],x=t[1],z=(0,a.useState)(void 0),C=(0,r.Z)(z,2),M=C[0],w=C[1],N=(0,a.useState)(null),P=(0,r.Z)(N,2),B=P[0],T=P[1];(0,a.useEffect)((function(){!function(){var n=4*Math.atan(1),t=e.dep,r=t.currentTripPosition,a=t.stop;if(r){var i=r.latitude,o=r.longitude;fetch("https://vbb-rest.vercel.app/locations/nearby?latitude=".concat(i,"&longitude=").concat(o,"&results=1&language=de")).then((function(e){return e.json()})).then((function(e){e.length>0&&e[0].name&&x(e[0])})).catch((function(e){return console.debug(e)}));var c=a.location,d=n*i/180,u=n*c.latitude/180,l=n*(o-c.longitude)/180,s=Math.sin(d)*Math.sin(u)+Math.cos(d)*Math.cos(u)*Math.cos(l),p=Math.acos(s);T(60*(180*p/n)*1.1515)}}()}),[]),(0,a.useEffect)((function(){fetch("https://vbb-rest.vercel.app/trips/".concat(e.dep.tripId,"?language=de")).then((function(e){return e.json()})).then((function(e){return w(e.trip)})).catch((function(e){return console.debug(e)}))}),[]);var X,A,I=e.dep.cancelled?v(e.dep.delay,e.dep.cancelled):v(e.dep.delay,!1);"number"===typeof e.dep.delay&&"number"===typeof I?(A=e.dep.delay<0?"\u2013":e.dep.delay>0?"+":"\xb1",X="".concat(A).concat(I)):(X=I,A="\xb1");var S,W=Z(e.dep.when);null!=e.dep.when&&null!=e.dep.delay?S=y(W,Number(I),A):null!=e.dep.when&&"?"===I?(S=W,W=""):S=Z(e.dep.formerScheduledWhen)||Z(e.dep.scheduledWhen)||Z(e.dep.plannedWhen);var j=e.dep,E=j.line,F=j.direction,D=j.remarks,q=j.platform,G=j.plannedPlatform,H=j.prognosedPlatform;return(0,o.BX)(a.Fragment,{children:[(0,o.BX)("div",{className:"row",sx:{display:"grid",gridTemplateColumns:["repeat(24,1fr)","repeat(24,1fr)","repeat(26,1fr)"]},children:[(0,o.tZ)(u,{time:S,class:"plantime"}),(0,o.tZ)(u,{time:W,class:"realtime"}),(0,o.tZ)("div",{className:"delay",sx:{textAlign:["center","center","right"],gridColumn:["17 / span 8","5 / span 2"]},children:X}),(0,o.tZ)(l,{line:E}),(0,o.tZ)(s,{line:E}),(0,o.tZ)("div",{className:"direction",sx:{textAlign:"left",gridColumn:["8 / span 13","11 / span 8"]},children:F}),(0,o.tZ)("div",{className:"platform",sx:{textAlign:"center",gridColumn:["22 / span 3","19 / span 2"]},children:q||G||H}),(0,o.tZ)(p,{remarks:D}),(0,o.tZ)(f,{remarks:D}),(0,o.tZ)(h,{remarks:D}),(0,o.tZ)(m,{remarks:D}),E.operator?(0,o.tZ)(c,{operator:E.operator}):(0,o.tZ)("div",{})]},e.dep.tripId),(0,o.BX)("div",{className:"row row-add",sx:{display:"grid",gridTemplateColumns:"repeat(24, 1fr)",borderBottom:["1px solid #ccc","1px solid #ccc","none"]},children:[k&&B&&(0,o.tZ)(i.r,{position:k,distance:B}),M&&(0,o.tZ)(d,{trip:M,stopId:e.dep.stop.id,mode:"dep"}),(0,o.tZ)(b,{remarks:D}),(0,o.tZ)(g,{remarks:D})]},"add:".concat(e.dep.tripId))]})}},4373:function(e,n,t){t.d(n,{r:function(){return a}});var r=t(9922);function a(e){var n=e.position,t=e.distance;return n&&t?(0,r.BX)("div",{sx:{gridColumn:"1 / 25"},children:[navigator.language.startsWith("de")?"Aktuelle Position: ":"Current Position: ",(0,r.tZ)("span",{children:n.name})," ","(",t.toFixed(3)," km)"]}):(0,r.tZ)("div",{})}}}]);
//# sourceMappingURL=207.d598bd6e.chunk.js.map