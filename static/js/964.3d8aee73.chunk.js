"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[964,307,313,90,953],{3090:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(2791),a=n(9922);function i(e){var t=e.handleSubmit;return(0,a.tZ)(r.Fragment,{children:(0,a.tZ)("button",{onClick:t,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1},children:(0,a.tZ)("i",{className:"fas fa-redo-alt"})})})}},953:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});n(2791);var r=n(9930),a=n(9922);function i(e){var t=e.filterField,n=e.filterSelector,i=e.filterData,c=e.mode,o=void 0===c?"dep":c;return(0,a.BX)("div",{children:[(0,a.tZ)("input",{type:"text",placeholder:"dep"===o?(0,r.Z)("filterDepartures"):(0,r.Z)("filterArrivals"),ref:t,onChange:function(t){return e.filterData(t)},sx:{padding:"5px",opacity:1,backgroundColor:"#fff",width:"300px",maxWidth:"90%"}}),(0,a.BX)("select",{ref:n,onChange:i,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1,width:"400px",maxWidth:"90%",mx:"10px"},children:[(0,a.tZ)("option",{value:"OR",children:(0,r.Z)("filterOr")}),(0,a.tZ)("option",{value:"AND",children:(0,r.Z)("filterAnd")})]})]})}},4307:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(2791),a=n(9930),i=n(9922);function c(e){var t=e.filterStops,n=e.inputField;return(0,i.tZ)(r.Fragment,{children:(0,i.tZ)("input",{type:"text",onChange:function(e){return t(e)},ref:n,placeholder:(0,a.Z)("filterStops"),sx:{padding:"5px",opacity:1,backgroundColor:"#fff",width:"300px",maxWidth:"90%"}})})}},4157:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(2791),a=n(9922);function i(e){var t=e.left,n=e.right;return(0,a.BX)(r.Fragment,{children:[(0,a.tZ)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:t}),(0,a.tZ)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:n})]})}},6313:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(2791),a=n(7689),i=n(9922);function c(e){var t=e.handleChange,n=e.selection,c=e.stop,o=e.mode,s=(0,a.s0)();return(0,i.tZ)(r.Fragment,{children:(0,i.tZ)("select",{value:c.id,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1,width:"400px",maxWidth:"90%",mx:"10px"},onChange:function(e){var r=e.target.value,a=n.filter((function(e){return e.id===r}))[0];return t(a)},children:n&&n.length>=1&&n.map((function(e,t){return(0,i.tZ)("option",{onClick:function(){return s("arr"===o?"/arrivals/".concat(e.id):"/departures/".concat(e.id))},value:e.id,children:e.name},"".concat(e.id,"-").concat(t))}))})})}},964:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(2791),a=n(4157),i=n(9930),c=n(9922);function o(){return(0,c.BX)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,c.tZ)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,i.Z)("legend")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("scheduled"),right:(0,i.Z)("scheduledDesc")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("real"),right:(0,i.Z)("realDesc")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("delay"),right:(0,i.Z)("delayDesc")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("line"),right:(0,i.Z)("lineDesc")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("direction"),right:(0,i.Z)("directionDesc")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-wheelchair"}),right:(0,i.Z)("barrierfree")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-bicycle"}),right:(0,i.Z)("bike")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-exclamation-triangle"}),right:(0,i.Z)("attention")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-times"}),right:(0,i.Z)("cancelled")})]})}var s=n(3433),u=n(4165),l=n(5861),d=n(9439),f=n(7689),p=n(5918),h=n(1243),g=n(2530),Z=n(4307),v=n(6313),b=n(3090),x=n(953),m=n(1036),y=n(1029);function w(){var e=(0,p.Rh)("selection",[]),t=(0,d.Z)(e,2),n=t[0],a=t[1],i=(0,p.Rh)("stop",{id:"",name:"",type:""}),o=(0,d.Z)(i,2),w=o[0],k=o[1],C=(0,p.Rh)("data",[]),S=(0,d.Z)(C,2),R=S[0],D=S[1],B=(0,p.Rh)("date",""),j=(0,d.Z)(B,2),N=j[0],L=j[1],O=(0,p.Rh)("viewData",[]),W=(0,d.Z)(O,2),A=W[0],F=W[1],P=(0,p.Rh)("error",null),X=(0,d.Z)(P,2),E=X[0],H=X[1],T=(0,p.Rh)("express",!0),G=(0,d.Z)(T,2),U=G[0],q=G[1],z=(0,p.Rh)("regional",!0),I=(0,d.Z)(z,2),J=I[0],K=I[1],M=(0,p.Rh)("suburban",!0),Q=(0,d.Z)(M,2),V=Q[0],Y=Q[1],$=(0,p.Rh)("subway",!0),_=(0,d.Z)($,2),ee=_[0],te=_[1],ne=(0,p.Rh)("tram",!0),re=(0,d.Z)(ne,2),ae=re[0],ie=re[1],ce=(0,p.Rh)("bus",!0),oe=(0,d.Z)(ce,2),se=oe[0],ue=oe[1],le=(0,p.Rh)("ferry",!0),de=(0,d.Z)(le,2),fe=de[0],pe=de[1],he=(0,f.UO)(),ge=(0,f.s0)();(0,r.useEffect)((function(){function e(){return(e=(0,l.Z)((0,u.Z)().mark((function e(){var t,n,r,i,c,o,s,l,d,f,p,h,g,Z;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!he.hasOwnProperty("id")||"string"!==typeof he.id||9!==he.id.length){e.next=25;break}return e.prev=1,e.next=4,fetch("https://station-api-jade.vercel.app/?id=".concat(he.id));case 4:return t=e.sent,e.next=7,t.json();case 7:return n=e.sent,e.next=10,n;case 10:r=e.sent,i=r.name,ge("/departures/".concat(he.id)),k(n),Ce(he.id,i,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(i):"Departures from ".concat(i),a([n]),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.debug(e.t0);case 23:e.next=74;break;case 25:if(!he.hasOwnProperty("id")||"string"!==typeof he.id||12!==he.id.length){e.next=51;break}return e.prev=26,c="".concat(he.id.slice(0,1)).concat(he.id.slice(-8)),e.next=30,fetch("https://station-api-jade.vercel.app/?id=".concat(c));case 30:return o=e.sent,e.next=33,o.json();case 33:return s=e.sent,e.next=36,s;case 36:l=e.sent,d=l.name,ge("/departures/".concat(c)),k(s),Ce(c,d,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(d):"Departures from ".concat(d),a([s]),e.next=49;break;case 46:e.prev=46,e.t1=e.catch(26),console.debug(e.t1);case 49:e.next=74;break;case 51:return e.prev=51,f="900100011",e.next=55,fetch("https://station-api-jade.vercel.app/?id=".concat(f));case 55:return p=e.sent,e.next=58,p.json();case 58:return h=e.sent,e.next=61,h;case 61:g=e.sent,Z=g.name,ge("/departures/".concat(f)),k(h),Ce(f,Z,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(Z):"Departures from ".concat(Z),a([h]),e.next=74;break;case 71:e.prev=71,e.t2=e.catch(51),console.debug(e.t2);case 74:case"end":return e.stop()}}),e,null,[[1,20],[26,46],[51,71]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var Ze=(0,r.useRef)(null),ve=(0,r.useRef)(null),be=(0,r.useRef)(null),xe=function(e){var t=R.filter((function(t){var n=!1;if(t.hasOwnProperty("direction")&&t.direction)for(var r=0;r<e.length;r++)if(t.line.name.toLowerCase().includes(e[r].toLowerCase())||t.direction.toLowerCase().includes(e[r].toLowerCase())){n=!0;break}return n}));F(t)},me=function(e){var t=R.filter((function(t){var n=!0;if(t.hasOwnProperty("direction")&&t.direction)for(var r=0;r<e.length;r++)if(!t.line.name.toLowerCase().includes(e[r].toLowerCase())&&!t.direction.toLowerCase().includes(e[r].toLowerCase())){n=!1;break}return n}));F(t)},ye=function(){F(R)},we=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t){var n,r,i,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,!(n.length>4)){e.next=13;break}return e.next=5,fetch("https://station-api-jade.vercel.app/?station=".concat(n));case 5:return r=e.sent,e.next=8,r.json();case 8:i=e.sent,c=[w].concat((0,s.Z)(i)),a(c),e.next=14;break;case 13:a([w]);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.debug(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(e){return e.startsWith("Berlin")||e.includes("(Berlin)")||e.includes("Berlin Hauptbahnhof")?"BLN":"BBG"},Ce=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t,n,r){var a,i,c,o,s,l,d,f,p,Z,v;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=ke(n),i=(0,g.g)(a),c="de",o=navigator.language,c=o.startsWith("de")?"de":"en",s="https://vbb-rest.vercel.app/stops/".concat(t,"/departures?language=").concat(c,"&duration=").concat(i,"&express=").concat("boolean"===typeof r.express?r.express.toString():U.toString(),"&regional=").concat("boolean"===typeof r.regional?r.regional.toString():J.toString(),"&suburban=").concat("boolean"===typeof r.suburban?r.suburban.toString():V.toString(),"&subway=").concat("boolean"===typeof r.subway?r.subway.toString():ee.toString(),"&tram=").concat("boolean"===typeof r.tram?r.tram.toString():ae.toString(),"&bus=").concat("boolean"===typeof r.bus?r.bus.toString():se.toString(),"&ferry=").concat("boolean"===typeof r.ferry?r.ferry.toString():fe.toString()),e.next=9,h.Z.get(s);case 9:return l=e.sent,e.next=12,l;case 12:d=e.sent,f=d.data,500===(p=d.status)||200!==p?(H("HTTP status code: ".concat(p)),D([])):(Z=f.departures,v=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),document.title="de"===c?"Abfahrten ab ".concat(n):"Departures from ".concat(n),L(v),D(Z),F(Z),H(null)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.debug(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,c.BX)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[Ze&&(0,c.tZ)(Z.default,{filterStops:we,inputField:Ze}),(0,c.tZ)(v.default,{handleChange:function(e){k(e);var t=e.id,n=e.name;Ce(t,n,{}),Ze.current.value="",ve.current.value="",be.current.value="OR"},selection:n,stop:w,mode:"dep"}),(0,c.tZ)(b.default,{handleSubmit:function(){Ce(w.id,w.name,{}),Ze.current.value="",ve.current.value="",be.current.value="OR"}}),(0,c.tZ)(x.default,{filterField:ve,filterSelector:be,filterData:function(){var e=ve.current.value.split(" "),t=be.current.value;e.length>0?"OR"===t?xe(e):me(e):ye()},mode:"dep"}),(0,c.tZ)(m.Z,{products:[U,J,V,ee,ae,se,fe],productSetters:[q,K,Y,te,ie,ue,pe],getData:function(e){return Ce(w.id,w.name,e)}}),(0,c.tZ)(y.default,{stop:w,data:A,error:E,date:N,mode:"dep"})]})}var k=n(184);var C=function(){return(0,k.jsxs)("div",{children:[(0,k.jsx)(o,{}),(0,k.jsx)(w,{})]})}}}]);
//# sourceMappingURL=964.3d8aee73.chunk.js.map