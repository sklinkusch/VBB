"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[522],{7522:function(n,r,e){e.r(r),e.d(r,{getDelay:function(){return g},getPlanTime:function(){return v},getTime:function(){return y}});var t=e(9439),a=e(2791),i=e(4373),c=e(8705),l=e(9922),u=(0,a.lazy)((function(){return e.e(272).then(e.bind(e,5272))})),o=(0,a.lazy)((function(){return e.e(48).then(e.bind(e,1048))})),s=(0,a.lazy)((function(){return Promise.resolve().then(e.bind(e,6049))})),d=(0,a.lazy)((function(){return e.e(302).then(e.bind(e,6302))})),h=(0,a.lazy)((function(){return e.e(734).then(e.bind(e,734))})),f=(0,a.lazy)((function(){return e.e(619).then(e.bind(e,619))})),m=(0,a.lazy)((function(){return e.e(776).then(e.bind(e,7776))})),p=(0,a.lazy)((function(){return e.e(558).then(e.bind(e,4558))})),b=(0,a.lazy)((function(){return e.e(525).then(e.bind(e,1525))})),g=function(n,r){if(null!=n){var e=Math.abs(n/60);return Math.round(e)}return r?"X":"?"},v=function(n,r){var e=Number(n.substring(0,2)),t=Number(n.substring(3,5));(t-=r)<0&&(t+=60,e-=1),t>59&&(t-=60,e+=1),e<0&&(e+=24),e>23&&(e-=24);var a=e<10?"0".concat(e):"".concat(e),i=t<10?"0".concat(t):"".concat(t);return"".concat(a,":").concat(i)},y=function(n){return null!=n?n.substring(11,16):""};r.default=function(n){var r,e,Z=(0,a.useState)(null),k=(0,t.Z)(Z,2),x=k[0],z=k[1],M=function(n){var r=4*Math.atan(1),e=n.currentTripPosition,t=n.stop;if(e){var a=e.latitude,i=e.longitude;fetch("https://vbb-rest.vercel.app/locations/nearby?latitude=".concat(a,"&longitude=").concat(i,"&results=10&language=de")).then((function(n){return n.json()})).then((function(r){return r.filter((function(r){return!0===r.products[n.line.product]}))})).then((function(n){n.length>0&&n[0].name&&z(n[0].name)}));var c=t.location,l=r*a/180,u=r*c.latitude/180,o=r*(i-c.longitude)/180,s=Math.sin(l)*Math.sin(u)+Math.cos(l)*Math.cos(u)*Math.cos(o);return 60*(180*Math.acos(s)/r)*1.1515}return null}(n.arr);"number"===typeof(r=n.arr.cancelled?g(n.arr.delay,n.arr.cancelled):g(n.arr.delay,!1))?e="".concat(r<0?"\u2013":r>0?"+":"\xb1").concat(r):e=r;var w,N=y(n.arr.when);null!=n.arr.when&&null!=n.arr.delay?w=v(N,Number(r)):null!=n.arr.when&&"?"===r?(w=N,N=""):w=y(n.arr.formerScheduledWhen)||y(n.arr.scheduledWhen)||y(n.arr.plannedWhen);var C=n.arr,T=C.line,B=C.provenance,X=C.remarks,A=C.platform;return(0,l.BX)(a.Fragment,{children:[(0,l.BX)("div",{className:"row",sx:{display:"grid",gridTemplateColumns:["repeat(24,1fr)","repeat(24,1fr)","repeat(26,1fr)"]},children:[(0,l.tZ)(u,{time:w,class:"plantime"}),(0,l.tZ)(u,{time:N,class:"realtime"}),(0,l.tZ)("div",{className:"delay",sx:{textAlign:["center","center","right"],gridColumn:["17 / span 8","5 / span 2"]},children:e}),(0,l.tZ)(o,{line:T}),(0,l.tZ)(s,{line:T}),(0,l.tZ)("div",{className:"direction",sx:{textAlign:"left",gridColumn:["8 / span 13","11 / span 8"]},children:B}),(0,l.tZ)("div",{className:"platform",sx:{textAlign:"center",gridColumn:["22 / span 3","19 / span 2"]},children:A}),(0,l.tZ)(d,{remarks:X}),(0,l.tZ)(h,{remarks:X}),(0,l.tZ)(f,{remarks:X}),(0,l.tZ)(m,{remarks:X}),(0,l.tZ)(c.Z,{operator:T.operator})]},n.arr.tripId),(0,l.BX)("div",{className:"row row-add",sx:{display:"grid",gridTemplateColumns:"repeat(24, 1fr)",borderBottom:["1px solid #ccc","1px solid #ccc","none"]},children:[x&&M&&(0,l.tZ)(i.r,{position:x,distance:M}),(0,l.tZ)(p,{remarks:X}),(0,l.tZ)(b,{remarks:X})]},"add:".concat(n.arr.tripId))]})}}}]);
//# sourceMappingURL=522.94fef57d.chunk.js.map