{"version":3,"file":"static/js/824.f5976d5d.chunk.js","mappings":"qIAyJA,QA/CA,SAAaA,GAAiC,IAAhC,KAAEC,EAAI,OAAEC,EAAM,KAAEC,GAAaH,EACzC,MAAMI,EAAiBH,EAAKI,UAAUC,MAAKC,GAAYA,EAASC,KAAKC,KAAOP,IACtEQ,EAAkBN,EAAiBH,EAAKI,UAAUM,QAAQP,IAAmB,EAC7EQ,EAAWC,GACRA,EAAUC,MAAM,KAAK,GAAGC,UAAU,EAAE,GAEvCC,EAAYC,IAChB,MAAMC,EAAeC,KAAKC,MAAMH,EAAQ,IACxC,OAAqB,IAAjBC,EACK,QAELD,EAAQ,EACJ,IAANI,OAAWF,KAAKG,IAAIJ,IAEhB,IAANG,OAAWF,KAAKG,IAAIJ,GAAa,EAE7BK,EAAYN,GACF,IAAVA,EACK,OAELA,EAAQ,EACH,QAEF,MAET,OACEO,EAAAA,EAAAA,GAAA,OAAKC,GAAI,CAAEC,WAAY,cAAeC,SAAU,SAAUC,UAAW,OAAQC,QAAS,QAAUC,KAAK,KAAIC,SACtG9B,EAAKI,WAAaJ,EAAKI,UAAU2B,OAAS,GAAK/B,EAAKI,UAAU4B,KAAI,CAACzB,EAAM0B,KACxE,MAAMC,EAAc3B,EAAK4B,UAAY,CAAEC,mBAAoB,gBAAmB,CAAC,EACzEC,EAAgBJ,IAAQxB,EAAkB,CAAE6B,WAAY,KAAQ,CAAC,EACvE,OACEC,EAAAA,EAAAA,IAAA,QAAAT,SAAA,EACEP,EAAAA,EAAAA,GAAA,QAAMC,GAAI,IAAKU,KAAgBG,GAAgBP,SAC5CvB,EAAKA,KAAKiC,OAEZP,GAAOxB,IAAoBF,EAAKkC,kBAAmBlB,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEkB,GAAI,WAAYR,KAAgBG,GAAgBP,SAAEnB,EAAQJ,EAAKkC,oBAA4BlC,EAAKoC,iBAAmBpB,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEkB,GAAI,WAAYR,KAAgBG,GAAgBP,SAAEnB,EAAQJ,EAAKoC,mBAC7PV,EAAMxB,IAAoBF,EAAKoC,gBAAiBpB,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEkB,GAAI,WAAYR,GAAcJ,SAAEnB,EAAQJ,EAAKoC,kBAA0BpC,EAAKkC,mBAAqBlB,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEkB,GAAI,WAAYR,GAAcJ,SAAEnB,EAAQJ,EAAKkC,qBACtNR,GAAOxB,IAAmD,kBAAxBF,EAAKqC,gBAAgCrC,EAAK4B,UAAuK,kBAAtB5B,EAAKsC,eAA8BtC,EAAK4B,YAAcZ,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEsB,GAAI,WAAYT,EAAeU,MAAOzB,EAASf,EAAKsC,eAAgBf,SAAEf,EAASR,EAAKsC,iBAA1RtB,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEsB,GAAI,WAAYT,EAAeU,MAAOzB,EAASf,EAAKqC,iBAAkBd,SAAEf,EAASR,EAAKqC,mBAC3LX,EAAMxB,IAAiD,kBAAtBF,EAAKsC,cAA8BtC,EAAK4B,UAAmJ,kBAAxB5B,EAAKqC,iBAAgCrC,EAAK4B,YAAcZ,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEsB,GAAI,QAASC,MAAOzB,EAASf,EAAKqC,iBAAkBd,SAAEf,EAASR,EAAKqC,mBAAtPrB,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEsB,GAAI,QAASC,MAAOzB,EAASf,EAAKsC,eAAgBf,SAAEf,EAASR,EAAKsC,iBACpKZ,IAAQjC,EAAKI,UAAU2B,OAAS,IAAKR,EAAAA,EAAAA,GAAA,QAAMC,GAAI,CAAEsB,GAAI,SAAUhB,SAAC,aAAQ,GAAAV,OAR7Da,EAAG,KAAAb,OAAIb,EAAKA,KAAKiC,MASxB,KAKjB,C","sources":["components/Trip/Trip.tsx"],"sourcesContent":["/** @jsxImportSource theme-ui */\n\ntype Loc = {\n  type: string\n  id?: string\n  latitude: string \n  longitude: string\n}\n\ntype Prod = {\n  suburban: boolean\n  subway: boolean\n  tram: boolean\n  bus: boolean\n  ferry: boolean\n  express: boolean\n  regional: boolean\n}\n\ntype OrigDest = {\n  type: string\n  id: string\n  name: string\n  location: Loc\n  products: Prod\n  stationDHID: string\n}\n\ntype Operator = {\n  type: string\n  id: string\n  name: string\n}\n\ntype Color = {\n  fg: string\n  bg: string\n}\n\ntype Line = {\n  type: string\n  id: string\n  fahrtNr: string\n  name: string\n  public: boolean\n  adminCode: string\n  productName: string\n  mode: string\n  product: string\n  operator: Operator\n  color: Color\n}\n\ntype Stopover = {\n  stop: OrigDest\n  cancelled?: boolean\n  arrival: string | null\n  plannedArrival: string | null\n  arrivalDelay: number | null\n  arrivalPlatform: string | null\n  arrivalPrognosisType: string | null\n  plannedArrivalPlatform: string | null\n  departure: string | null\n  plannedDeparture: string | null\n  departureDelay: number | null\n  departurePlatform: string | null\n  departurePrognosisType: string | null\n  plannedDeparturePlatform: string | null\n}\n\ntype Remarks = {\n\tcode: string | undefined\n\tsummary: string | null | undefined\n\ttext: string | undefined\n\ttype: string | undefined\n\tvalidFrom: string | undefined\n\tvalidUntil: string | undefined\n}[]\n\ntype Props = {\n  trip: {\n    origin: OrigDest\n    destination: OrigDest\n    departure: string\n    plannedDeparture: string\n    departureDelay: number | null\n    arrival: string\n    plannedArrival: string\n    arrivalDelay: number | null\n    line: Line\n    direction: string\n    currentLocation: Loc\n    arrivalPlatform: string\n    plannedArrivalPlatform: string\n    arrivalPrognosisType: string\n    departurePlatform: string\n    plannedDeparturePlatform: string\n    departurePrognosisType: string\n    stopovers: Stopover[]\n    remarks: Remarks\n    id: string\n  }\n  stopId: string\n  mode: \"dep\" | \"arr\"\n}\n\nfunction Trip({ trip, stopId, mode }: Props) {\n  const stopOfInterest = trip.stopovers.find(stopover => stopover.stop.id === stopId)\n  const indexOfInterest = stopOfInterest ? trip.stopovers.indexOf(stopOfInterest) : -1\n  const getTime = (timestamp: string) => {\n    return timestamp.split(\"T\")[1].substring(0,5)\n  }\n  const getDelay = (delay: number) => {\n    const roundedDelay = Math.round(delay / 60)\n    if (roundedDelay === 0) {\n      return \"±0\"\n    }\n    if (delay < 0) {\n      return `-${Math.abs(roundedDelay)}`\n    }\n    return `+${Math.abs(roundedDelay)}`\n  }\n  const getColor = (delay: number) => {\n    if (delay === 0) {\n      return \"blue\"\n    }\n    if (delay < 0) {\n      return \"green\"\n    }\n    return \"red\"\n  }\n  return (\n    <div sx={{ gridColumn: \"1 / span 24\", fontSize: \"0.8rem\", textAlign: \"left\", hyphens: \"auto\" }} lang=\"de\">\n      {trip.stopovers && trip.stopovers.length > 0 && trip.stopovers.map((stop, idx) => {\n        const isCancelled = stop.cancelled ? { textDecorationLine: \"line-through\" } : {}\n        const isCurrentStop = idx === indexOfInterest ? { fontWeight: 700 } : {}\n        return (\n          <span key={`${idx}_${stop.stop.name}`}>\n            <span sx={{ ...isCancelled, ...isCurrentStop }}>\n              {stop.stop.name}\n            </span>\n            {idx <= indexOfInterest && (stop.plannedDeparture ? <span sx={{ mx: \"0.3em\", ...isCancelled, ...isCurrentStop }}>{getTime(stop.plannedDeparture)}</span> : stop.plannedArrival && (<span sx={{ mx: \"0.3em\", ...isCancelled, ...isCurrentStop }}>{getTime(stop.plannedArrival)}</span>))}\n            {idx > indexOfInterest && (stop.plannedArrival ? <span sx={{ mx: \"0.3em\", ...isCancelled }}>{getTime(stop.plannedArrival)}</span> : stop.plannedDeparture && (<span sx={{ mx: \"0.3em\", ...isCancelled }}>{getTime(stop.plannedDeparture)}</span>))}\n            {idx <= indexOfInterest && (typeof stop.departureDelay === \"number\" && !stop.cancelled ? (<span sx={{ mr: \"0.2em\", ...isCurrentStop, color: getColor(stop.departureDelay) }}>{getDelay(stop.departureDelay)}</span>) : typeof stop.arrivalDelay === 'number' && !stop.cancelled && (<span sx={{ mr: \"0.2em\", ...isCurrentStop, color: getColor(stop.arrivalDelay) }}>{getDelay(stop.arrivalDelay)}</span>))}\n            {idx > indexOfInterest && (typeof stop.arrivalDelay === 'number' && !stop.cancelled ? (<span sx={{ mr: \"0.2em\", color: getColor(stop.arrivalDelay) }}>{getDelay(stop.arrivalDelay)}</span>) : typeof stop.departureDelay === 'number' && !stop.cancelled && (<span sx={{ mr: \"0.2em\", color: getColor(stop.departureDelay) }}>{getDelay(stop.departureDelay)}</span>))}\n            {idx !== trip.stopovers.length - 1 && <span sx={{ mr: \"0.3em\" }}>–</span>}\n          </span>\n        )\n      })}\n    </div>\n  )\n}\n\nexport default Trip"],"names":["_ref","trip","stopId","mode","stopOfInterest","stopovers","find","stopover","stop","id","indexOfInterest","indexOf","getTime","timestamp","split","substring","getDelay","delay","roundedDelay","Math","round","concat","abs","getColor","_jsx","sx","gridColumn","fontSize","textAlign","hyphens","lang","children","length","map","idx","isCancelled","cancelled","textDecorationLine","isCurrentStop","fontWeight","_jsxs","name","plannedDeparture","mx","plannedArrival","departureDelay","arrivalDelay","mr","color"],"sourceRoot":""}