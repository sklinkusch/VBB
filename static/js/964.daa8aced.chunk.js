"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[964],{4157:(t,e,i)=>{i.d(e,{Z:()=>r});var a=i(2791),n=i(9922);function r(t){let{left:e,right:i}=t;return(0,n.BX)(a.Fragment,{children:[(0,n.tZ)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:e}),(0,n.tZ)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:i})]})}},964:(t,e,i)=>{i.r(e),i.d(e,{default:()=>w});var a=i(2791),n=i(4157),r=i(9930),o=i(9922);function s(){return(0,o.BX)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,o.tZ)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,r.Z)("legend")}),(0,o.tZ)(n.Z,{left:(0,r.Z)("scheduled"),right:(0,r.Z)("scheduledDesc")}),(0,o.tZ)(n.Z,{left:(0,r.Z)("real"),right:(0,r.Z)("realDesc")}),(0,o.tZ)(n.Z,{left:(0,r.Z)("delay"),right:(0,r.Z)("delayDesc")}),(0,o.tZ)(n.Z,{left:(0,r.Z)("line"),right:(0,r.Z)("lineDesc")}),(0,o.tZ)(n.Z,{left:(0,r.Z)("direction"),right:(0,r.Z)("directionDesc")}),(0,o.tZ)(n.Z,{left:(0,o.tZ)("span",{className:"fas fa-wheelchair"}),right:(0,r.Z)("barrierfree")}),(0,o.tZ)(n.Z,{left:(0,o.tZ)("span",{className:"fas fa-bicycle"}),right:(0,r.Z)("bike")}),(0,o.tZ)(n.Z,{left:(0,o.tZ)("span",{className:"fas fa-exclamation-triangle"}),right:(0,r.Z)("attention")}),(0,o.tZ)(n.Z,{left:(0,o.tZ)("span",{className:"fas fa-times"}),right:(0,r.Z)("cancelled")})]})}var c=i(7689),d=i(1087),l=i(5918),u=i(2530),g=i(4307),p=i(6313),h=i(3090),m=i(953),f=i(1036),b=i(1029),Z=i(4994);function y(){const[t,e]=(0,l.Rh)("selection",[]),[i,n]=(0,l.Rh)("filterSelection",[]),[r,s]=(0,l.Rh)("stop",{id:"",name:"",type:""}),[y,v]=(0,l.Rh)("filterStop",{id:"0",name:"\u2e3a",type:""}),[w,S]=(0,l.Rh)("data",[]),[D,x]=(0,l.Rh)("date",""),[R,B]=(0,l.Rh)("error",null),[E,j]=(0,l.Rh)("express",!0),[N,C]=(0,l.Rh)("regional",!0),[L,T]=(0,l.Rh)("suburban",!0),[k,O]=(0,l.Rh)("subway",!0),[W,A]=(0,l.Rh)("tram",!0),[z,I]=(0,l.Rh)("bus",!0),[P,X]=(0,l.Rh)("ferry",!0),[F,H]=(0,l.Rh)("time",(new Date).toLocaleString("sv",{timeZone:"Europe/Berlin",minute:"2-digit",hour:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).replace(" ","T")),q=(0,c.UO)(),[G,U]=(0,d.useSearchParams)(),J=(0,c.s0)();(0,a.useEffect)((()=>{!async function(){if(q.hasOwnProperty("id")&&"string"===typeof q.id&&9===q.id.length)try{const t="https://vbb-rest.vercel.app/stops/".concat(q.id,"?language=de"),i=await fetch(t),a=await i.json(),{name:n}=await a;J("/departures/".concat(q.id)),s(a);const r=G.has("direction")&&G.get("direction")?G.get("direction"):"0";if("string"===typeof r&&"0"!==r){const t="https://vbb-rest.vercel.app/stops/".concat(r,"?language=de"),e=await fetch(t),i=await e.json(),{name:a}=await i;v({id:r,name:a,type:""})}else v({id:"0",name:"\u2e3a",type:""});Q(q.id,n,{direction:r}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(n):"Departures from ".concat(n);e([a])}catch(R){console.debug(R)}else if(q.hasOwnProperty("id")&&"string"===typeof q.id&&12===q.id.length)try{const t="".concat(q.id.slice(0,1)).concat(q.id.slice(-8)),i="https://vbb-rest.vercel.app/stops/".concat(t,"?language=de"),a=await fetch(i),n=await a.json(),{name:r}=await n;J("/departures/".concat(t)),s(n),Q(t,r,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(r):"Departures from ".concat(r);e([n])}catch(R){console.debug(R)}else try{const t="900100011",i="https://vbb-rest.vercel.app/stops/".concat(t,"?language=de"),a=await fetch(i),n=await a.json(),{name:r}=await n;J("/departures/".concat(t)),s(n),Q(t,r,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(r):"Departures from ".concat(r);e([n])}catch(R){console.debug(R)}}()}),[]);const K=(0,a.useRef)(null),M=(0,a.useRef)(null),Q=async(t,e,i)=>{try{const a=(t=>t.startsWith("Berlin")||t.includes("(Berlin)")||t.includes("Berlin Hauptbahnhof")?"BLN":"BBG")(e),n=(0,u.g)(a);let o="de";o=navigator.language.startsWith("de")?"de":"en";const s=i.direction?"0"!==i.direction?parseInt(i.direction,10):null:"0"!==y.id?parseInt(y.id,10):null,c="number"===typeof s?"&direction=".concat(s):"";if((t===r.id||""===D)&&!i.time){const t=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),e=(new Date).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T");x(t),H(e)}const d="https://vbb-rest.vercel.app/stops/".concat(t,"/departures?language=").concat(o,"&duration=").concat(n,"&express=").concat("boolean"===typeof i.express?i.express.toString():E.toString(),"&regional=").concat("boolean"===typeof i.regional?i.regional.toString():N.toString(),"&suburban=").concat("boolean"===typeof i.suburban?i.suburban.toString():L.toString(),"&subway=").concat("boolean"===typeof i.subway?i.subway.toString():k.toString(),"&tram=").concat("boolean"===typeof i.tram?i.tram.toString():W.toString(),"&bus=").concat("boolean"===typeof i.bus?i.bus.toString():z.toString(),"&ferry=").concat("boolean"===typeof i.ferry?i.ferry.toString():P.toString()).concat(c,"&when=").concat("string"===typeof i.time?new Date(i.time).toISOString():new Date(F).toISOString()),l=await fetch(d),{status:g}=await l,p=await l.json();if(500===g||200!==g)B("HTTP status code: ".concat(g)),S([]);else{const{departures:t}=p;document.title="de"===o?"Abfahrten ab ".concat(e):"Departures from ".concat(e),S(t),B(null)}}catch(R){console.debug(R)}};return(0,o.BX)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[K&&(0,o.tZ)(g.Z,{filterStops:async t=>{const i=t.target.value;try{if(i.length>=3){const t="https://vbb-rest.vercel.app/locations?query=".concat(i,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),a=await fetch(t),n=await a.json(),o=[r,...n];e(o)}else e([r])}catch(R){console.debug(R)}},inputField:K}),(0,o.tZ)(p.Z,{handleChange:t=>{s(t);const{id:e,name:i}=t;Q(e,i,{direction:"0"});K.current.value=""},selection:t,stop:r,mode:"dep"}),(0,o.tZ)(h.Z,{handleSubmit:()=>{const t=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),e=(new Date).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T");x(t),H(e),Q(r.id,r.name,{direction:y.id,time:e});K.current.value=""}}),(0,o.BX)("div",{children:[(0,o.tZ)("span",{sx:{display:"inline-block",mr:"0.2rem",fontStyle:"italic",fontWeight:700},children:"via"}),(0,o.tZ)(g.Z,{filterStops:async t=>{const e=t.target.value;try{const t={id:"0",name:"\u2e3a",type:""};if(e.length>=3){const i="https://vbb-rest.vercel.app/locations?query=".concat(e,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),a=await fetch(i),r=await a.json(),o="0"!==y.id?[t,y,...r]:[t,...r];n(o)}else if("0"!==y.id){n([t,y])}else n([t])}catch(R){console.debug(R)}},inputField:M}),(0,o.tZ)(m.Z,{handleChange:t=>{"0"!==t.id?(v(t),U({direction:t.id}),Q(r.id,r.name,{direction:t.id})):(v({id:"0",name:"\u2e3a",type:""}),U({direction:"0"}),Q(r.id,r.name,{direction:"0"}));M.current.value=""},selection:i,stop:y})]}),(0,o.tZ)(f.Z,{products:[E,N,L,k,W,z,P],productSetters:[j,C,T,O,A,I,X],getData:t=>Q(r.id,r.name,t)}),(0,o.tZ)(Z.Z,{time:F,setTime:t=>{const e=new Date(t).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T"),i=new Date(t).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"});H(e),x(i),Q(r.id,r.name,{direction:y.id,time:e})}}),(0,o.tZ)(b.Z,{stop:r,data:w,error:R,date:D,mode:"dep"})]})}var v=i(184);const w=function(){return(0,v.jsxs)("div",{children:[(0,v.jsx)(s,{}),(0,v.jsx)(y,{})]})}}}]);
//# sourceMappingURL=964.daa8aced.chunk.js.map