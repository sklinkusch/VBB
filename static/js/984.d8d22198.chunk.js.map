{"version":3,"file":"static/js/984.d8d22198.chunk.js","mappings":"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","sources":["components/Arrival.tsx"],"sourcesContent":["/** @jsxImportSource theme-ui */\nimport { Fragment, lazy } from \"react\";\nconst Time = lazy(() => import(\"./Time\"));\nconst Product = lazy(() => import(\"./Product\"));\nconst Barrier = lazy(() => import(\"./Barrier\"));\nconst Bike = lazy(() => import(\"./Bike\"));\nconst Warning = lazy(() => import(\"./Warning\"));\nconst Status = lazy(() => import(\"./Status\"));\nconst Warntext = lazy(() => import(\"./Warntext\"));\nconst Stattext = lazy(() => import(\"./Stattext\"));\n\ninterface Remark {\n  code: string\n  type: string\n  validFrom: string\n  validUntil: string\n  summary: string\n  text: string\n}\n\ninterface Props {\n  arr: {\n    when: string | null\n    delay: number | null\n    cancelled: boolean\n    formerScheduledWhen: string | null \n    scheduledWhen: string | null\n    tripId: string\n    line: {\n      name: string\n      express: boolean\n      metro: boolean\n      night: boolean\n      product: string\n    }\n    provenance: string\n    remarks: Remark[]\n    platform: number\n  }\n}\n\nconst Arrival = (props: Props) => {\n  const getDelay = (delay: number | null, cancelled: boolean) => {\n    if (delay != null) {\n      return Math.floor(delay / 60);\n    } else if (cancelled) {\n      return \"X\";\n    } else {\n      return \"?\";\n    }\n  };\n  const getPlanTime = (realtime: string, delay: string | number) => {\n    let hours = Number(realtime.substring(0, 2));\n    let minutes = Number(realtime.substring(3, 5));\n    if(typeof delay === \"number\") {\n      minutes -= delay;\n      if (minutes < 0) {\n        minutes += 60;\n        hours -= 1;\n      }\n      if (minutes > 59) {\n        minutes -= 60;\n        hours += 1;\n      }\n      if (hours < 0) {\n        hours += 24;\n      }\n      if (hours > 23) {\n        hours -= 24;\n      }\n    }\n    let hourString = hours < 10 ? `0${hours}` : `${hours}`;\n    let minuteString = minutes < 10 ? `0${minutes}` : `${minutes}`;\n    return `${hourString}:${minuteString}`;\n  };\n  const getTime = (timestamp: string | null) => {\n    if (timestamp != null) {\n      return timestamp.substring(11, 16);\n    } else {\n      return \"\";\n    }\n  };\n  let delayMin;\n  if (props.arr.cancelled) {\n    delayMin = getDelay(props.arr.delay, props.arr.cancelled);\n  } else {\n    delayMin = getDelay(props.arr.delay, false);\n  }\n  let realtime = getTime(props.arr.when);\n  let plantime;\n  if (props.arr.when != null && props.arr.delay != null) {\n    plantime = getPlanTime(realtime, delayMin);\n  } else if (props.arr.when != null && delayMin === \"?\") {\n    plantime = realtime;\n    realtime = \"\";\n  } else {\n    plantime =\n      getTime(props.arr.formerScheduledWhen) ||\n      getTime(props.arr.scheduledWhen);\n  }\n  const { line, provenance, remarks, platform } = props.arr;\n  const { name: linenumber } = line;\n  return (\n    <Fragment>\n      <div className=\"row\" key={props.arr.tripId} sx={{ display: \"grid\", gridTemplateColumns: \"repeat(24,1fr)\" }}>\n        <Time time={plantime} class=\"plantime\" />\n        <Time time={realtime} class=\"realtime\" />\n        <div className=\"delay\" sx={{ textAlign: [\"center\", \"center\", \"right\"], gridColumn: [\"17 / span 8\", \"5 / span 2\"]}}>{delayMin}</div>\n        <Product line={line} />\n        <div className=\"line\" sx={{ textAlign: \"left\", gridColumn: [\"2 / span 6\", \"8 / span 3\"] }}>{linenumber}</div>\n        <div className=\"direction\" sx={{ textAlign: \"left\", gridColumn: [\"8 / span 13\", \"11 / span 8\"] }}>{provenance}</div>\n        <div className=\"platform\" sx={{ textAlign: \"center\", gridColumn: [\"22 / span 3\", \"19 / span 2\"] }}>{platform}</div>\n        <Barrier remarks={remarks} />\n        <Bike remarks={remarks} />\n        <Warning remarks={remarks} />\n        <Status remarks={remarks} />\n      </div>\n      <div className=\"row row-add\" key={`add:${props.arr.tripId}`} sx={{ display: \"grid\", gridTemplateColumns: \"repeat(24, 1fr)\", borderBottom: [\"1px solid #ccc\", \"1px solid #ccc\",\"none\"] }}>\n        <Warntext remarks={remarks} />\n        <Stattext remarks={remarks} />\n      </div>\n    </Fragment>\n  );\n};\n\nexport default Arrival;\n"],"names":["Time","lazy","Product","Barrier","Bike","Warning","Status","Warntext","Stattext","props","delayMin","getDelay","delay","cancelled","Math","floor","getTime","timestamp","substring","arr","plantime","realtime","when","hours","Number","minutes","hourString","minuteString","getPlanTime","formerScheduledWhen","scheduledWhen","line","provenance","remarks","platform","linenumber","name","Fragment","className","sx","display","gridTemplateColumns","time","class","textAlign","gridColumn","tripId","borderBottom"],"sourceRoot":""}