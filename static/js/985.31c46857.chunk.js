"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[985],{2985:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r=t(4165),a=t(5861),i=t(2982),u=t(885),o=t(2791),c=t(7689),l=t(5918),s=t(1044),f=t(2530),d=t(5042),v=t(184),h=(0,o.lazy)((function(){return t.e(307).then(t.bind(t,4307))})),p=(0,o.lazy)((function(){return t.e(313).then(t.bind(t,6313))})),m=(0,o.lazy)((function(){return t.e(90).then(t.bind(t,3090))})),Z=(0,o.lazy)((function(){return t.e(953).then(t.bind(t,953))})),g=(0,o.lazy)((function(){return t.e(289).then(t.bind(t,4289))}));function w(){var e=(0,l.Rh)("selection",d.Z),n=(0,u.Z)(e,2),t=n[0],w=n[1],b=(0,l.Rh)("stop",{id:"",name:"",type:""}),y=(0,u.Z)(b,2),C=y[0],R=y[1],L=(0,l.Rh)("data",[]),k=(0,u.Z)(L,2),x=k[0],O=k[1],j=(0,l.Rh)("date",""),z=(0,u.Z)(j,2),P=z[0],S=z[1],D=(0,l.Rh)("viewData",[]),B=(0,u.Z)(D,2),E=B[0],F=B[1],T=(0,l.Rh)("error",null),U=(0,u.Z)(T,2),G=U[0],H=U[1],N=(0,c.UO)(),W=(0,c.s0)();(0,o.useEffect)((function(){if(N.hasOwnProperty("id")&&"string"===typeof N.id&&N.id.length>0){var e=d.Z.filter((function(e){return e.id===N.id}))[0];W("/arrivals/".concat(N.id)),R(e),Q(N.id);var n=d.Z.filter((function(n){return n.name!==e.name})),t=[e].concat((0,i.Z)(n));w(t)}else{var r=d.Z.filter((function(e){return"U Stadtmitte"===e.name})),a=(0,u.Z)(r,1)[0],o=a.id;W("/arrivals/".concat(o)),R(a),Q(o);var c=d.Z.filter((function(e){return e.name!==a.name})),l=[a].concat((0,i.Z)(c));w(l)}}),[]);var q=(0,o.useRef)(null),A=(0,o.useRef)(null),I=(0,o.useRef)(null),J=function(e){var n=x.filter((function(n){var t=!1;if(n.hasOwnProperty("provenance")&&n.provenance)for(var r=0;r<e.length;r++)if(n.line.name.toLowerCase().includes(e[r].toLowerCase())||n.provenance.toLowerCase().includes(e[r].toLowerCase())){t=!0;break}return t}));F(n)},K=function(e){var n=x.filter((function(n){var t=!0;if(n.hasOwnProperty("provenance")&&n.provenance)for(var r=0;r<e.length;r++)if(!n.line.name.toLowerCase().includes(e[r].toLowerCase())&&!n.provenance.toLowerCase().includes(e[r].toLowerCase())){t=!1;break}return t}));F(n)},M=function(){F(x)},Q=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,i,o,c,l,v,h,p,m,Z,g,w,b;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.Z.filter((function(e){return e.id===n})),a=(0,u.Z)(t,1),i=a[0],o=i.type,c=void 0===o?"BBG":o,l=(0,f.g)(c),v="de",h=navigator.language,v=h.startsWith("de")?"de":"en",p="https://sklinkusch-vbbmicro.vercel.app/?station=".concat(n,"&duration=").concat(l,"&mode=arr&language=").concat(v),e.next=10,s.ZP.get(p);case 10:return m=e.sent,e.next=13,m;case 13:Z=e.sent,g=Z.data,500===(w=Z.status)||200!==w?(H("HTTP status code: ".concat(w)),O([])):(b=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),S(b),O(g),F(g),H(null));case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"timetable",children:[(0,v.jsx)(h,{filterStops:function(e){!function(e){var n=d.Z.filter((function(n){return n.id!==C.id&&n.name.toLowerCase().includes(e.toLowerCase())})),t=[C].concat((0,i.Z)(n));w(t)}(e.target.value)},inputField:q}),(0,v.jsx)(p,{handleChange:function(e){R(e);var n=e.id;Q(n),q.current.value="",A.current.value="",I.current.value="OR"},selection:t,stop:C,mode:"arr"}),(0,v.jsx)(m,{handleSubmit:function(){Q(C.id),q.current.value="",A.current.value="",I.current.value="OR"}}),(0,v.jsx)(Z,{filterField:A,filterSelector:I,filterData:function(){var e=A.current.value.split(" "),n=I.current.value;e.length>0?"OR"===n?J(e):K(e):M()},mode:"arr"}),(0,v.jsx)(g,{stop:C,data:E,error:G,date:P,mode:"arr"})]})}}}]);
//# sourceMappingURL=985.31c46857.chunk.js.map