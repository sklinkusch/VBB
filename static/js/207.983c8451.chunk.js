"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[207],{9207:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z,getDelay:()=>f,getPlanTime:()=>y,getTime:()=>v});var a=n(2791),l=n(4373),r=n(9922);const d=(0,a.lazy)((()=>n.e(599).then(n.bind(n,8705)))),s=(0,a.lazy)((()=>n.e(305).then(n.bind(n,6305)))),i=(0,a.lazy)((()=>n.e(272).then(n.bind(n,5272)))),o=(0,a.lazy)((()=>n.e(833).then(n.bind(n,833)))),c=(0,a.lazy)((()=>Promise.resolve().then(n.bind(n,6049)))),p=(0,a.lazy)((()=>n.e(302).then(n.bind(n,6302)))),u=(0,a.lazy)((()=>n.e(734).then(n.bind(n,734)))),h=(0,a.lazy)((()=>n.e(619).then(n.bind(n,619)))),m=(0,a.lazy)((()=>n.e(776).then(n.bind(n,7776)))),b=(0,a.lazy)((()=>n.e(558).then(n.bind(n,4558)))),g=(0,a.lazy)((()=>n.e(525).then(n.bind(n,1525)))),f=(e,t)=>{if(null!=e){const t=Math.abs(e/60);return Math.round(t)}return t?"X":"?"},y=(e,t,n)=>{let a=Number(e.substring(0,2)),l=Number(e.substring(3,5));l="+"===n?l-t:"\u2013"===n?l+t:l,l<0&&(l+=60,a-=1),l>59&&(l-=60,a+=1),a<0&&(a+=24),a>23&&(a-=24);let r=a<10?"0".concat(a):"".concat(a),d=l<10?"0".concat(l):"".concat(l);return"".concat(r,":").concat(d)},v=e=>null!=e?e.substring(11,16):"",Z=e=>{const[t,n]=(0,a.useState)(null),[Z,k]=(0,a.useState)(void 0),[x,z]=(0,a.useState)(null);(0,a.useEffect)((()=>{(()=>{const t=4*Math.atan(1),{currentTripPosition:a,stop:l}=e.dep;if(a){const{latitude:e,longitude:r}=a;fetch("https://vbb-rest.vercel.app/locations/nearby?latitude=".concat(e,"&longitude=").concat(r,"&results=1&language=de")).then((e=>e.json())).then((e=>{e.length>0&&e[0].name&&n(e[0])})).catch((e=>console.debug(e)));const{location:d}=l,{latitude:s,longitude:i}=d,o=t*e/180,c=t*s/180,p=t*(r-i)/180,u=Math.sin(o)*Math.sin(c)+Math.cos(o)*Math.cos(c)*Math.cos(p),h=Math.acos(u);z(60*(180*h/t)*1.1515)}})()}),[]),(0,a.useEffect)((()=>{fetch("https://vbb-rest.vercel.app/trips/".concat(e.dep.tripId,"?language=de")).then((e=>e.json())).then((e=>k(e.trip))).catch((e=>console.debug(e)))}),[]);const C=e.dep.cancelled?f(e.dep.delay,e.dep.cancelled):f(e.dep.delay,!1);let M,w;"number"===typeof e.dep.delay&&"number"===typeof C?(w=e.dep.delay<0?"\u2013":e.dep.delay>0?"+":"\xb1",M="".concat(w).concat(C)):(M=C,w="\xb1");let N,P=v(e.dep.when);null!=e.dep.when&&null!=e.dep.delay?N=y(P,Number(C),w):null!=e.dep.when&&"?"===C?(N=P,P=""):N=v(e.dep.formerScheduledWhen)||v(e.dep.scheduledWhen)||v(e.dep.plannedWhen);const{line:B,direction:T,remarks:X,platform:A,plannedPlatform:I,prognosedPlatform:S}=e.dep;return(0,r.BX)(a.Fragment,{children:[(0,r.BX)("div",{className:"row",sx:{display:"grid",gridTemplateColumns:["repeat(24,1fr)","repeat(24,1fr)","repeat(26,1fr)"]},children:[(0,r.tZ)(i,{time:N,class:"plantime"}),(0,r.tZ)(i,{time:P,class:"realtime"}),(0,r.tZ)("div",{className:"delay",sx:{textAlign:["center","center","right"],gridColumn:["17 / span 8","5 / span 2"]},children:M}),(0,r.tZ)(o,{line:B}),(0,r.tZ)(c,{line:B}),(0,r.tZ)("div",{className:"direction",sx:{textAlign:"left",gridColumn:["8 / span 13","11 / span 8"]},children:T}),(0,r.tZ)("div",{className:"platform",sx:{textAlign:"center",gridColumn:["22 / span 3","19 / span 2"]},children:A||I||S}),(0,r.tZ)(p,{remarks:X}),(0,r.tZ)(u,{remarks:X}),(0,r.tZ)(h,{remarks:X}),(0,r.tZ)(m,{remarks:X}),B.operator?(0,r.tZ)(d,{operator:B.operator}):(0,r.tZ)("div",{})]},e.dep.tripId),(0,r.BX)("div",{className:"row row-add",sx:{display:"grid",gridTemplateColumns:"repeat(24, 1fr)",borderBottom:["1px solid #ccc","1px solid #ccc","none"]},children:[t&&x&&(0,r.tZ)(l.r,{position:t,distance:x}),Z&&(0,r.tZ)(s,{trip:Z,stopId:e.dep.stop.id,mode:"dep"}),(0,r.tZ)(b,{remarks:X}),(0,r.tZ)(g,{remarks:X})]},"add:".concat(e.dep.tripId))]})}},4373:(e,t,n)=>{n.d(t,{r:()=>l});var a=n(9922);function l(e){let{position:t,distance:n}=e;return t&&n?(0,a.BX)("div",{sx:{gridColumn:"1 / 25"},children:[navigator.language.startsWith("de")?"Aktuelle Position: ":"Current Position: ",(0,a.tZ)("span",{children:t.name})," ","(",n.toFixed(3)," km)"]}):(0,a.tZ)("div",{})}}}]);
//# sourceMappingURL=207.983c8451.chunk.js.map