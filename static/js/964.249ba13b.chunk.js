"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[964,307,313,90,953],{3090:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(2791),a=n(9922);function c(e){var t=e.handleSubmit;return(0,a.tZ)(r.Fragment,{children:(0,a.tZ)("button",{onClick:t,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1},children:(0,a.tZ)("i",{className:"fas fa-redo-alt"})})})}},953:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});n(2791);var r=n(9930),a=n(9922);function c(e){var t=e.filterField,n=e.filterSelector,c=e.filterData,i=e.mode,o=void 0===i?"dep":i;return(0,a.BX)("div",{children:[(0,a.tZ)("input",{type:"text",placeholder:"dep"===o?(0,r.Z)("filterDepartures"):(0,r.Z)("filterArrivals"),ref:t,onChange:function(t){return e.filterData(t)},sx:{padding:"5px",opacity:1,backgroundColor:"#fff",width:"300px",maxWidth:"90%"}}),(0,a.BX)("select",{ref:n,onChange:c,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1,width:"400px",maxWidth:"90%",mx:"10px"},children:[(0,a.tZ)("option",{value:"OR",children:(0,r.Z)("filterOr")}),(0,a.tZ)("option",{value:"AND",children:(0,r.Z)("filterAnd")})]})]})}},4307:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(2791),a=n(9930),c=n(9922);function i(e){var t=e.filterStops,n=e.inputField;return(0,c.tZ)(r.Fragment,{children:(0,c.tZ)("input",{type:"text",onChange:function(e){return t(e)},ref:n,placeholder:(0,a.Z)("filterStops"),sx:{padding:"5px",opacity:1,backgroundColor:"#fff",width:"300px",maxWidth:"90%"}})})}},4157:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(2791),a=n(9922);function c(e){var t=e.left,n=e.right;return(0,a.BX)(r.Fragment,{children:[(0,a.tZ)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:t}),(0,a.tZ)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:n})]})}},6313:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(2791),a=n(7689),c=n(9922);function i(e){var t=e.handleChange,n=e.selection,i=e.stop,o=e.mode,s=(0,a.s0)();return(0,c.tZ)(r.Fragment,{children:(0,c.tZ)("select",{value:i.id,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1,width:"400px",maxWidth:"90%",mx:"10px"},onChange:function(e){var r=e.target.value,a=n.filter((function(e){return e.id===r}))[0];return t(a)},children:n&&n.length>=1&&n.map((function(e,t){return(0,c.tZ)("option",{onClick:function(){return s("arr"===o?"/arrivals/".concat(e.id):"/departures/".concat(e.id))},value:e.id,children:e.name},"".concat(e.id,"-").concat(t))}))})})}},964:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(2791),a=n(4157),c=n(9930),i=n(9922);function o(){return(0,i.BX)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,i.tZ)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,c.Z)("legend")}),(0,i.tZ)(a.Z,{left:(0,c.Z)("scheduled"),right:(0,c.Z)("scheduledDesc")}),(0,i.tZ)(a.Z,{left:(0,c.Z)("real"),right:(0,c.Z)("realDesc")}),(0,i.tZ)(a.Z,{left:(0,c.Z)("delay"),right:(0,c.Z)("delayDesc")}),(0,i.tZ)(a.Z,{left:(0,c.Z)("line"),right:(0,c.Z)("lineDesc")}),(0,i.tZ)(a.Z,{left:(0,c.Z)("direction"),right:(0,c.Z)("directionDesc")}),(0,i.tZ)(a.Z,{left:(0,i.tZ)("span",{className:"fas fa-wheelchair"}),right:(0,c.Z)("barrierfree")}),(0,i.tZ)(a.Z,{left:(0,i.tZ)("span",{className:"fas fa-bicycle"}),right:(0,c.Z)("bike")}),(0,i.tZ)(a.Z,{left:(0,i.tZ)("span",{className:"fas fa-exclamation-triangle"}),right:(0,c.Z)("attention")}),(0,i.tZ)(a.Z,{left:(0,i.tZ)("span",{className:"fas fa-times"}),right:(0,c.Z)("cancelled")})]})}var s=n(3433),u=n(4165),l=n(5861),d=n(9439),f=n(7689),p=n(5918),h=n(1243),g=n(2530),Z=n(4307),v=n(6313),b=n(3090),x=n(953),m=n(1036),y=n(1029);function w(){var e=(0,p.Rh)("selection",[]),t=(0,d.Z)(e,2),n=t[0],a=t[1],c=(0,p.Rh)("stop",{id:"",name:"",type:""}),o=(0,d.Z)(c,2),w=o[0],k=o[1],C=(0,p.Rh)("data",[]),S=(0,d.Z)(C,2),R=S[0],D=S[1],B=(0,p.Rh)("date",""),N=(0,d.Z)(B,2),O=N[0],L=N[1],W=(0,p.Rh)("viewData",[]),A=(0,d.Z)(W,2),F=A[0],j=A[1],P=(0,p.Rh)("error",null),X=(0,d.Z)(P,2),E=X[0],H=X[1],T=(0,p.Rh)("express",!0),z=(0,d.Z)(T,2),q=z[0],G=z[1],U=(0,p.Rh)("regional",!0),I=(0,d.Z)(U,2),J=I[0],K=I[1],M=(0,p.Rh)("suburban",!0),Q=(0,d.Z)(M,2),V=Q[0],Y=Q[1],$=(0,p.Rh)("subway",!0),_=(0,d.Z)($,2),ee=_[0],te=_[1],ne=(0,p.Rh)("tram",!0),re=(0,d.Z)(ne,2),ae=re[0],ce=re[1],ie=(0,p.Rh)("bus",!0),oe=(0,d.Z)(ie,2),se=oe[0],ue=oe[1],le=(0,p.Rh)("ferry",!0),de=(0,d.Z)(le,2),fe=de[0],pe=de[1],he=(0,f.UO)(),ge=(0,f.s0)();(0,r.useEffect)((function(){function e(){return(e=(0,l.Z)((0,u.Z)().mark((function e(){var t,n,r,c,i,o,s,l,d,f,p,h,g,Z,v,b,x;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!he.hasOwnProperty("id")||"string"!==typeof he.id||9!==he.id.length){e.next=26;break}return e.prev=1,t="https://vbb-rest.vercel.app/stops/".concat(he.id,"?language=de"),e.next=5,fetch(t);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.next=11,r;case 11:c=e.sent,i=c.name,ge("/departures/".concat(he.id)),k(r),Ce(he.id,i,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(i):"Departures from ".concat(i),a([r]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.debug(e.t0);case 24:e.next=77;break;case 26:if(!he.hasOwnProperty("id")||"string"!==typeof he.id||12!==he.id.length){e.next=53;break}return e.prev=27,o="".concat(he.id.slice(0,1)).concat(he.id.slice(-8)),s="https://vbb-rest.vercel.app/stops/".concat(o,"?language=de"),e.next=32,fetch(s);case 32:return l=e.sent,e.next=35,l.json();case 35:return d=e.sent,e.next=38,d;case 38:f=e.sent,p=f.name,ge("/departures/".concat(o)),k(d),Ce(o,p,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(p):"Departures from ".concat(p),a([d]),e.next=51;break;case 48:e.prev=48,e.t1=e.catch(27),console.debug(e.t1);case 51:e.next=77;break;case 53:return e.prev=53,g="https://vbb-rest.vercel.app/stops/".concat(h="900100011","?language=de"),e.next=58,fetch(g);case 58:return Z=e.sent,e.next=61,Z.json();case 61:return v=e.sent,e.next=64,v;case 64:b=e.sent,x=b.name,ge("/departures/".concat(h)),k(v),Ce(h,x,{}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(x):"Departures from ".concat(x),a([v]),e.next=77;break;case 74:e.prev=74,e.t2=e.catch(53),console.debug(e.t2);case 77:case"end":return e.stop()}}),e,null,[[1,21],[27,48],[53,74]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var Ze=(0,r.useRef)(null),ve=(0,r.useRef)(null),be=(0,r.useRef)(null),xe=function(e){var t=R.filter((function(t){var n=!1;if(t.hasOwnProperty("direction")&&t.direction)for(var r=0;r<e.length;r++)if(t.line.name.toLowerCase().includes(e[r].toLowerCase())||t.direction.toLowerCase().includes(e[r].toLowerCase())){n=!0;break}return n}));j(t)},me=function(e){var t=R.filter((function(t){var n=!0;if(t.hasOwnProperty("direction")&&t.direction)for(var r=0;r<e.length;r++)if(!t.line.name.toLowerCase().includes(e[r].toLowerCase())&&!t.direction.toLowerCase().includes(e[r].toLowerCase())){n=!1;break}return n}));j(t)},ye=function(){j(R)},we=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t){var n,r,c,i,o;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,!(n.length>=3)){e.next=14;break}return r="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),e.next=6,fetch(r);case 6:return c=e.sent,e.next=9,c.json();case 9:i=e.sent,o=[w].concat((0,s.Z)(i)),a(o),e.next=15;break;case 14:a([w]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.debug(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(e){return e.startsWith("Berlin")||e.includes("(Berlin)")||e.includes("Berlin Hauptbahnhof")?"BLN":"BBG"},Ce=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t,n,r){var a,c,i,o,s,l,d,f,p,Z,v;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=ke(n),c=(0,g.g)(a),i="de",o=navigator.language,i=o.startsWith("de")?"de":"en",s="https://vbb-rest.vercel.app/stops/".concat(t,"/departures?language=").concat(i,"&duration=").concat(c,"&express=").concat("boolean"===typeof r.express?r.express.toString():q.toString(),"&regional=").concat("boolean"===typeof r.regional?r.regional.toString():J.toString(),"&suburban=").concat("boolean"===typeof r.suburban?r.suburban.toString():V.toString(),"&subway=").concat("boolean"===typeof r.subway?r.subway.toString():ee.toString(),"&tram=").concat("boolean"===typeof r.tram?r.tram.toString():ae.toString(),"&bus=").concat("boolean"===typeof r.bus?r.bus.toString():se.toString(),"&ferry=").concat("boolean"===typeof r.ferry?r.ferry.toString():fe.toString()),e.next=9,h.Z.get(s);case 9:return l=e.sent,e.next=12,l;case 12:d=e.sent,f=d.data,500===(p=d.status)||200!==p?(H("HTTP status code: ".concat(p)),D([])):(Z=f.departures,v=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),document.title="de"===i?"Abfahrten ab ".concat(n):"Departures from ".concat(n),L(v),D(Z),j(Z),H(null)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.debug(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,i.BX)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[Ze&&(0,i.tZ)(Z.default,{filterStops:we,inputField:Ze}),(0,i.tZ)(v.default,{handleChange:function(e){k(e);var t=e.id,n=e.name;Ce(t,n,{}),Ze.current.value="",ve.current.value="",be.current.value="OR"},selection:n,stop:w,mode:"dep"}),(0,i.tZ)(b.default,{handleSubmit:function(){Ce(w.id,w.name,{}),Ze.current.value="",ve.current.value="",be.current.value="OR"}}),(0,i.tZ)(x.default,{filterField:ve,filterSelector:be,filterData:function(){var e=ve.current.value.split(" "),t=be.current.value;e.length>0?"OR"===t?xe(e):me(e):ye()},mode:"dep"}),(0,i.tZ)(m.Z,{products:[q,J,V,ee,ae,se,fe],productSetters:[G,K,Y,te,ce,ue,pe],getData:function(e){return Ce(w.id,w.name,e)}}),(0,i.tZ)(y.default,{stop:w,data:F,error:E,date:O,mode:"dep"})]})}var k=n(184);var C=function(){return(0,k.jsxs)("div",{children:[(0,k.jsx)(o,{}),(0,k.jsx)(w,{})]})}}}]);
//# sourceMappingURL=964.249ba13b.chunk.js.map