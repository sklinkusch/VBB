"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[964,307,313,90,953],{3090:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(2791),a=n(9922);function i(e){var t=e.handleSubmit;return(0,a.tZ)(r.Fragment,{children:(0,a.tZ)("button",{onClick:t,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1},children:(0,a.tZ)("i",{className:"fas fa-redo-alt"})})})}},953:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});n(2791);var r=n(9930),a=n(9922);function i(e){var t=e.filterField,n=e.filterSelector,i=e.filterData,c=e.mode,o=void 0===c?"dep":c;return(0,a.BX)("div",{children:[(0,a.tZ)("input",{type:"text",placeholder:"dep"===o?(0,r.Z)("filterDepartures"):(0,r.Z)("filterArrivals"),ref:t,onChange:function(t){return e.filterData(t)},sx:{padding:"5px",opacity:1,backgroundColor:"#fff",width:"300px",maxWidth:"90%"}}),(0,a.BX)("select",{ref:n,onChange:i,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1,width:"400px",maxWidth:"90%",mx:"10px"},children:[(0,a.tZ)("option",{value:"OR",children:(0,r.Z)("filterOr")}),(0,a.tZ)("option",{value:"AND",children:(0,r.Z)("filterAnd")})]})]})}},4307:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(2791),a=n(9930),i=n(9922);function c(e){var t=e.filterStops,n=e.inputField;return(0,i.tZ)(r.Fragment,{children:(0,i.tZ)("input",{type:"text",onChange:function(e){return t(e)},ref:n,placeholder:(0,a.Z)("filterStops"),sx:{padding:"5px",opacity:1,backgroundColor:"#fff",width:"300px",maxWidth:"90%"}})})}},4157:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(2791),a=n(9922);function i(e){var t=e.left,n=e.right;return(0,a.BX)(r.Fragment,{children:[(0,a.tZ)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:t}),(0,a.tZ)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:n})]})}},6313:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(2791),a=n(7689),i=n(9922);function c(e){var t=e.handleChange,n=e.selection,c=e.stop,o=e.mode,u=(0,a.s0)();return(0,i.tZ)(r.Fragment,{children:(0,i.tZ)("select",{value:c.id,sx:{padding:"5px",backgroundColor:"#ccc",opacity:1,width:"400px",maxWidth:"90%",mx:"10px"},onChange:function(e){var r=e.target.value,a=n.filter((function(e){return e.id===r}))[0];return t(a)},children:n&&n.length>=1&&n.map((function(e,t){return(0,i.tZ)("option",{onClick:function(){return u("arr"===o?"/arrivals/".concat(e.id):"/departures/".concat(e.id))},value:e.id,children:e.name},"".concat(e.id,"-").concat(t))}))})})}},2530:function(e,t,n){function r(e){switch(e){case"BLN":return function(){var e=c(),t=e.isItHoliday,n=e.isItSaturday,r=e.hour,a=60;a=t?r<7||r<8?60:r<20?40:60:n?r<6?60:r<7?40:r<21?30:r<23?40:60:r<5?60:r<7?30:r<20?20:r<22?30:60;return a}();case"BHF":return function(){var e=c(),t=e.isItHoliday,n=e.isItSaturday,r=e.hour,a=60;a=t||n?r<5?60:r<6?30:r<7?20:r<22?10:r<23?20:30:r<5?30:r<6?20:r<7?10:r<22?5:r<23?10:20;return a}()}}n.d(t,{g:function(){return r}});var a=function(e){return e>0?Number(e.toFixed(0)):e<0?Number((e-1).toFixed(0)):0};var i=function(e){var t=e%19,n=a(e/100),r=a(n/4),i=(n-r-a((8*n+13)/25)+19*t+15)%30,c=i-a(i/20)*(1-a(29/(i+1))*a((21-t)/11)),o=c-(e+a(e/4)+c+2-n+r)%7,u=o<=3?3:4,s=o<=3?o+28:o-3,l=[];return[s<3&&4===u?[s+29,3,e]:[s-2,u,e],31===s&&3===u?[1,4,e]:[s+1,u,e],l=s<23&&3===u?[s+8,4,e]:3===u?[s-22,5,e]:s>21&&4===u?[s-22,6,e]:[s+9,5,e],4===l[1]?[l[0]-19,5,e]:l[0]>20&&5===l[1]?[l[0]-20,6,e]:[l[0]+10,l[1],e]]};function c(){var e=(new Date).toLocaleDateString("en-GB",{timeZone:"Europe/Berlin",year:"numeric",month:"numeric",day:"numeric",hour:"numeric"}).split(","),t=e[0].split("/"),n=Number(e[1]),r=Number(t[0]),a=Number(t[1]),c=Number(t[2]),o=new Date(c,a-1,r).getDay(),u=function(e){return 0===e}(o)||function(e,t,n){if(1===e&&1===t)return!0;if(8===e&&3===t)return!0;if(1===e&&5===t)return!0;if(3===e&&10===t)return!0;if(12===t&&(25===e||26===e))return!0;var r=!1;return i(n).forEach((function(n){e===n[0]&&t===n[1]&&(r=!0)})),!!r}(r,a,c),s=function(e){return 6===e}(o);return{isItHoliday:u,isItSaturday:s,hour:n}}},964:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(2791),a=n(4157),i=n(9930),c=n(9922);function o(){return(0,c.BX)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,c.tZ)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,i.Z)("legend")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("scheduled"),right:(0,i.Z)("scheduledDesc")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("real"),right:(0,i.Z)("realDesc")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("delay"),right:(0,i.Z)("delayDesc")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("line"),right:(0,i.Z)("lineDesc")}),(0,c.tZ)(a.Z,{left:(0,i.Z)("direction"),right:(0,i.Z)("directionDesc")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-wheelchair"}),right:(0,i.Z)("barrierfree")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-bicycle"}),right:(0,i.Z)("bike")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-exclamation-triangle"}),right:(0,i.Z)("attention")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-times"}),right:(0,i.Z)("cancelled")})]})}var u=n(3433),s=n(4165),l=n(5861),d=n(9439),f=n(7689),p=n(5918),h=n(3263),Z=n(2530),g=n(4307),v=n(6313),m=n(3090),x=n(953),b=n(1029);function y(){var e=(0,p.Rh)("selection",[]),t=(0,d.Z)(e,2),n=t[0],a=t[1],i=(0,p.Rh)("stop",{id:"",name:"",type:""}),o=(0,d.Z)(i,2),y=o[0],w=o[1],C=(0,p.Rh)("data",[]),k=(0,d.Z)(C,2),D=k[0],N=k[1],B=(0,p.Rh)("date",""),R=(0,d.Z)(B,2),L=R[0],S=R[1],j=(0,p.Rh)("viewData",[]),F=(0,d.Z)(j,2),O=F[0],W=F[1],A=(0,p.Rh)("error",null),H=(0,d.Z)(A,2),I=H[0],E=H[1],P=(0,f.UO)(),X=(0,f.s0)();(0,r.useEffect)((function(){function e(){return(e=(0,l.Z)((0,s.Z)().mark((function e(){var t,n,r,i,c,o,u,l,d,f,p,h,Z,g;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P.hasOwnProperty("id")||"string"!==typeof P.id||9!==P.id.length){e.next=19;break}return e.next=3,fetch("https://station-api-jade.vercel.app/?id=".concat(P.id));case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.next=9,n;case 9:r=e.sent,i=r.name,X("/departures/".concat(P.id)),w(n),M(P.id,i),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(i):"Departures from ".concat(i),a([n]),e.next=56;break;case 19:if(!P.hasOwnProperty("id")||"string"!==typeof P.id||12!==P.id.length){e.next=39;break}return c="".concat(P.id.slice(0,1)).concat(P.id.slice(-8)),e.next=23,fetch("https://station-api-jade.vercel.app/?id=".concat(c));case 23:return o=e.sent,e.next=26,o.json();case 26:return u=e.sent,e.next=29,u;case 29:l=e.sent,d=l.name,X("/departures/".concat(c)),w(u),M(c,d),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(d):"Departures from ".concat(d),a([u]),e.next=56;break;case 39:return f="900100011",e.next=42,fetch("https://station-api-jade.vercel.app/?id=".concat(f));case 42:return p=e.sent,e.next=45,p.json();case 45:return h=e.sent,e.next=48,h;case 48:Z=e.sent,g=Z.name,X("/departures/".concat(f)),w(h),M(f,g),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(g):"Departures from ".concat(g),a([h]);case 56:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var T=(0,r.useRef)(null),G=(0,r.useRef)(null),U=(0,r.useRef)(null),q=function(e){var t=D.filter((function(t){var n=!1;if(t.hasOwnProperty("direction")&&t.direction)for(var r=0;r<e.length;r++)if(t.line.name.toLowerCase().includes(e[r].toLowerCase())||t.direction.toLowerCase().includes(e[r].toLowerCase())){n=!0;break}return n}));W(t)},z=function(e){var t=D.filter((function(t){var n=!0;if(t.hasOwnProperty("direction")&&t.direction)for(var r=0;r<e.length;r++)if(!t.line.name.toLowerCase().includes(e[r].toLowerCase())&&!t.direction.toLowerCase().includes(e[r].toLowerCase())){n=!1;break}return n}));W(t)},J=function(){W(D)},K=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,r,i,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.target.value).length>4)){e.next=12;break}return e.next=4,fetch("https://station-api-jade.vercel.app/?station=".concat(n));case 4:return r=e.sent,e.next=7,r.json();case 7:i=e.sent,c=[y].concat((0,u.Z)(i)),a(c),e.next=13;break;case 12:a([y]);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){var r,a,i,c,o,u,l,d,f,p,g;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.startsWith("Berlin")?"BLN":"BBG",a=(0,Z.g)(r),i="de",c=navigator.language,i=c.startsWith("de")?"de":"en",o="https://vbb-rest.vercel.app/stops/".concat(t,"/departures?language=").concat(i,"&duration=").concat(a),e.next=8,h.Z.get(o);case 8:return u=e.sent,e.next=11,u;case 11:l=e.sent,d=l.data,500===(f=l.status)||200!==f?(E("HTTP status code: ".concat(f)),N([])):(p=d.departures,g=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),document.title="de"===i?"Abfahrten ab ".concat(n):"Departures from ".concat(n),S(g),N(p),W(p),E(null));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,c.BX)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[T&&(0,c.tZ)(g.default,{filterStops:K,inputField:T}),(0,c.tZ)(v.default,{handleChange:function(e){w(e);var t=e.id,n=e.name;M(t,n),T.current.value="",G.current.value="",U.current.value="OR"},selection:n,stop:y,mode:"dep"}),(0,c.tZ)(m.default,{handleSubmit:function(){M(y.id,y.name),T.current.value="",G.current.value="",U.current.value="OR"}}),(0,c.tZ)(x.default,{filterField:G,filterSelector:U,filterData:function(){var e=G.current.value.split(" "),t=U.current.value;e.length>0?"OR"===t?q(e):z(e):J()},mode:"dep"}),(0,c.tZ)(b.default,{stop:y,data:O,error:I,date:L,mode:"dep"})]})}var w=n(184);var C=function(){return(0,w.jsxs)("div",{children:[(0,w.jsx)(o,{}),(0,w.jsx)(y,{})]})}}}]);
//# sourceMappingURL=964.ec1f05bf.chunk.js.map