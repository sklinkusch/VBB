"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[964],{4157:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(2791),a=n(9922);function s(e){var t=e.left,n=e.right;return(0,a.BX)(r.Fragment,{children:[(0,a.tZ)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:t}),(0,a.tZ)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:n})]})}},964:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(2791),a=n(4157),s=n(9930),c=n(9922);function i(){return(0,c.BX)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,c.tZ)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,s.Z)("legend")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("scheduled"),right:(0,s.Z)("scheduledDesc")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("real"),right:(0,s.Z)("realDesc")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("delay"),right:(0,s.Z)("delayDesc")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("line"),right:(0,s.Z)("lineDesc")}),(0,c.tZ)(a.Z,{left:(0,s.Z)("direction"),right:(0,s.Z)("directionDesc")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-wheelchair"}),right:(0,s.Z)("barrierfree")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-bicycle"}),right:(0,s.Z)("bike")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-exclamation-triangle"}),right:(0,s.Z)("attention")}),(0,c.tZ)(a.Z,{left:(0,c.tZ)("span",{className:"fas fa-times"}),right:(0,s.Z)("cancelled")})]})}var o=n(3433),u=n(4165),l=n(5861),d=n(9439),p=n(7689),f=n(5918),h=n(2530),g=n(4307),Z=n(6313),b=n(3090),v=n(953),m=n(1036),x=n(1029);function y(){var e=(0,f.Rh)("selection",[]),t=(0,d.Z)(e,2),n=t[0],a=t[1],s=(0,f.Rh)("filterSelection",[]),i=(0,d.Z)(s,2),y=i[0],k=i[1],S=(0,f.Rh)("stop",{id:"",name:"",type:""}),w=(0,d.Z)(S,2),R=w[0],D=w[1],B=(0,f.Rh)("filterStop",{id:"0",name:"\u2e3a",type:""}),j=(0,d.Z)(B,2),N=j[0],C=j[1],W=(0,f.Rh)("data",[]),A=(0,d.Z)(W,2),O=A[0],z=A[1],X=(0,f.Rh)("date",""),E=(0,d.Z)(X,2),F=E[0],H=E[1],P=(0,f.Rh)("error",null),T=(0,d.Z)(P,2),q=T[0],I=T[1],L=(0,f.Rh)("express",!0),G=(0,d.Z)(L,2),U=G[0],J=G[1],K=(0,f.Rh)("regional",!0),M=(0,d.Z)(K,2),Q=M[0],V=M[1],Y=(0,f.Rh)("suburban",!0),$=(0,d.Z)(Y,2),_=$[0],ee=$[1],te=(0,f.Rh)("subway",!0),ne=(0,d.Z)(te,2),re=ne[0],ae=ne[1],se=(0,f.Rh)("tram",!0),ce=(0,d.Z)(se,2),ie=ce[0],oe=ce[1],ue=(0,f.Rh)("bus",!0),le=(0,d.Z)(ue,2),de=le[0],pe=le[1],fe=(0,f.Rh)("ferry",!0),he=(0,d.Z)(fe,2),ge=he[0],Ze=he[1],be=(0,p.UO)(),ve=(0,p.s0)();(0,r.useEffect)((function(){function e(){return(e=(0,l.Z)((0,u.Z)().mark((function e(){var t,n,r,s,c,i,o,l,d,p,f,h,g,Z,b,v,m;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!be.hasOwnProperty("id")||"string"!==typeof be.id||9!==be.id.length){e.next=26;break}return e.prev=1,t="https://vbb-rest.vercel.app/stops/".concat(be.id,"?language=de"),e.next=5,fetch(t);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.next=11,r;case 11:s=e.sent,c=s.name,ve("/departures/".concat(be.id)),D(r),we(be.id,c,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(c):"Departures from ".concat(c),a([r]),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.debug(e.t0);case 24:e.next=77;break;case 26:if(!be.hasOwnProperty("id")||"string"!==typeof be.id||12!==be.id.length){e.next=53;break}return e.prev=27,i="".concat(be.id.slice(0,1)).concat(be.id.slice(-8)),o="https://vbb-rest.vercel.app/stops/".concat(i,"?language=de"),e.next=32,fetch(o);case 32:return l=e.sent,e.next=35,l.json();case 35:return d=e.sent,e.next=38,d;case 38:p=e.sent,f=p.name,ve("/departures/".concat(i)),D(d),we(i,f,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(f):"Departures from ".concat(f),a([d]),e.next=51;break;case 48:e.prev=48,e.t1=e.catch(27),console.debug(e.t1);case 51:e.next=77;break;case 53:return e.prev=53,g="https://vbb-rest.vercel.app/stops/".concat(h="900100011","?language=de"),e.next=58,fetch(g);case 58:return Z=e.sent,e.next=61,Z.json();case 61:return b=e.sent,e.next=64,b;case 64:v=e.sent,m=v.name,ve("/departures/".concat(h)),D(b),we(h,m,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(m):"Departures from ".concat(m),a([b]),e.next=77;break;case 74:e.prev=74,e.t2=e.catch(53),console.debug(e.t2);case 77:case"end":return e.stop()}}),e,null,[[1,21],[27,48],[53,74]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var me=(0,r.useRef)(null),xe=(0,r.useRef)(null),ye=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t){var n,r,s,c,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,!(n.length>=3)){e.next=14;break}return r="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),e.next=6,fetch(r);case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,i=[R].concat((0,o.Z)(c)),a(i),e.next=15;break;case 14:a([R]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.debug(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t){var n,r,a,s,c,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,e.prev=1,r={id:"0",name:"\u2e3a",type:""},!(n.length>=3)){e.next=15;break}return a="https://vbb-rest.vercel.app/locations?query=".concat(n,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),e.next=7,fetch(a);case 7:return s=e.sent,e.next=10,s.json();case 10:c=e.sent,i="0"!==N.id?[r,N].concat((0,o.Z)(c)):[r].concat((0,o.Z)(c)),k(i),e.next=16;break;case 15:"0"!==N.id?k([r,N]):k([r]);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.debug(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(e){return e.startsWith("Berlin")||e.includes("(Berlin)")||e.includes("Berlin Hauptbahnhof")?"BLN":"BBG"},we=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(t,n,r){var a,s,c,i,o,l,d,p,f,g,Z,b,v;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Se(n),s=(0,h.g)(a),c="de",i=navigator.language,c=i.startsWith("de")?"de":"en",o=r.direction?"0"!==r.direction?parseInt(r.direction,10):null:"0"!==N.id?parseInt(N.id,10):null,l="number"===typeof o?"&direction=".concat(o):"",d="https://vbb-rest.vercel.app/stops/".concat(t,"/departures?language=").concat(c,"&duration=").concat(s,"&express=").concat("boolean"===typeof r.express?r.express.toString():U.toString(),"&regional=").concat("boolean"===typeof r.regional?r.regional.toString():Q.toString(),"&suburban=").concat("boolean"===typeof r.suburban?r.suburban.toString():_.toString(),"&subway=").concat("boolean"===typeof r.subway?r.subway.toString():re.toString(),"&tram=").concat("boolean"===typeof r.tram?r.tram.toString():ie.toString(),"&bus=").concat("boolean"===typeof r.bus?r.bus.toString():de.toString(),"&ferry=").concat("boolean"===typeof r.ferry?r.ferry.toString():ge.toString()).concat(l),e.next=11,fetch(d);case 11:return p=e.sent,e.next=14,p;case 14:return f=e.sent,g=f.status,e.next=18,p.json();case 18:Z=e.sent,500===g||200!==g?(I("HTTP status code: ".concat(g)),z([])):(b=Z.departures,v=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),document.title="de"===c?"Abfahrten ab ".concat(n):"Departures from ".concat(n),H(v),z(b),I(null)),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.debug(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,c.BX)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[me&&(0,c.tZ)(g.Z,{filterStops:ye,inputField:me}),(0,c.tZ)(Z.Z,{handleChange:function(e){D(e);var t=e.id,n=e.name;we(t,n,{direction:"0"}),me.current.value=""},selection:n,stop:R,mode:"dep"}),(0,c.tZ)(b.Z,{handleSubmit:function(){we(R.id,R.name,{}),me.current.value=""}}),(0,c.BX)("div",{children:[(0,c.tZ)("span",{sx:{display:"inline-block",mr:"0.2rem",fontStyle:"italic",fontWeight:700},children:"via"}),(0,c.tZ)(g.Z,{filterStops:ke,inputField:xe}),(0,c.tZ)(v.Z,{handleChange:function(e){"0"!==e.id?(C(e),we(R.id,R.name,{direction:e.id})):(C({id:"0",name:"\u2e3a",type:""}),we(R.id,R.name,{direction:"0"})),xe.current.value=""},selection:y,stop:N})]}),(0,c.tZ)(m.Z,{products:[U,Q,_,re,ie,de,ge],productSetters:[J,V,ee,ae,oe,pe,Ze],getData:function(e){return we(R.id,R.name,e)}}),(0,c.tZ)(x.Z,{stop:R,data:O,error:q,date:F,mode:"dep"})]})}var k=n(184);var S=function(){return(0,k.jsxs)("div",{children:[(0,k.jsx)(i,{}),(0,k.jsx)(y,{})]})}}}]);
//# sourceMappingURL=964.0b3c0b83.chunk.js.map