"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[522],{7522:function(n,t,r){r.r(t),r.d(t,{getDelay:function(){return v},getPlanTime:function(){return y},getTime:function(){return Z}});var e=r(9439),a=r(2791),i=r(4373),c=r(9922),u=(0,a.lazy)((function(){return r.e(599).then(r.bind(r,8705))})),o=(0,a.lazy)((function(){return r.e(305).then(r.bind(r,6305))})),l=(0,a.lazy)((function(){return r.e(272).then(r.bind(r,5272))})),s=(0,a.lazy)((function(){return r.e(48).then(r.bind(r,1048))})),d=(0,a.lazy)((function(){return Promise.resolve().then(r.bind(r,6049))})),h=(0,a.lazy)((function(){return r.e(302).then(r.bind(r,6302))})),f=(0,a.lazy)((function(){return r.e(734).then(r.bind(r,734))})),p=(0,a.lazy)((function(){return r.e(619).then(r.bind(r,619))})),m=(0,a.lazy)((function(){return r.e(776).then(r.bind(r,7776))})),b=(0,a.lazy)((function(){return r.e(558).then(r.bind(r,4558))})),g=(0,a.lazy)((function(){return r.e(525).then(r.bind(r,1525))})),v=function(n,t){if(null!=n){var r=Math.abs(n/60);return Math.round(r)}return t?"X":"?"},y=function(n,t){var r=Number(n.substring(0,2)),e=Number(n.substring(3,5));(e-=t)<0&&(e+=60,r-=1),e>59&&(e-=60,r+=1),r<0&&(r+=24),r>23&&(r-=24);var a=r<10?"0".concat(r):"".concat(r),i=e<10?"0".concat(e):"".concat(e);return"".concat(a,":").concat(i)},Z=function(n){return null!=n?n.substring(11,16):""};t.default=function(n){var t,r,k=(0,a.useState)(null),x=(0,e.Z)(k,2),z=x[0],C=x[1],M=(0,a.useState)(void 0),w=(0,e.Z)(M,2),N=w[0],B=w[1],P=function(n){var t=4*Math.atan(1),r=n.currentTripPosition,e=n.stop;if(r){var a=r.latitude,i=r.longitude;fetch("https://vbb-rest.vercel.app/locations/nearby?latitude=".concat(a,"&longitude=").concat(i,"&results=10&language=de")).then((function(n){return n.json()})).then((function(t){return t.filter((function(t){return!0===t.products[n.line.product]}))})).then((function(n){n.length>0&&n[0].name&&C(n[0].name)}));var c=e.location,u=t*a/180,o=t*c.latitude/180,l=t*(i-c.longitude)/180,s=Math.sin(u)*Math.sin(o)+Math.cos(u)*Math.cos(o)*Math.cos(l);return 60*(180*Math.acos(s)/t)*1.1515}return null}(n.arr);((0,a.useEffect)((function(){fetch("https://vbb-rest.vercel.app/trips/".concat(n.arr.tripId,"?language=de")).then((function(n){return n.json()})).then((function(n){return B(n.trip)}))}),[]),"number"===typeof(t=n.arr.cancelled?v(n.arr.delay,n.arr.cancelled):v(n.arr.delay,!1)))?r="".concat(t<0?"\u2013":t>0?"+":"\xb1").concat(t):r=t;var T,X=Z(n.arr.when);null!=n.arr.when&&null!=n.arr.delay?T=y(X,Number(t)):null!=n.arr.when&&"?"===t?(T=X,X=""):T=Z(n.arr.formerScheduledWhen)||Z(n.arr.scheduledWhen)||Z(n.arr.plannedWhen);var A=n.arr,I=A.line,W=A.provenance,S=A.remarks,j=A.platform;return(0,c.BX)(a.Fragment,{children:[(0,c.BX)("div",{className:"row",sx:{display:"grid",gridTemplateColumns:["repeat(24,1fr)","repeat(24,1fr)","repeat(26,1fr)"]},children:[(0,c.tZ)(l,{time:T,class:"plantime"}),(0,c.tZ)(l,{time:X,class:"realtime"}),(0,c.tZ)("div",{className:"delay",sx:{textAlign:["center","center","right"],gridColumn:["17 / span 8","5 / span 2"]},children:r}),(0,c.tZ)(s,{line:I}),(0,c.tZ)(d,{line:I}),(0,c.tZ)("div",{className:"direction",sx:{textAlign:"left",gridColumn:["8 / span 13","11 / span 8"]},children:W}),(0,c.tZ)("div",{className:"platform",sx:{textAlign:"center",gridColumn:["22 / span 3","19 / span 2"]},children:j}),(0,c.tZ)(h,{remarks:S}),(0,c.tZ)(f,{remarks:S}),(0,c.tZ)(p,{remarks:S}),(0,c.tZ)(m,{remarks:S}),(0,c.tZ)(u,{operator:I.operator})]},n.arr.tripId),(0,c.BX)("div",{className:"row row-add",sx:{display:"grid",gridTemplateColumns:"repeat(24, 1fr)",borderBottom:["1px solid #ccc","1px solid #ccc","none"]},children:[z&&P&&(0,c.tZ)(i.r,{position:z,distance:P}),N&&(0,c.tZ)(o,{trip:N,stopId:n.arr.stop.id,mode:"arr"}),(0,c.tZ)(b,{remarks:S}),(0,c.tZ)(g,{remarks:S})]},"add:".concat(n.arr.tripId))]})}},4373:function(n,t,r){r.d(t,{r:function(){return a}});var e=r(9922);function a(n){var t=n.position,r=n.distance;return t&&r?(0,e.BX)("div",{sx:{gridColumn:"1 / 25"},children:[navigator.language.startsWith("de")?"Aktuelle Position: ":"Current Position: ",(0,e.tZ)("span",{children:t})," ","(",r.toFixed(3)," km)"]}):(0,e.tZ)("div",{})}}}]);
//# sourceMappingURL=522.d36020e9.chunk.js.map