"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[985],{2985:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(4165),a=n(5861),i=n(2982),o=n(885),u=n(2791),c=n(7689),l=n(5918),s=n(1044),d=n(2530),f=n(5042),v=n(184),h=(0,u.lazy)((function(){return n.e(307).then(n.bind(n,4307))})),m=(0,u.lazy)((function(){return n.e(313).then(n.bind(n,6313))})),p=(0,u.lazy)((function(){return n.e(90).then(n.bind(n,3090))})),g=(0,u.lazy)((function(){return n.e(953).then(n.bind(n,953))})),Z=(0,u.lazy)((function(){return n.e(88).then(n.bind(n,8088))}));function w(){var e=(0,l.Rh)("selection",f.Z),t=(0,o.Z)(e,2),n=t[0],w=t[1],b=(0,l.Rh)("stop",{id:"",name:"",type:""}),y=(0,o.Z)(b,2),C=y[0],k=y[1],R=(0,l.Rh)("data",[]),L=(0,o.Z)(R,2),x=L[0],O=L[1],S=(0,l.Rh)("date",""),j=(0,o.Z)(S,2),A=j[0],z=j[1],P=(0,l.Rh)("viewData",[]),D=(0,o.Z)(P,2),U=D[0],B=D[1],E=(0,l.Rh)("error",null),W=(0,o.Z)(E,2),F=W[0],T=W[1],G=(0,c.UO)(),H=(0,c.s0)();(0,u.useEffect)((function(){if(G.hasOwnProperty("id")&&"string"===typeof G.id&&G.id.length>0){var e=f.Z.filter((function(e){return e.id===G.id}))[0];H("/arrivals/".concat(G.id)),k(e),Q(G.id);var t=f.Z.filter((function(t){return t.name!==e.name}));document.title=navigator.language.startsWith("de")?"Ank\xfcnfte an ".concat(e.name):"Arrivals at ".concat(e.name);var n=[e].concat((0,i.Z)(t));w(n)}else{var r=f.Z.filter((function(e){return"U Stadtmitte"===e.name})),a=(0,o.Z)(r,1)[0],u=a.id;H("/arrivals/".concat(u)),k(a),Q(u);var c=f.Z.filter((function(e){return e.name!==a.name}));document.title=navigator.language.startsWith("de")?"Ank\xfcnfte an U Stadtmitte":"Arrivals at U Stadtmitte";var l=[a].concat((0,i.Z)(c));w(l)}}),[]);var N=(0,u.useRef)(null),q=(0,u.useRef)(null),I=(0,u.useRef)(null),J=function(e){var t=x.filter((function(t){var n=!1;if(t.hasOwnProperty("provenance")&&t.provenance)for(var r=0;r<e.length;r++)if(t.line.name.toLowerCase().includes(e[r].toLowerCase())||t.provenance.toLowerCase().includes(e[r].toLowerCase())){n=!0;break}return n}));B(t)},K=function(e){var t=x.filter((function(t){var n=!0;if(t.hasOwnProperty("provenance")&&t.provenance)for(var r=0;r<e.length;r++)if(!t.line.name.toLowerCase().includes(e[r].toLowerCase())&&!t.provenance.toLowerCase().includes(e[r].toLowerCase())){n=!1;break}return n}));B(t)},M=function(){B(x)},Q=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i,u,c,l,v,h,m,p,g,Z,w,b;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.Z.filter((function(e){return e.id===t})),a=(0,o.Z)(n,1),i=a[0],u=i.type,c=void 0===u?"BBG":u,l=(0,d.g)(c),v="de",h=navigator.language,v=h.startsWith("de")?"de":"en",m="https://sklinkusch-vbbmicro.vercel.app/?station=".concat(t,"&duration=").concat(l,"&mode=arr&language=").concat(v),e.next=10,s.ZP.get(m);case 10:return p=e.sent,e.next=13,p;case 13:g=e.sent,Z=g.data,500===(w=g.status)||200!==w?(T("HTTP status code: ".concat(w)),O([])):(b=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),document.title="de"===v?"Ank\xfcnfte an ".concat(i.name):"Arrivals at ".concat(i.name),z(b),O(Z),B(Z),T(null));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"timetable",children:[(0,v.jsx)(h,{filterStops:function(e){!function(e){var t=f.Z.filter((function(t){return t.id!==C.id&&t.name.toLowerCase().includes(e.toLowerCase())})),n=[C].concat((0,i.Z)(t));w(n)}(e.target.value)},inputField:N}),(0,v.jsx)(m,{handleChange:function(e){k(e);var t=e.id;Q(t),N.current.value="",q.current.value="",I.current.value="OR"},selection:n,stop:C,mode:"arr"}),(0,v.jsx)(p,{handleSubmit:function(){Q(C.id),N.current.value="",q.current.value="",I.current.value="OR"}}),(0,v.jsx)(g,{filterField:q,filterSelector:I,filterData:function(){var e=q.current.value.split(" "),t=I.current.value;e.length>0?"OR"===t?J(e):K(e):M()},mode:"arr"}),(0,v.jsx)(Z,{stop:C,data:U,error:F,date:A,mode:"arr"})]})}}}]);
//# sourceMappingURL=985.e55036e9.chunk.js.map