"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[764],{2764:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y,getDelay:()=>y,getPlanTime:()=>f,getTime:()=>v});var a=r(5043),n=r(8408),l=r(7483);const s=(0,a.lazy)((()=>r.e(468).then(r.bind(r,4690)))),i=(0,a.lazy)((()=>r.e(824).then(r.bind(r,8824)))),c=(0,a.lazy)((()=>r.e(260).then(r.bind(r,5260)))),o=(0,a.lazy)((()=>r.e(214).then(r.bind(r,9214)))),d=(0,a.lazy)((()=>Promise.resolve().then(r.bind(r,9434)))),u=(0,a.lazy)((()=>r.e(336).then(r.bind(r,3336)))),h=(0,a.lazy)((()=>r.e(740).then(r.bind(r,3740)))),p=(0,a.lazy)((()=>r.e(500).then(r.bind(r,3500)))),m=(0,a.lazy)((()=>r.e(966).then(r.bind(r,7966)))),b=(0,a.lazy)((()=>r.e(976).then(r.bind(r,1976)))),g=(0,a.lazy)((()=>r.e(392).then(r.bind(r,2392)))),y=(e,t)=>{if(null!=e){const t=Math.abs(e/60);return Math.round(t)}return t?"X":"?"},f=(e,t,r)=>{let a=Number(e.substring(0,2)),n=Number(e.substring(3,5));n="+"===r?n-t:"\u2013"===r?n+t:n,n<0&&(n+=60,a-=1),n>59&&(n-=60,a+=1),a<0&&(a+=24),a>23&&(a-=24);let l=a<10?"0".concat(a):"".concat(a),s=n<10?"0".concat(n):"".concat(n);return"".concat(l,":").concat(s)},v=e=>null!=e?e.substring(11,16):"",Y=e=>{const[t,r]=(0,a.useState)(null),[Y,k]=(0,a.useState)(void 0),[x,z]=(0,a.useState)(null);(0,a.useEffect)((()=>{(()=>{const t=4*Math.atan(1),{currentTripPosition:a,stop:n}=e.arr;if(a){const{latitude:e,longitude:l}=a;fetch("https://vbb-rest.vercel.app/locations/nearby?latitude=".concat(e,"&longitude=").concat(l,"&results=1&language=de")).then((e=>e.json())).then((e=>{e.length>0&&e[0].name&&r(e[0])})).catch((e=>console.debug(e)));const{location:s}=n,{latitude:i,longitude:c}=s,o=t*e/180,d=t*i/180,u=t*(l-c)/180,h=Math.sin(o)*Math.sin(d)+Math.cos(o)*Math.cos(d)*Math.cos(u),p=Math.acos(h);z(60*(180*p/t)*1.1515)}})()}),[]),(0,a.useEffect)((()=>{fetch("https://vbb-rest.vercel.app/trips/".concat(e.arr.tripId,"?language=de")).then((e=>e.json())).then((e=>k(e.trip))).catch((e=>console.debug(e)))}),[]);const C=e.arr.cancelled?y(e.arr.delay,e.arr.cancelled):y(e.arr.delay,!1);let M,w;"number"===typeof e.arr.delay&&"number"===typeof C?(w=e.arr.delay<0?"\u2013":e.arr.delay>0?"+":"\xb1",M="".concat(w).concat(C)):(M=C,w="\xb1");let N,F=v(e.arr.when);null!=e.arr.when&&null!=e.arr.delay?N=f(F,Number(C),w):null!=e.arr.when&&"?"===C?(N=F,F=""):N=v(e.arr.formerScheduledWhen)||v(e.arr.scheduledWhen)||v(e.arr.plannedWhen);const{line:D,provenance:P,remarks:T,platform:A}=e.arr;return(0,l.FD)(a.Fragment,{children:[(0,l.FD)("div",{className:"row",sx:{display:"grid",gridTemplateColumns:["repeat(24,1fr)","repeat(24,1fr)","repeat(26,1fr)"]},children:[(0,l.Y)(c,{time:N,class:"plantime"}),(0,l.Y)(c,{time:F,class:"realtime"}),(0,l.Y)("div",{className:"delay",sx:{textAlign:["center","center","right"],gridColumn:["17 / span 8","5 / span 2"]},children:M}),(0,l.Y)(o,{line:D}),(0,l.Y)(d,{line:D}),(0,l.Y)("div",{className:"direction",sx:{textAlign:"left",gridColumn:["8 / span 13","11 / span 8"]},children:P}),(0,l.Y)("div",{className:"platform",sx:{textAlign:"center",gridColumn:["22 / span 3","19 / span 2"]},children:A}),(0,l.Y)(u,{remarks:T}),(0,l.Y)(h,{remarks:T}),(0,l.Y)(p,{remarks:T}),(0,l.Y)(m,{remarks:T}),D.operator?(0,l.Y)(s,{operator:D.operator}):(0,l.Y)("div",{})]},e.arr.tripId),(0,l.FD)("div",{className:"row row-add",sx:{display:"grid",gridTemplateColumns:"repeat(24, 1fr)",borderBottom:["1px solid #ccc","1px solid #ccc","none"]},children:[t&&x&&(0,l.Y)(n.K,{position:t,distance:x}),Y&&(0,l.Y)(i,{trip:Y,stopId:e.arr.stop.id,mode:"arr"}),(0,l.Y)(b,{remarks:T}),(0,l.Y)(g,{remarks:T})]},"add:".concat(e.arr.tripId))]})}},8408:(e,t,r)=>{r.d(t,{K:()=>n});var a=r(7483);function n(e){let{position:t,distance:r}=e;return t&&r?(0,a.FD)("div",{sx:{gridColumn:"1 / 25"},children:[navigator.language.startsWith("de")?"Aktuelle Position: ":"Current Position: ",(0,a.Y)("span",{children:t.name})," ","(",r.toFixed(3)," km)"]}):(0,a.Y)("div",{})}}}]);
//# sourceMappingURL=764.97647913.chunk.js.map