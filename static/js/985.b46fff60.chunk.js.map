{"version":3,"file":"static/js/985.b46fff60.chunk.js","mappings":"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","sources":["components/TimetableArr/TimetableArr.tsx","components/helpers/helpers.ts"],"sourcesContent":["import React, { useRef, useEffect, lazy } from \"react\"\nimport { useParams, useNavigate } from \"react-router-dom\"\nimport { useDebugState } from \"use-named-state\"\nimport axios from \"axios\"\nimport { getDuration } from \"../helpers/helpers\"\nconst Input = lazy(() => import(\"../Input/Input\"))\nconst Select = lazy(() => import(\"../Select/Select\"))\nconst Button = lazy(() => import(\"../Button/Button\"))\nconst Filter = lazy(() => import(\"../Filter/Filter\"))\nconst StopBody = lazy(() => import(\"../StopBody/StopBody\"))\n/* eslint-disable react-hooks/exhaustive-deps */\n\ntype Location = {\n\ttype: \"location\"\n\tlatitude: number\n\tlongitude: number\n}\n\ntype Remarks = {\n\tcode: string | undefined\n\tsummary: string | null | undefined\n\ttext: string\n\ttype: string\n\tvalidFrom: string | undefined\n\tvalidUntil: string | undefined\n}[]\n\ntype LINE_A = {\n\tcolor: {\n\t\tfg: string\n\t\tbg: string\n\t}\n\texpress: boolean\n\tfahrtNr: string\n\tid: string\n\tmetro: boolean\n\tmode: string\n\tname: string\n\tnight: boolean\n\tnr: number\n\tproduct: \"regional\" | \"suburban\" | \"subway\"\n\ttype: string\n}\n\ntype LINE_B = {\n\texpress: boolean\n\tfahrtNr: string\n\tid: string\n\tmetro: boolean\n\tmode: string\n\tname: string\n\tnight: boolean\n\tnr: number\n\tproduct: \"express\" | \"tram\" | \"bus\" | \"ferry\"\n\ttype: string\n}\n\ntype Dataset = {\n\tcancelled: boolean | undefined\n\tcurrentTripPosition: Location\n\tdelay: number | null\n\tdirection: string | null\n\tformerScheduledWhen?: string\n\tline: LINE_A | LINE_B\n\tplannedPlatform?: string\n\tplannedWhen?: string\n\tplatform?: number | string\n\tprognosedPlatform?: string\n\tprognosisType: string | null | undefined\n\tprovenance: string | null\n\tremarks: Remarks\n\tscheduledWhen?: string\n\tstop: {\n\t\tid: string\n\t\tname: string\n\t\tlocation: Location\n\t}\n\ttripId: string\n\twhen?: string\n}\n\ntype Stop = {\n\tid: string\n\tname: string\n\ttype?: string\n}\n\ntype Data = Dataset[]\n\nexport default function TimetableArr() {\n\tconst [selection, setSelection] = useDebugState<Stop[]>(\"selection\", [])\n\tconst [stop, setStop] = useDebugState<Stop>(\"stop\", {\n\t\tid: \"\",\n\t\tname: \"\",\n\t\ttype: \"\",\n\t})\n\tconst [data, setData] = useDebugState<Data>(\"data\", [])\n\tconst [date, setDate] = useDebugState<string>(\"date\", \"\")\n\tconst [viewData, setViewData] = useDebugState<Data>(\"viewData\", [])\n\tconst [error, setError] = useDebugState<any>(\"error\", null)\n\tconst params = useParams()\n\tconst navigate = useNavigate()\n\tuseEffect(() => {\n\t\tasync function findInitialStop() {\n\t\t\tif (\n\t\t\t\tparams.hasOwnProperty(\"id\") &&\n\t\t\t\ttypeof params.id === \"string\" &&\n\t\t\t\tparams.id.length === 9\n\t\t\t) {\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`https://station-api-jade.vercel.app/?id=${params.id}`\n\t\t\t\t)\n\t\t\t\tconst station = await response.json()\n\t\t\t\tconst { name } = await station\n\t\t\t\tnavigate(`/arrivals/${params.id}`)\n\t\t\t\tsetStop(station)\n\t\t\t\tgetData(params.id, name)\n\t\t\t\tdocument.title = navigator.language.startsWith(\"de\")\n\t\t\t\t\t? `Ankünfte an ${name}`\n\t\t\t\t\t: `Arrivals at ${name}`\n\t\t\t\tconst stopSelection = [station]\n\t\t\t\tsetSelection(stopSelection)\n\t\t\t} else if (\n\t\t\t\tparams.hasOwnProperty(\"id\") &&\n\t\t\t\ttypeof params.id === 'string' &&\n\t\t\t\tparams.id.length === 12\n\t\t\t) {\n\t\t\t\tconst modifiedId = `${params.id.slice(0,1)}${params.id.slice(-8)}`\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`https://station-api-jade.vercel.app/?id=${modifiedId}`\n\t\t\t\t)\n\t\t\t\tconst station = await response.json()\n\t\t\t\tconst { name } = await station\n\t\t\t\tnavigate(`/arrivals/${modifiedId}`)\n\t\t\t\tsetStop(station)\n\t\t\t\tgetData(modifiedId, name)\n\t\t\t\tdocument.title = navigator.language.startsWith(\"de\")\n\t\t\t\t\t? `Ankünfte an ${name}`\n\t\t\t\t\t: `Arrivals at ${name}`\n\t\t\t\tconst stopSelection = [station]\n\t\t\t\tsetSelection(stopSelection)\n\t\t\t} else {\n\t\t\t\tconst initialId = \"900100011\"\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`https://station-api-jade.vercel.app/?id=${initialId}`\n\t\t\t\t)\n\t\t\t\tconst station = await response.json()\n\t\t\t\tconst { name: initialName } = await station\n\t\t\t\tnavigate(`/arrivals/${initialId}`)\n\t\t\t\tsetStop(station)\n\t\t\t\tgetData(initialId, initialName)\n\t\t\t\tdocument.title = navigator.language.startsWith(\"de\")\n\t\t\t\t\t? `Ankünfte an ${initialName}`\n\t\t\t\t\t: `Arrivals at ${initialName}`\n\t\t\t\tconst stopSelection = [station]\n\t\t\t\tsetSelection(stopSelection)\n\t\t\t}\n\t\t}\n\t\tfindInitialStop()\n\t}, [])\n\tconst inputField = useRef<HTMLInputElement>(null)\n\tconst filterField = useRef<HTMLInputElement>(null)\n\tconst filterSelector = useRef<HTMLSelectElement>(null)\n\tconst filterData = () => {\n\t\tconst fieldCurrent = filterField.current as HTMLInputElement\n\t\tconst { value: fieldValue } = fieldCurrent\n\t\tconst filterValues = fieldValue.split(\" \")\n\t\tconst selectorCurrent = filterSelector.current as HTMLSelectElement\n\t\tconst { value: filterMode } = selectorCurrent\n\t\tif (filterValues.length > 0) {\n\t\t\tif (filterMode === \"OR\") {\n\t\t\t\tfilterOr(filterValues)\n\t\t\t} else {\n\t\t\t\tfilterAnd(filterValues)\n\t\t\t}\n\t\t} else {\n\t\t\tnoFilters()\n\t\t}\n\t}\n\tconst filterOr = (filterValues: string[]) => {\n\t\tconst filteredData = data.filter((arrival) => {\n\t\t\tlet decider = false\n\t\t\tif (arrival.hasOwnProperty(\"provenance\") && arrival.provenance) {\n\t\t\t\tfor (let i = 0; i < filterValues.length; i++) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tarrival.line.name\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.includes(filterValues[i].toLowerCase()) ||\n\t\t\t\t\t\tarrival.provenance\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.includes(filterValues[i].toLowerCase())\n\t\t\t\t\t) {\n\t\t\t\t\t\tdecider = true\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn decider\n\t\t})\n\t\tsetViewData(filteredData)\n\t}\n\tconst filterAnd = (filterValues: string[]) => {\n\t\tconst filteredData = data.filter((arrival) => {\n\t\t\tlet decider = true\n\t\t\tif (arrival.hasOwnProperty(\"provenance\") && arrival.provenance) {\n\t\t\t\tfor (let i = 0; i < filterValues.length; i++) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tarrival.line.name\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.includes(filterValues[i].toLowerCase()) ||\n\t\t\t\t\t\tarrival.provenance\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.includes(filterValues[i].toLowerCase())\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdecider = false\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn decider\n\t\t})\n\t\tsetViewData(filteredData)\n\t}\n\tconst noFilters = () => {\n\t\tsetViewData(data)\n\t}\n\tconst getStopSelection = async (event: {\n\t\tkey: string\n\t\ttarget: { value: string }\n\t}) => {\n\t\tconst searchValue = event.target.value\n\t\tif (searchValue.length > 4) {\n\t\t\tconst response = await fetch(\n\t\t\t\t`https://station-api-jade.vercel.app/?station=${searchValue}`\n\t\t\t)\n\t\t\tconst data = await response.json()\n\t\t\tconst newData = [stop, ...data]\n\t\t\tsetSelection(newData)\n\t\t} else {\n\t\t\tsetSelection([stop])\n\t\t}\n\t}\n\tconst setCurrStop = (currStop: Stop) => {\n\t\tsetStop(currStop)\n\t}\n\tconst getData = async (id: string, name: string) => {\n\t\tconst type = name.startsWith(\"Berlin\") ? \"BLN\" : \"BBG\"\n\t\tconst duration = getDuration(type)\n\t\tlet lang = \"de\"\n\t\tconst browserLang = navigator.language\n\t\tif (browserLang.startsWith(\"de\")) {\n\t\t\tlang = \"de\"\n\t\t} else {\n\t\t\tlang = \"en\"\n\t\t}\n\t\t// const url =\n\t\t// `https://sklinkusch-vbbmicro.vercel.app/?station=${id}&duration=${duration}&mode=arr&language=${lang}`\n\t\tconst url = `https://v6.vbb.transport.rest/stops/${id}/arrivals?language=${lang}&duration=${duration}`\n\t\tconst response = await axios.get(url)\n\t\tconst { data: resData, status } = await response\n\t\tif (status === 500 || status !== 200) {\n\t\t\tsetError(`HTTP status code: ${status}`)\n\t\t\tsetData([])\n\t\t} else {\n\t\t\tconst myDate = new Date().toLocaleString(\"de-DE\", {\n\t\t\t\tyear: \"numeric\",\n\t\t\t\tmonth: \"2-digit\",\n\t\t\t\tday: \"2-digit\",\n\t\t\t\thour: \"2-digit\",\n\t\t\t\tminute: \"2-digit\",\n\t\t\t\ttimeZone: \"Europe/Berlin\",\n\t\t\t})\n\t\t\tconst { arrivals } = resData\n\t\t\tdocument.title =\n\t\t\t\tlang === \"de\" ? `Ankünfte an ${name}` : `Arrivals at ${name}`\n\t\t\tsetDate(myDate)\n\t\t\tsetData(arrivals)\n\t\t\tsetViewData(arrivals)\n\t\t\tsetError(null)\n\t\t}\n\t}\n\tconst handleChange = (currentStop: Stop) => {\n\t\tsetCurrStop(currentStop)\n\t\tconst { id: myStopId, name: currentStopName } = currentStop\n\t\tgetData(myStopId, currentStopName)\n\t\tconst inputCurrent = inputField.current as HTMLInputElement\n\t\tinputCurrent.value = \"\"\n\t\tconst filterFieldCurrent = filterField.current as HTMLInputElement\n\t\tfilterFieldCurrent.value = \"\"\n\t\tconst filterSelectorCurrent = filterSelector.current as HTMLSelectElement\n\t\tfilterSelectorCurrent.value = \"OR\"\n\t}\n\tconst handleSubmit = () => {\n\t\tgetData(stop.id, stop.name)\n\t\tconst inputCurrent = inputField.current as HTMLInputElement\n\t\tinputCurrent.value = \"\"\n\t\tconst filterFieldCurrent = filterField.current as HTMLInputElement\n\t\tfilterFieldCurrent.value = \"\"\n\t\tconst filterSelectorCurrent = filterSelector.current as HTMLSelectElement\n\t\tfilterSelectorCurrent.value = \"OR\"\n\t}\n\t// useEffect(() => {\n\t//   getData(stop);\n\t// }, []);\n\treturn (\n\t\t<div className=\"timetable\">\n\t\t\t<Input filterStops={getStopSelection} inputField={inputField} />\n\t\t\t<Select\n\t\t\t\thandleChange={handleChange}\n\t\t\t\tselection={selection}\n\t\t\t\tstop={stop}\n\t\t\t\tmode=\"arr\"\n\t\t\t/>\n\t\t\t<Button handleSubmit={handleSubmit} />\n\t\t\t<Filter\n\t\t\t\tfilterField={filterField}\n\t\t\t\tfilterSelector={filterSelector}\n\t\t\t\tfilterData={filterData}\n\t\t\t\tmode=\"arr\"\n\t\t\t/>\n\t\t\t<StopBody\n\t\t\t\tstop={stop}\n\t\t\t\tdata={viewData}\n\t\t\t\terror={error}\n\t\t\t\tdate={date}\n\t\t\t\tmode=\"arr\"\n\t\t\t/>\n\t\t</div>\n\t)\n}\n","export function getDuration(type: string) {\n  switch (type) {\n    case \"BLN\":\n      return getBlnDuration();\n    case \"BHF\":\n      return getBhfDuration();\n    default:\n      break;\n  }\n}\nfunction getBlnDuration() {\n  const { isItHoliday, isItSaturday, hour } = getDate();\n  let duration = 60;\n  if (isItHoliday) {\n    if (hour < 7) {\n      duration = 60;\n    } else if (hour < 8) {\n      duration = 60;\n    } else if (hour < 20) {\n      duration = 40;\n    } else if (hour < 22) {\n      duration = 60;\n    } else {\n      duration = 60;\n    }\n  } else if (isItSaturday) {\n    if (hour < 6) {\n      duration = 60;\n    } else if (hour < 7) {\n      duration = 40;\n    } else if (hour < 21) {\n      duration = 30;\n    } else if (hour < 23) {\n      duration = 40;\n    } else {\n      duration = 60;\n    }\n  } else {\n    if (hour < 5) {\n      duration = 60;\n    } else if (hour < 7) {\n      duration = 30;\n    } else if (hour < 20) {\n      duration = 20;\n    } else if (hour < 22) {\n      duration = 30;\n    } else {\n      duration = 60;\n    }\n  }\n  return duration;\n}\n\nfunction getBhfDuration() {\n  const { isItHoliday, isItSaturday, hour } = getDate();\n  let duration = 60;\n  if (isItHoliday || isItSaturday) {\n    if (hour < 5) {\n      duration = 60;\n    } else if (hour < 6) {\n      duration = 30;\n    } else if (hour < 7) {\n      duration = 20;\n    } else if (hour < 22) {\n      duration = 10;\n    } else if (hour < 23) {\n      duration = 20;\n    } else {\n      duration = 30;\n    }\n  } else {\n    if (hour < 5) {\n      duration = 30;\n    } else if (hour < 6) {\n      duration = 20;\n    } else if (hour < 7) {\n      duration = 10;\n    } else if (hour < 22) {\n      duration = 5;\n    } else if (hour < 23) {\n      duration = 10;\n    } else {\n      duration = 20;\n    }\n  }\n  return duration;\n}\n\nconst isSunday = (weekday: number) => {\n  if (weekday === 0) {\n    return true;\n  }\n  return false;\n};\nconst isHoliday = (day: number, month: number, year: number) => {\n  if (day === 1 && month === 1) {\n    return true;\n  }\n  if (day === 8 && month === 3) {\n    return true;\n  }\n  if (day === 1 && month === 5) {\n    return true;\n  }\n  if (day === 3 && month === 10) {\n    return true;\n  }\n  if (month === 12 && (day === 25 || day === 26)) {\n    return true;\n  }\n  let movableHolidays = false;\n  const holidays = easterDate(year);\n  holidays.forEach(holiday => {\n    if (day === holiday[0] && month === holiday[1]) {\n      movableHolidays = true;\n    }\n  });\n  if (movableHolidays) {\n    return true;\n  }\n  return false;\n};\nfunction isSaturday(weekday: number) {\n  if (weekday === 6) {\n    return true;\n  }\n  return false;\n}\nconst gauss = (number: number) => {\n  if (number > 0) {\n    return Number(number.toFixed(0));\n  } else if (number < 0) {\n    return Number((number - 1).toFixed(0));\n  } else {\n    return 0;\n  }\n};\n\nexport function leap(year: number) {\n  if (year % 400 === 0) {\n    return true;\n  } else if (year % 100 === 0) {\n    return false;\n  } else if (year % 4 === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nconst easterDate = (year: number) => {\n  // Gaussian calculus\n  // some constants\n  const g = year % 19;\n  const c = gauss(year / 100);\n  const a = gauss(c / 4);\n  const d = gauss((8 * c + 13) / 25);\n  const h = (c - a - d + 19 * g + 15) % 30;\n  const f = gauss(h / 20);\n  const k = gauss(29 / (h + 1));\n  const m = gauss((21 - g) / 11);\n  const n = gauss(year / 4);\n  const i = h - f * (1 - k * m);\n  const j = (year + n + i + 2 - c + a) % 7;\n  const l = i - j;\n  const easterSundayMonth = l <= 3 ? 3 : 4;\n  const easterSundayDay = l <= 3 ? l + 28 : l - 3;\n  const goodFridayDate =\n    easterSundayDay < 3 && easterSundayMonth === 4\n      ? [easterSundayDay + 29, 3, year]\n      : [easterSundayDay - 2, easterSundayMonth, year];\n  const easterMonday =\n    easterSundayDay === 31 && easterSundayMonth === 3\n      ? [1, 4, year]\n      : [easterSundayDay + 1, easterSundayMonth, year];\n  let ascension = [];\n  if (easterSundayDay < 23 && easterSundayMonth === 3) {\n    ascension = [easterSundayDay + 8, 4, year];\n  } else if (easterSundayMonth === 3) {\n    ascension = [easterSundayDay - 22, 5, year];\n  } else if (easterSundayDay > 21 && easterSundayMonth === 4) {\n    ascension = [easterSundayDay - 22, 6, year];\n  } else {\n    ascension = [easterSundayDay + 9, 5, year];\n  }\n  let pentecostMonday = [];\n  if (ascension[1] === 4) {\n    pentecostMonday = [ascension[0] - 19, 5, year];\n  } else if (ascension[0] > 20 && ascension[1] === 5) {\n    pentecostMonday = [ascension[0] - 20, 6, year];\n  } else {\n    pentecostMonday = [ascension[0] + 10, ascension[1], year];\n  }\n  const holidays = [goodFridayDate, easterMonday, ascension, pentecostMonday];\n  return holidays;\n};\n\nfunction getDate() {\n  const nowDate = new Date();\n  const nowDateString = nowDate.toLocaleDateString(\"en-GB\", {\n    timeZone: \"Europe/Berlin\",\n    year: \"numeric\",\n    month: \"numeric\",\n    day: \"numeric\",\n    hour: \"numeric\"\n  });\n  const dateTime = nowDateString.split(\",\");\n  const dateArray = dateTime[0].split(\"/\");\n  const hour = Number(dateTime[1]);\n  const day = Number(dateArray[0]);\n  const month = Number(dateArray[1]);\n  const year = Number(dateArray[2]);\n  const nowDateLocal = new Date(year, month - 1, day);\n  const weekday = nowDateLocal.getDay();\n  const isItHoliday = isSunday(weekday) || isHoliday(day, month, year);\n  const isItSaturday = isSaturday(weekday);\n  return { isItHoliday, isItSaturday, hour };\n}\n"],"names":["Input","lazy","Select","Button","Filter","StopBody","TimetableArr","useDebugState","selection","setSelection","id","name","type","stop","setStop","data","setData","date","setDate","viewData","setViewData","error","setError","params","useParams","navigate","useNavigate","useEffect","hasOwnProperty","length","fetch","response","json","station","getData","document","title","navigator","language","startsWith","modifiedId","slice","initialId","initialName","findInitialStop","inputField","useRef","filterField","filterSelector","filterOr","filterValues","filteredData","filter","arrival","decider","provenance","i","line","toLowerCase","includes","filterAnd","noFilters","getStopSelection","event","searchValue","target","value","newData","duration","getDuration","lang","browserLang","url","axios","resData","status","myDate","Date","toLocaleString","year","month","day","hour","minute","timeZone","arrivals","className","filterStops","handleChange","currentStop","myStopId","currentStopName","current","mode","handleSubmit","filterData","split","filterMode","getDate","isItHoliday","isItSaturday","getBlnDuration","getBhfDuration","gauss","number","Number","toFixed","easterDate","g","c","a","h","l","easterSundayMonth","easterSundayDay","ascension","dateTime","toLocaleDateString","dateArray","weekday","getDay","isSunday","movableHolidays","forEach","holiday","isHoliday","isSaturday"],"sourceRoot":""}