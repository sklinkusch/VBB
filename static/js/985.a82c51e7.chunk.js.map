{"version":3,"file":"static/js/985.a82c51e7.chunk.js","mappings":"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","sources":["components/TimetableArr/TimetableArr.tsx","components/helpers/helpers.ts"],"sourcesContent":["import React, { useRef, useEffect, lazy } from \"react\"\nimport { useParams, useNavigate } from \"react-router-dom\"\nimport { useDebugState } from \"use-named-state\"\nimport axios from \"axios\"\nimport { getDuration } from \"../helpers/helpers\"\nconst Input = lazy(() => import(\"../Input/Input\"))\nconst Select = lazy(() => import(\"../Select/Select\"))\nconst Button = lazy(() => import(\"../Button/Button\"))\nconst Filter = lazy(() => import(\"../Filter/Filter\"))\nconst StopBody = lazy(() => import(\"../StopBody/StopBody\"))\n/* eslint-disable react-hooks/exhaustive-deps */\n\ntype Location = {\n\ttype: \"location\"\n\tlatitude: number\n\tlongitude: number\n}\n\ntype Remarks = {\n\tcode: string | undefined\n\tsummary: string | null | undefined\n\ttext: string\n\ttype: string\n\tvalidFrom: string | undefined\n\tvalidUntil: string | undefined\n}[]\n\ntype Operator = {\n  type: \"operator\",\n  id: string,\n  name: string\n}\n\ntype LINE_A = {\n\tcolor: {\n\t\tfg: string\n\t\tbg: string\n\t}\n\texpress: boolean\n\tfahrtNr: string\n\tid: string\n\tmetro: boolean\n\tmode: string\n\tname: string\n\tnight: boolean\n\tnr: number\n\toperator: Operator\n\tproduct: \"regional\" | \"suburban\" | \"subway\"\n\ttype: string\n}\n\ntype LINE_B = {\n\texpress: boolean\n\tfahrtNr: string\n\tid: string\n\tmetro: boolean\n\tmode: string\n\tname: string\n\tnight: boolean\n\tnr: number\n\toperator: Operator\n\tproduct: \"express\" | \"tram\" | \"bus\" | \"ferry\"\n\ttype: string\n}\n\ntype Dataset = {\n\tcancelled: boolean | undefined\n\tcurrentTripPosition: Location\n\tdelay: number | null\n\tdirection: string | null\n\tformerScheduledWhen?: string\n\tline: LINE_A | LINE_B\n\tplannedPlatform?: string\n\tplannedWhen?: string\n\tplatform?: number | string\n\tprognosedPlatform?: string\n\tprognosisType: string | null | undefined\n\tprovenance: string | null\n\tremarks: Remarks\n\tscheduledWhen?: string\n\tstop: {\n\t\tid: string\n\t\tname: string\n\t\tlocation: Location\n\t}\n\ttripId: string\n\twhen?: string\n}\n\ntype Stop = {\n\tid: string\n\tname: string\n\ttype?: string\n}\n\ntype Data = Dataset[]\n\nexport default function TimetableArr() {\n\tconst [selection, setSelection] = useDebugState<Stop[]>(\"selection\", [])\n\tconst [stop, setStop] = useDebugState<Stop>(\"stop\", {\n\t\tid: \"\",\n\t\tname: \"\",\n\t\ttype: \"\",\n\t})\n\tconst [data, setData] = useDebugState<Data>(\"data\", [])\n\tconst [date, setDate] = useDebugState<string>(\"date\", \"\")\n\tconst [viewData, setViewData] = useDebugState<Data>(\"viewData\", [])\n\tconst [error, setError] = useDebugState<any>(\"error\", null)\n\tconst params = useParams()\n\tconst navigate = useNavigate()\n\tuseEffect(() => {\n\t\tasync function findInitialStop() {\n\t\t\tif (\n\t\t\t\tparams.hasOwnProperty(\"id\") &&\n\t\t\t\ttypeof params.id === \"string\" &&\n\t\t\t\tparams.id.length === 9\n\t\t\t) {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(\n\t\t\t\t\t\t`https://station-api-jade.vercel.app/?id=${params.id}`\n\t\t\t\t\t)\n\t\t\t\t\tconst station = await response.json()\n\t\t\t\t\tconst { name } = await station\n\t\t\t\t\tnavigate(`/arrivals/${params.id}`)\n\t\t\t\t\tsetStop(station)\n\t\t\t\t\tgetData(params.id, name)\n\t\t\t\t\tdocument.title = navigator.language.startsWith(\"de\")\n\t\t\t\t\t\t? `Ankünfte an ${name}`\n\t\t\t\t\t\t: `Arrivals at ${name}`\n\t\t\t\t\tconst stopSelection = [station]\n\t\t\t\t\tsetSelection(stopSelection)\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.debug(error)\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tparams.hasOwnProperty(\"id\") &&\n\t\t\t\ttypeof params.id === 'string' &&\n\t\t\t\tparams.id.length === 12\n\t\t\t) {\n\t\t\t\ttry {\n\t\t\t\t\tconst modifiedId = `${params.id.slice(0,1)}${params.id.slice(-8)}`\n\t\t\t\t\tconst response = await fetch(\n\t\t\t\t\t\t`https://station-api-jade.vercel.app/?id=${modifiedId}`\n\t\t\t\t\t)\n\t\t\t\t\tconst station = await response.json()\n\t\t\t\t\tconst { name } = await station\n\t\t\t\t\tnavigate(`/arrivals/${modifiedId}`)\n\t\t\t\t\tsetStop(station)\n\t\t\t\t\tgetData(modifiedId, name)\n\t\t\t\t\tdocument.title = navigator.language.startsWith(\"de\")\n\t\t\t\t\t\t? `Ankünfte an ${name}`\n\t\t\t\t\t\t: `Arrivals at ${name}`\n\t\t\t\t\tconst stopSelection = [station]\n\t\t\t\t\tsetSelection(stopSelection)\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.debug(error)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tconst initialId = \"900100011\"\n\t\t\t\t\tconst response = await fetch(\n\t\t\t\t\t\t`https://station-api-jade.vercel.app/?id=${initialId}`\n\t\t\t\t\t)\n\t\t\t\t\tconst station = await response.json()\n\t\t\t\t\tconst { name: initialName } = await station\n\t\t\t\t\tnavigate(`/arrivals/${initialId}`)\n\t\t\t\t\tsetStop(station)\n\t\t\t\t\tgetData(initialId, initialName)\n\t\t\t\t\tdocument.title = navigator.language.startsWith(\"de\")\n\t\t\t\t\t\t? `Ankünfte an ${initialName}`\n\t\t\t\t\t\t: `Arrivals at ${initialName}`\n\t\t\t\t\tconst stopSelection = [station]\n\t\t\t\t\tsetSelection(stopSelection)\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.debug(error)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfindInitialStop()\n\t}, [])\n\tconst inputField = useRef<HTMLInputElement>(null)\n\tconst filterField = useRef<HTMLInputElement>(null)\n\tconst filterSelector = useRef<HTMLSelectElement>(null)\n\tconst filterData = () => {\n\t\tconst fieldCurrent = filterField.current as HTMLInputElement\n\t\tconst { value: fieldValue } = fieldCurrent\n\t\tconst filterValues = fieldValue.split(\" \")\n\t\tconst selectorCurrent = filterSelector.current as HTMLSelectElement\n\t\tconst { value: filterMode } = selectorCurrent\n\t\tif (filterValues.length > 0) {\n\t\t\tif (filterMode === \"OR\") {\n\t\t\t\tfilterOr(filterValues)\n\t\t\t} else {\n\t\t\t\tfilterAnd(filterValues)\n\t\t\t}\n\t\t} else {\n\t\t\tnoFilters()\n\t\t}\n\t}\n\tconst filterOr = (filterValues: string[]) => {\n\t\tconst filteredData = data.filter((arrival) => {\n\t\t\tlet decider = false\n\t\t\tif (arrival.hasOwnProperty(\"provenance\") && arrival.provenance) {\n\t\t\t\tfor (let i = 0; i < filterValues.length; i++) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tarrival.line.name\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.includes(filterValues[i].toLowerCase()) ||\n\t\t\t\t\t\tarrival.provenance\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.includes(filterValues[i].toLowerCase())\n\t\t\t\t\t) {\n\t\t\t\t\t\tdecider = true\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn decider\n\t\t})\n\t\tsetViewData(filteredData)\n\t}\n\tconst filterAnd = (filterValues: string[]) => {\n\t\tconst filteredData = data.filter((arrival) => {\n\t\t\tlet decider = true\n\t\t\tif (arrival.hasOwnProperty(\"provenance\") && arrival.provenance) {\n\t\t\t\tfor (let i = 0; i < filterValues.length; i++) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tarrival.line.name\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.includes(filterValues[i].toLowerCase()) ||\n\t\t\t\t\t\tarrival.provenance\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.includes(filterValues[i].toLowerCase())\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdecider = false\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn decider\n\t\t})\n\t\tsetViewData(filteredData)\n\t}\n\tconst noFilters = () => {\n\t\tsetViewData(data)\n\t}\n\tconst getStopSelection = async (event: {\n\t\tkey: string\n\t\ttarget: { value: string }\n\t}) => {\n\t\tconst searchValue = event.target.value\n\t\ttry {\n\t\t\tif (searchValue.length > 4) {\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`https://station-api-jade.vercel.app/?station=${searchValue}`\n\t\t\t\t)\n\t\t\t\tconst data = await response.json()\n\t\t\t\tconst newData = [stop, ...data]\n\t\t\t\tsetSelection(newData)\n\t\t\t} else {\n\t\t\t\tsetSelection([stop])\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.debug(error)\n\t\t}\n\t}\n\tconst setCurrStop = (currStop: Stop) => {\n\t\tsetStop(currStop)\n\t}\n\tconst getData = async (id: string, name: string) => {\n\t\ttry {\n\t\t\tconst type = name.startsWith(\"Berlin\") ? \"BLN\" : \"BBG\"\n\t\t\tconst duration = getDuration(type)\n\t\t\tlet lang = \"de\"\n\t\t\tconst browserLang = navigator.language\n\t\t\tif (browserLang.startsWith(\"de\")) {\n\t\t\t\tlang = \"de\"\n\t\t\t} else {\n\t\t\t\tlang = \"en\"\n\t\t\t}\n\t\t\t// const url =\n\t\t\t// `https://sklinkusch-vbbmicro.vercel.app/?station=${id}&duration=${duration}&mode=arr&language=${lang}`\n\t\t\tconst url = `https://vbb-rest.vercel.app/stops/${id}/arrivals?language=${lang}&duration=${duration}`\n\t\t\tconst response = await axios.get(url)\n\t\t\tconst { data: resData, status } = await response\n\t\t\tif (status === 500 || status !== 200) {\n\t\t\t\tsetError(`HTTP status code: ${status}`)\n\t\t\t\tsetData([])\n\t\t\t} else {\n\t\t\t\tconst myDate = new Date().toLocaleString(\"de-DE\", {\n\t\t\t\t\tyear: \"numeric\",\n\t\t\t\t\tmonth: \"2-digit\",\n\t\t\t\t\tday: \"2-digit\",\n\t\t\t\t\thour: \"2-digit\",\n\t\t\t\t\tminute: \"2-digit\",\n\t\t\t\t\ttimeZone: \"Europe/Berlin\",\n\t\t\t\t})\n\t\t\t\tconst { arrivals } = resData\n\t\t\t\tdocument.title =\n\t\t\t\t\tlang === \"de\" ? `Ankünfte an ${name}` : `Arrivals at ${name}`\n\t\t\t\tsetDate(myDate)\n\t\t\t\tsetData(arrivals)\n\t\t\t\tsetViewData(arrivals)\n\t\t\t\tsetError(null)\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.debug(error)\n\t\t}\n\t}\n\tconst handleChange = (currentStop: Stop) => {\n\t\tsetCurrStop(currentStop)\n\t\tconst { id: myStopId, name: currentStopName } = currentStop\n\t\tgetData(myStopId, currentStopName)\n\t\tconst inputCurrent = inputField.current as HTMLInputElement\n\t\tinputCurrent.value = \"\"\n\t\tconst filterFieldCurrent = filterField.current as HTMLInputElement\n\t\tfilterFieldCurrent.value = \"\"\n\t\tconst filterSelectorCurrent = filterSelector.current as HTMLSelectElement\n\t\tfilterSelectorCurrent.value = \"OR\"\n\t}\n\tconst handleSubmit = () => {\n\t\tgetData(stop.id, stop.name)\n\t\tconst inputCurrent = inputField.current as HTMLInputElement\n\t\tinputCurrent.value = \"\"\n\t\tconst filterFieldCurrent = filterField.current as HTMLInputElement\n\t\tfilterFieldCurrent.value = \"\"\n\t\tconst filterSelectorCurrent = filterSelector.current as HTMLSelectElement\n\t\tfilterSelectorCurrent.value = \"OR\"\n\t}\n\t// useEffect(() => {\n\t//   getData(stop);\n\t// }, []);\n\treturn (\n\t\t<div className=\"timetable\">\n\t\t\t<Input filterStops={getStopSelection} inputField={inputField} />\n\t\t\t<Select\n\t\t\t\thandleChange={handleChange}\n\t\t\t\tselection={selection}\n\t\t\t\tstop={stop}\n\t\t\t\tmode=\"arr\"\n\t\t\t/>\n\t\t\t<Button handleSubmit={handleSubmit} />\n\t\t\t<Filter\n\t\t\t\tfilterField={filterField}\n\t\t\t\tfilterSelector={filterSelector}\n\t\t\t\tfilterData={filterData}\n\t\t\t\tmode=\"arr\"\n\t\t\t/>\n\t\t\t<StopBody\n\t\t\t\tstop={stop}\n\t\t\t\tdata={viewData}\n\t\t\t\terror={error}\n\t\t\t\tdate={date}\n\t\t\t\tmode=\"arr\"\n\t\t\t/>\n\t\t</div>\n\t)\n}\n","export function getDuration(type: string) {\n  switch (type) {\n    case \"BLN\":\n      return getBlnDuration();\n    case \"BHF\":\n      return getBhfDuration();\n    case \"BBG\":\n      return getBbgDuration();\n    default:\n      break;\n  }\n}\nfunction getBlnDuration() {\n  const { isItHoliday, isItSaturday, hour } = getDate();\n  let duration = 60;\n  if (isItHoliday) {\n    if (hour < 7) {\n      duration = 60;\n    } else if (hour < 8) {\n      duration = 60;\n    } else if (hour < 20) {\n      duration = 40;\n    } else if (hour < 22) {\n      duration = 60;\n    } else {\n      duration = 60;\n    }\n  } else if (isItSaturday) {\n    if (hour < 6) {\n      duration = 60;\n    } else if (hour < 7) {\n      duration = 40;\n    } else if (hour < 21) {\n      duration = 30;\n    } else if (hour < 23) {\n      duration = 40;\n    } else {\n      duration = 60;\n    }\n  } else {\n    if (hour < 5) {\n      duration = 60;\n    } else if (hour < 7) {\n      duration = 30;\n    } else if (hour < 20) {\n      duration = 20;\n    } else if (hour < 22) {\n      duration = 30;\n    } else {\n      duration = 60;\n    }\n  }\n  return duration;\n}\n\nfunction getBhfDuration() {\n  const { isItHoliday, isItSaturday, hour } = getDate();\n  let duration = 60;\n  if (isItHoliday || isItSaturday) {\n    if (hour < 5) {\n      duration = 60;\n    } else if (hour < 6) {\n      duration = 30;\n    } else if (hour < 7) {\n      duration = 20;\n    } else if (hour < 22) {\n      duration = 10;\n    } else if (hour < 23) {\n      duration = 20;\n    } else {\n      duration = 30;\n    }\n  } else {\n    if (hour < 5) {\n      duration = 30;\n    } else if (hour < 6) {\n      duration = 20;\n    } else if (hour < 7) {\n      duration = 10;\n    } else if (hour < 22) {\n      duration = 5;\n    } else if (hour < 23) {\n      duration = 10;\n    } else {\n      duration = 20;\n    }\n  }\n  return duration;\n}\n\nfunction getBbgDuration() {\n  const { isItHoliday, isItSaturday, hour } = getDate();\n  let duration = 60;\n  if (isItHoliday || isItSaturday) {\n    if (hour < 5) {\n      duration = 240;\n    } else if (hour < 6) {\n      duration = 120;\n    } else if (hour < 7) {\n      duration = 120;\n    } else if (hour < 22) {\n      duration = 120;\n    } else if (hour < 23) {\n      duration = 120;\n    } else {\n      duration = 240;\n    }\n  } else {\n    if (hour < 5) {\n      duration = 120;\n    } else if (hour < 6) {\n      duration = 60;\n    } else if (hour < 7) {\n      duration = 60;\n    } else if (hour < 22) {\n      duration = 60;\n    } else if (hour < 23) {\n      duration = 60;\n    } else {\n      duration = 120;\n    }\n  }\n  return duration;\n}\n\nconst isSunday = (weekday: number) => {\n  if (weekday === 0) {\n    return true;\n  }\n  return false;\n};\nconst isHoliday = (day: number, month: number, year: number) => {\n  if (day === 1 && month === 1) {\n    return true;\n  }\n  if (day === 8 && month === 3) {\n    return true;\n  }\n  if (day === 1 && month === 5) {\n    return true;\n  }\n  if (day === 3 && month === 10) {\n    return true;\n  }\n  if (month === 12 && (day === 25 || day === 26)) {\n    return true;\n  }\n  let movableHolidays = false;\n  const holidays = easterDate(year);\n  holidays.forEach(holiday => {\n    if (day === holiday[0] && month === holiday[1]) {\n      movableHolidays = true;\n    }\n  });\n  if (movableHolidays) {\n    return true;\n  }\n  return false;\n};\nfunction isSaturday(weekday: number) {\n  if (weekday === 6) {\n    return true;\n  }\n  return false;\n}\nconst gauss = (number: number) => {\n  if (number > 0) {\n    return Number(number.toFixed(0));\n  } else if (number < 0) {\n    return Number((number - 1).toFixed(0));\n  } else {\n    return 0;\n  }\n};\n\nexport function leap(year: number) {\n  if (year % 400 === 0) {\n    return true;\n  } else if (year % 100 === 0) {\n    return false;\n  } else if (year % 4 === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nconst easterDate = (year: number) => {\n  // Gaussian calculus\n  // some constants\n  const g = year % 19;\n  const c = gauss(year / 100);\n  const a = gauss(c / 4);\n  const d = gauss((8 * c + 13) / 25);\n  const h = (c - a - d + 19 * g + 15) % 30;\n  const f = gauss(h / 20);\n  const k = gauss(29 / (h + 1));\n  const m = gauss((21 - g) / 11);\n  const n = gauss(year / 4);\n  const i = h - f * (1 - k * m);\n  const j = (year + n + i + 2 - c + a) % 7;\n  const l = i - j;\n  const easterSundayMonth = l <= 3 ? 3 : 4;\n  const easterSundayDay = l <= 3 ? l + 28 : l - 3;\n  const goodFridayDate =\n    easterSundayDay < 3 && easterSundayMonth === 4\n      ? [easterSundayDay + 29, 3, year]\n      : [easterSundayDay - 2, easterSundayMonth, year];\n  const easterMonday =\n    easterSundayDay === 31 && easterSundayMonth === 3\n      ? [1, 4, year]\n      : [easterSundayDay + 1, easterSundayMonth, year];\n  let ascension = [];\n  if (easterSundayDay < 23 && easterSundayMonth === 3) {\n    ascension = [easterSundayDay + 8, 4, year];\n  } else if (easterSundayMonth === 3) {\n    ascension = [easterSundayDay - 22, 5, year];\n  } else if (easterSundayDay > 21 && easterSundayMonth === 4) {\n    ascension = [easterSundayDay - 22, 6, year];\n  } else {\n    ascension = [easterSundayDay + 9, 5, year];\n  }\n  let pentecostMonday = [];\n  if (ascension[1] === 4) {\n    pentecostMonday = [ascension[0] - 19, 5, year];\n  } else if (ascension[0] > 20 && ascension[1] === 5) {\n    pentecostMonday = [ascension[0] - 20, 6, year];\n  } else {\n    pentecostMonday = [ascension[0] + 10, ascension[1], year];\n  }\n  const holidays = [goodFridayDate, easterMonday, ascension, pentecostMonday];\n  return holidays;\n};\n\nfunction getDate() {\n  const nowDate = new Date();\n  const nowDateString = nowDate.toLocaleDateString(\"en-GB\", {\n    timeZone: \"Europe/Berlin\",\n    year: \"numeric\",\n    month: \"numeric\",\n    day: \"numeric\",\n    hour: \"numeric\"\n  });\n  const dateTime = nowDateString.split(\",\");\n  const dateArray = dateTime[0].split(\"/\");\n  const hour = Number(dateTime[1]);\n  const day = Number(dateArray[0]);\n  const month = Number(dateArray[1]);\n  const year = Number(dateArray[2]);\n  const nowDateLocal = new Date(year, month - 1, day);\n  const weekday = nowDateLocal.getDay();\n  const isItHoliday = isSunday(weekday) || isHoliday(day, month, year);\n  const isItSaturday = isSaturday(weekday);\n  return { isItHoliday, isItSaturday, hour };\n}\n"],"names":["Input","lazy","Select","Button","Filter","StopBody","TimetableArr","_useDebugState","useDebugState","_useDebugState2","_slicedToArray","selection","setSelection","_useDebugState3","id","name","type","_useDebugState4","stop","setStop","_useDebugState5","_useDebugState6","data","setData","_useDebugState7","_useDebugState8","date","setDate","_useDebugState9","_useDebugState10","viewData","setViewData","_useDebugState11","_useDebugState12","error","setError","params","useParams","navigate","useNavigate","useEffect","_findInitialStop","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","station","_yield$station","modifiedId","_response","_station","_yield$_station","_name","initialId","_response2","_station2","_yield$_station2","initialName","wrap","_context","prev","next","hasOwnProperty","length","fetch","concat","sent","json","getData","document","title","navigator","language","startsWith","t0","console","debug","slice","t1","t2","apply","arguments","findInitialStop","inputField","useRef","filterField","filterSelector","filterOr","filterValues","filteredData","filter","arrival","decider","provenance","i","line","toLowerCase","includes","filterAnd","noFilters","getStopSelection","_ref","_callee2","event","searchValue","_data","newData","_context2","target","value","_toConsumableArray","_x","_ref2","_callee3","duration","lang","browserLang","url","_yield$response","resData","status","myDate","arrivals","_context3","getDuration","axios","Date","toLocaleString","year","month","day","hour","minute","timeZone","_x2","_x3","_jsxs","className","children","_jsx","filterStops","handleChange","currentStop","myStopId","currentStopName","current","mode","handleSubmit","filterData","split","filterMode","_getDate","getDate","isItHoliday","isItSaturday","getBlnDuration","_getDate2","getBhfDuration","_getDate3","getBbgDuration","isSunday","weekday","isHoliday","movableHolidays","easterDate","forEach","holiday","gauss","number","Number","toFixed","g","c","a","h","l","easterSundayMonth","easterSundayDay","ascension","dateTime","toLocaleDateString","dateArray","getDay","isSaturday"],"sourceRoot":""}