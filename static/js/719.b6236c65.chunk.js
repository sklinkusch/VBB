"use strict";(self.webpackChunkvbb=self.webpackChunkvbb||[]).push([[719],{1576:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(5043),n=i(7483);function r(e){let{left:t,right:i}=e;return(0,n.FD)(a.Fragment,{children:[(0,n.Y)("div",{className:"legendleft",sx:{gridColumn:"1 / span 4"},children:t}),(0,n.Y)("div",{className:"legendright",sx:{textAlign:"left",gridColumn:"5 / span 20"},children:i})]})}},9719:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var a=i(5043),n=i(1576),r=i(2082),o=i(7483);function s(){return(0,o.FD)("div",{className:"legend",sx:{display:["none","none","grid"],gridTemplateColumns:"repeat(24,1fr)",border:"2px solid black",width:"70%",margin:"0 auto 40px auto",borderRadius:"10px"},children:[(0,o.Y)("h3",{sx:{gridColumn:"1 / span 24"},children:(0,r.A)("legend")}),(0,o.Y)(n.A,{left:(0,r.A)("scheduled"),right:(0,r.A)("scheduledDesc")}),(0,o.Y)(n.A,{left:(0,r.A)("real"),right:(0,r.A)("realDesc")}),(0,o.Y)(n.A,{left:(0,r.A)("delay"),right:(0,r.A)("delayDesc")}),(0,o.Y)(n.A,{left:(0,r.A)("line"),right:(0,r.A)("lineDesc")}),(0,o.Y)(n.A,{left:(0,r.A)("direction"),right:(0,r.A)("directionDesc")}),(0,o.Y)(n.A,{left:(0,o.Y)("span",{className:"fas fa-wheelchair"}),right:(0,r.A)("barrierfree")}),(0,o.Y)(n.A,{left:(0,o.Y)("span",{className:"fas fa-bicycle"}),right:(0,r.A)("bike")}),(0,o.Y)(n.A,{left:(0,o.Y)("span",{className:"fas fa-exclamation-triangle"}),right:(0,r.A)("attention")}),(0,o.Y)(n.A,{left:(0,o.Y)("span",{className:"fas fa-times"}),right:(0,r.A)("cancelled")})]})}var c=i(3216),d=i(5475),l=i(9108),u=i(6992),g=i(3192),p=i(9786),h=i(8266),m=i(750),f=i(354),b=i(4300),y=i(5508);function A(){const[e,t]=(0,l.AZ)("selection",[]),[i,n]=(0,l.AZ)("filterSelection",[]),[r,s]=(0,l.AZ)("stop",{id:"",name:"",type:""}),[A,v]=(0,l.AZ)("filterStop",{id:"0",name:"\u2e3a",type:""}),[w,S]=(0,l.AZ)("data",[]),[D,Y]=(0,l.AZ)("date",""),[Z,x]=(0,l.AZ)("error",null),[B,E]=(0,l.AZ)("express",!0),[j,N]=(0,l.AZ)("regional",!0),[C,L]=(0,l.AZ)("suburban",!0),[T,k]=(0,l.AZ)("subway",!0),[F,O]=(0,l.AZ)("tram",!0),[P,W]=(0,l.AZ)("bus",!0),[z,I]=(0,l.AZ)("ferry",!0),[H,R]=(0,l.AZ)("time",(new Date).toLocaleString("sv",{timeZone:"Europe/Berlin",minute:"2-digit",hour:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).replace(" ","T")),q=(0,c.g)(),[G,J]=(0,d.useSearchParams)(),K=(0,c.Zp)();(0,a.useEffect)((()=>{!async function(){if(q.hasOwnProperty("id")&&"string"===typeof q.id&&9===q.id.length)try{const e="https://vbb-rest.vercel.app/stops/".concat(q.id,"?language=de"),i=await fetch(e),a=await i.json(),{name:n}=await a;K("/departures/".concat(q.id)),s(a);const r=G.has("direction")&&G.get("direction")?G.get("direction"):"0";if("string"===typeof r&&"0"!==r){const e="https://vbb-rest.vercel.app/stops/".concat(r,"?language=de"),t=await fetch(e),i=await t.json(),{name:a}=await i;v({id:r,name:a,type:""})}else v({id:"0",name:"\u2e3a",type:""});U(q.id,n,{direction:r}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(n):"Departures from ".concat(n);t([a])}catch(Z){console.debug(Z)}else if(q.hasOwnProperty("id")&&"string"===typeof q.id&&12===q.id.length)try{const e="".concat(q.id.slice(0,1)).concat(q.id.slice(-8)),i="https://vbb-rest.vercel.app/stops/".concat(e,"?language=de"),a=await fetch(i),n=await a.json(),{name:r}=await n;K("/departures/".concat(e)),s(n),U(e,r,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(r):"Departures from ".concat(r);t([n])}catch(Z){console.debug(Z)}else try{const e="900100011",i="https://vbb-rest.vercel.app/stops/".concat(e,"?language=de"),a=await fetch(i),n=await a.json(),{name:r}=await n;K("/departures/".concat(e)),s(n),U(e,r,{direction:"0"}),document.title=navigator.language.startsWith("de")?"Abfahrten ab ".concat(r):"Departures from ".concat(r);t([n])}catch(Z){console.debug(Z)}}()}),[]);const M=(0,a.useRef)(null),Q=(0,a.useRef)(null),U=async(e,t,i)=>{try{const a=(e=>e.startsWith("Berlin")||e.includes("(Berlin)")||e.includes("Berlin Hauptbahnhof")?"BLN":"BBG")(t),n=(0,u.D)(a);let o="de";o=navigator.language.startsWith("de")?"de":"en";const s=i.direction?"0"!==i.direction?parseInt(i.direction,10):null:"0"!==A.id?parseInt(A.id,10):null,c="number"===typeof s?"&direction=".concat(s):"";if((e===r.id||""===D)&&!i.time){const e=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),t=(new Date).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T");Y(e),R(t)}const d="https://vbb-rest.vercel.app/stops/".concat(e,"/departures?language=").concat(o,"&duration=").concat(n,"&express=").concat("boolean"===typeof i.express?i.express.toString():B.toString(),"&regional=").concat("boolean"===typeof i.regional?i.regional.toString():j.toString(),"&suburban=").concat("boolean"===typeof i.suburban?i.suburban.toString():C.toString(),"&subway=").concat("boolean"===typeof i.subway?i.subway.toString():T.toString(),"&tram=").concat("boolean"===typeof i.tram?i.tram.toString():F.toString(),"&bus=").concat("boolean"===typeof i.bus?i.bus.toString():P.toString(),"&ferry=").concat("boolean"===typeof i.ferry?i.ferry.toString():z.toString()).concat(c,"&when=").concat("string"===typeof i.time?new Date(i.time).toISOString():new Date(H).toISOString()),l=await fetch(d),{status:g}=await l,p=await l.json();if(500===g||200!==g)x("HTTP status code: ".concat(g)),S([]);else{const{departures:e}=p;document.title="de"===o?"Abfahrten ab ".concat(t):"Departures from ".concat(t),S(e),x(null)}}catch(Z){console.debug(Z)}};return(0,o.FD)("div",{className:"timetable",sx:{minHeight:"75vh"},children:[M&&(0,o.Y)(g.A,{filterStops:async e=>{const i=e.target.value;try{if(i.length>=3){const e="https://vbb-rest.vercel.app/locations?query=".concat(i,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),a=await fetch(e),n=await a.json(),o=[r,...n];t(o)}else t([r])}catch(Z){console.debug(Z)}},inputField:M}),(0,o.Y)(p.A,{handleChange:e=>{s(e);const{id:t,name:i}=e;U(t,i,{direction:"0"});M.current.value=""},selection:e,stop:r,mode:"dep"}),(0,o.Y)(h.A,{handleSubmit:()=>{const e=(new Date).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}),t=(new Date).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T");Y(e),R(t),U(r.id,r.name,{direction:A.id,time:t});M.current.value=""}}),(0,o.FD)("div",{children:[(0,o.Y)("span",{sx:{display:"inline-block",mr:"0.2rem",fontStyle:"italic",fontWeight:700},children:"via"}),(0,o.Y)(g.A,{filterStops:async e=>{const t=e.target.value;try{const e={id:"0",name:"\u2e3a",type:""};if(t.length>=3){const i="https://vbb-rest.vercel.app/locations?query=".concat(t,"&results=15&fuzzy=true&stops=true&addresses=false&poi=false&language=de&linesOfStops=true"),a=await fetch(i),r=await a.json(),o="0"!==A.id?[e,A,...r]:[e,...r];n(o)}else if("0"!==A.id){n([e,A])}else n([e])}catch(Z){console.debug(Z)}},inputField:Q}),(0,o.Y)(m.A,{handleChange:e=>{"0"!==e.id?(v(e),J({direction:e.id}),U(r.id,r.name,{direction:e.id})):(v({id:"0",name:"\u2e3a",type:""}),J({direction:"0"}),U(r.id,r.name,{direction:"0"}));Q.current.value=""},selection:i,stop:A})]}),(0,o.Y)(f.A,{products:[B,j,C,T,F,P,z],productSetters:[E,N,L,k,O,W,I],getData:e=>U(r.id,r.name,e),searchParams:G,setSearchParams:J}),(0,o.Y)(y.A,{time:H,setTime:e=>{const t=new Date(e).toLocaleString("sv",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"}).replace(" ","T"),i=new Date(e).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Berlin"});R(t),Y(i),U(r.id,r.name,{direction:A.id,time:t})}}),(0,o.Y)(b.A,{stop:r,data:w,error:Z,date:D,mode:"dep"})]})}var v=i(579);const w=function(){return(0,v.jsxs)("div",{children:[(0,v.jsx)(s,{}),(0,v.jsx)(A,{})]})}}}]);
//# sourceMappingURL=719.b6236c65.chunk.js.map